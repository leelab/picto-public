\hypertarget{director_2main_8cpp}{\section{source/director/main.cpp File Reference}
\label{director_2main_8cpp}\index{source/director/main.\-cpp@{source/director/main.\-cpp}}
}


Picto\-Director is the application that presents stimuli and collects the behavioral data. It runs the \hyperlink{namespace_picto}{Picto} \char`\"{}game.\char`\"{}.  


{\ttfamily \#include $<$Q\-Application$>$}\\*
{\ttfamily \#include $<$Q\-Translator$>$}\\*
{\ttfamily \#include $<$Q\-Message\-Box$>$}\\*
{\ttfamily \#include $<$Q\-Shared\-Pointer$>$}\\*
{\ttfamily \#include \char`\"{}../common/globals.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../common/update/updatedownloader.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Hardware\-Setup.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}Director.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}../common/mainmemleakdetect.\-h\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{director_2main_8cpp_a6ef90ae12bd754b68b0de66e4f089f16}{Q\-Shared\-Pointer\\*
$<$ \hyperlink{class_picto_1_1_command_channel}{Picto\-::\-Command\-Channel} $>$ {\bfseries connect\-To\-Server} (Q\-Uuid director\-I\-D)}\label{director_2main_8cpp_a6ef90ae12bd754b68b0de66e4f089f16}

\item 
\hypertarget{director_2main_8cpp_ac26a2d1a381e73682141825df226958b}{void {\bfseries set\-User\-Info} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_engine_1_1_picto_engine}{Picto\-::\-Engine\-::\-Picto\-Engine} $>$ engine, Q\-String status)}\label{director_2main_8cpp_ac26a2d1a381e73682141825df226958b}

\item 
int \hyperlink{director_2main_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{main} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em The main method of the \hyperlink{namespace_picto}{Picto} \hyperlink{class_director}{Director} application. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Picto\-Director is the application that presents stimuli and collects the behavioral data. It runs the \hyperlink{namespace_picto}{Picto} \char`\"{}game.\char`\"{}. \hyperlink{namespace_picto}{Picto} \hyperlink{class_director}{Director} is one of the major components of the \hyperlink{namespace_picto}{Picto} system. This software is responsible for presenting Experimental stimuli, collecting behavioral data from the test subject, and controlling the flow of the experiment by running the State\-Machine. The \hyperlink{class_director}{Director} communicates with Picto\-Server during the experiment, receives commands and sends over all Experimental data in real time.

Upon booting, the \hyperlink{class_director}{Director} first sets up the hardware interface to match the system on which it is running (currently this is limited to a Picto\-Box or a legacy Orion computer). Next, it attempts to connect to a Picto\-Server instance. Once connected, it sits in a loop sending C\-O\-M\-P\-O\-N\-E\-N\-T\-U\-P\-D\-A\-T\-E \char`\"{}keep alive\char`\"{} commands periodically. The responses to these commands may include \char`\"{}directives\char`\"{} which tell the \hyperlink{class_director}{Director} to do something (start an experiment, deliver a reward, etc).

In its current state, Picto\-Director is really only capable of running on Windows. However, this was not how the application was intended to work. In theory, Picto\-Director should be able to run on other Operating systems as well. If Q\-T supported everything that we wanted to do, this would be trivial. In practice though, we need to communicate with the Ni\-Daq card, the \hyperlink{class_phidgets}{Phidgets} devices, and render at high speed with precise timing to the display. None of these operations are supporte in Qt, so supporting other O\-Ses will necessitate writing the classes that handle those operations for the other O\-S.

Command line arguments\-:
\begin{DoxyItemize}
\item -\/name\-: Set the name of this \hyperlink{class_director}{Director} instance to the string argument immediately following \char`\"{}-\/name \char`\"{}
\item -\/system\-Number\-: Sets the system number to the number immediately following \char`\"{}-\/system\-Number \char`\"{}. A \hyperlink{class_director}{Director} can communicate only with a Picto\-Server running with the same system number
\item -\/pixmap\-: If this is included, Pixmap rendering will be used instead of Direct\-X rendering. This makes timing less precise, but is good for testing since it is a little kinder about things like taking over as the main window and generally allowing for other things to happen on the \hyperlink{class_director}{Director} computer. It is also usable over remote desktop.
\item -\/x\-Chan\-: The number argument following this one defines the analog input channel on which the x coordinate of eye position data will come in. If x\-Chan and y\-Chan are not used, the mouse will be used for position input.
\item -\/y\-Chan\-: The number argument following this one defines the analog input channel on which the y coordinate of eye position data will come in. If x\-Chan and y\-Chan are not used, the mouse will be used for position input.
\item -\/x\-Diam\-Chan\-: The number argument following this one defines the analog input channel on which the x coordinate of eye diameter data will come in. Don't use this if eye diameter is not tracked.
\item -\/y\-Diam\-Chan\-: The number argument following this one defines the analog input channel on which the y coordinate of eye diameter data will come in. Don't use this if eye diameter is not tracked.
\item -\/position\-Period\-: The number argument following this one defines the sample period per eye position sample. For example, \char`\"{}-\/position\-Period 2\char`\"{} sets up the \hyperlink{class_director}{Director} to sample eye position data once every 2 ms.
\item -\/diam\-Period\-: The number argument following this one defines the sample period per eye diameter sample. For example, \char`\"{}-\/diam\-Period 4\char`\"{} sets up the \hyperlink{class_director}{Director} to sample eye diameter data once every 4 ms.
\item -\/legacy\-: Sets the \hyperlink{class_director}{Director} to interface with Orion computer hardware for its Reward\-Controller, Event\-Code\-Generator and Analog\-Input\-Port (no Output\-Signal\-Controller is supported). Note that the hardware line that controlles the reward box still needs to be moved to a different pin that was used in Orion. See Legacy\-System\-X\-P\-Reward\-Controller for more details. Use only one of legacy, pictobox, or test.
\item -\/pictobox\-: Sets the \hyperlink{class_director}{Director} to interface with Pictobox computer hardware for its Reward\-Controller, Event\-Code\-Generator, Analog\-Input\-Port, and Output\-Signal\-Controller. Use only one of legacy, pictobox, or test.
\item -\/test\-: Sets the \hyperlink{class_director}{Director} to use an Audio\-Reward\-Controller, Mouse\-Signal\-Channel and no event or output controllers. Use only one of legacy, pictobox, or test.
\item -\/onesided\-: When this is used there will be no alignment or gathering of neural data. This means that the parallel port usually used to send alignment events to the neural system will be available as a secondary Output\-Signal port to the experiment developer referred to as P\-A\-R0. \begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}

\end{DoxyItemize}

Definition in file \hyperlink{director_2main_8cpp_source}{main.\-cpp}.



\subsection{Function Documentation}
\hypertarget{director_2main_8cpp_a0ddf1224851353fc92bfbff6f499fa97}{\index{director/main.\-cpp@{director/main.\-cpp}!main@{main}}
\index{main@{main}!director/main.cpp@{director/main.\-cpp}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{director_2main_8cpp_a0ddf1224851353fc92bfbff6f499fa97}


The main method of the \hyperlink{namespace_picto}{Picto} \hyperlink{class_director}{Director} application. 

Goes through standard \hyperlink{namespace_picto}{Picto} application setup procedure, setting up the Q\-Application, the Q\-Translator, and calling \hyperlink{namespace_picto_ab626f6cf7953f6f0c2947f0f03b8e62e}{Picto\-::\-Initialize\-Lib()} and Picto\-::\-Iniitialize\-Ports(), then parses the command line for Hardware setup data which will be used in the construction of the \hyperlink{class_director}{Director} object. After parsing command line options, the Auto\-Updater system is setup with the commands that will be needed to restart this application, then the \hyperlink{class_director}{Director} object is created and its \hyperlink{class_component_interface_aa5114fa432d4102e697b808c986a59bd}{Director\-::activate()} function is called.

\hyperlink{class_component_interface_aa5114fa432d4102e697b808c986a59bd}{Director\-::activate()} doesn't return until the application closes. 

Definition at line 85 of file main.\-cpp.

