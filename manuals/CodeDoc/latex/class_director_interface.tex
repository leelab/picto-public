\hypertarget{class_director_interface}{\section{Director\-Interface Class Reference}
\label{class_director_interface}\index{Director\-Interface@{Director\-Interface}}
}


An interface that encapsulates socket communicate to the director from the Front Panel Application.  




{\ttfamily \#include $<$Director\-Interface.\-h$>$}

Inheritance diagram for Director\-Interface\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_director_interface}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_director_interface_af038ceceaba3376519b2fac8f6124a3c}{Director\-Interface} (\hyperlink{class_front_panel_info}{Front\-Panel\-Info} $\ast$panel\-Info)
\begin{DoxyCompactList}\small\item\em Constructs a new \hyperlink{class_director_interface}{Director\-Interface} object. \end{DoxyCompactList}\item 
bool \hyperlink{class_director_interface_ac461d58ad8cc8bd1e58d48420f48503b}{set\-I\-P} (Q\-String addr)
\begin{DoxyCompactList}\small\item\em Not yet implemented in the director appliction. \end{DoxyCompactList}\item 
Q\-String \hyperlink{class_director_interface_a647ba38d879d6c789472390808b8822c}{get\-I\-P} ()
\begin{DoxyCompactList}\small\item\em Gets the current I\-P address from the Direction application. \end{DoxyCompactList}\item 
bool \hyperlink{class_director_interface_ab5a2e5ae02989b19ed12c0d884aa45f6}{set\-Name} (Q\-String name)
\begin{DoxyCompactList}\small\item\em Sets the name of the Pictobox to the \hyperlink{class_director}{Director} application. \end{DoxyCompactList}\item 
Q\-String \hyperlink{class_director_interface_aa9978bbc809f4026682fa869b55a1aa5}{get\-Name} ()
\begin{DoxyCompactList}\small\item\em Returns the current name of the Picto\-Box as read from the \hyperlink{class_director}{Director} application. \end{DoxyCompactList}\item 
\hyperlink{_director_interface_8h_add118e59eefaadc163fc7f91ddadd7a4}{Director\-Status} \hyperlink{class_director_interface_a1a10f1dcc4f45cb7d4c24f1f40dadd81}{get\-Status} ()
\begin{DoxyCompactList}\small\item\em Returns a Director\-Status enum containing the current status as reported by the \hyperlink{class_director}{Director} application. \end{DoxyCompactList}\item 
bool \hyperlink{class_director_interface_a67f9e1237b43292deb6d287f10d15bff}{set\-Reward\-Duration} (int reward\-Dur, int controller)
\begin{DoxyCompactList}\small\item\em Sets the reward duration of the for the input controller number to the input reward duration (in ms) \end{DoxyCompactList}\item 
int \hyperlink{class_director_interface_a610f12491884aebd3b775b5fbbb3202c}{get\-Reward\-Duration} (int controller)
\begin{DoxyCompactList}\small\item\em Returns the current reward duration for the input controller number. \end{DoxyCompactList}\item 
bool \hyperlink{class_director_interface_ac38c9e1b84eaddc5210ecb347db5df32}{set\-Flush\-Duration} (int flush\-Dur, int controller)
\begin{DoxyCompactList}\small\item\em Sets the reward duration of the for the input controller number to the input flush duration (in seconds) \end{DoxyCompactList}\item 
int \hyperlink{class_director_interface_a38dfc7b5d091c8ba5df16f608376f3b7}{get\-Flush\-Duration} (int controller)
\begin{DoxyCompactList}\small\item\em Returns the current flush duration for the input controller number. \end{DoxyCompactList}\item 
bool \hyperlink{class_director_interface_a9ded2d133f5911f909ac3e4a0029dd68}{flush} (int controller)
\begin{DoxyCompactList}\small\item\em Starts a flush or stops it if one is already in progress on the input controller. \end{DoxyCompactList}\item 
int \hyperlink{class_director_interface_affd5f08e8c7f6a77b76e8776fd16f223}{get\-Flush\-Time\-Remaining} (int controller)
\begin{DoxyCompactList}\small\item\em Returns the number of seconds remaining before the currently active flush will be completed. \end{DoxyCompactList}\item 
bool \hyperlink{class_director_interface_a82b07bf6375ff90d71663a0373a86765}{start\-Reward} (int controller)
\begin{DoxyCompactList}\small\item\em Starts a reward on the input controller. \end{DoxyCompactList}\item 
\hypertarget{class_director_interface_a66be82803781f998f822e1e151e2fb4a}{bool \hyperlink{class_director_interface_a66be82803781f998f822e1e151e2fb4a}{is\-Connected} ()}\label{class_director_interface_a66be82803781f998f822e1e151e2fb4a}

\begin{DoxyCompactList}\small\item\em Returns true if the \hyperlink{class_director}{Director} application is connected to this Front Panel application, false otherwise. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
An interface that encapsulates socket communicate to the director from the Front Panel Application. 

This interface handles all communication for the Front Panel Application to and from the director application. In the front panel to director communication paradigm, the front panel acts as the master. Both set and get commands are initiated by the front panel with the director acting as a slave and simply responding to these commands. Set commands return true if the value was succesfully set and false otherwise. get\-Commands return the requested value or an invalid value (typically -\/1) if communication to the director failed. \begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}


Definition at line 40 of file Director\-Interface.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_director_interface_af038ceceaba3376519b2fac8f6124a3c}{\index{Director\-Interface@{Director\-Interface}!Director\-Interface@{Director\-Interface}}
\index{Director\-Interface@{Director\-Interface}!DirectorInterface@{Director\-Interface}}
\subsubsection[{Director\-Interface}]{\setlength{\rightskip}{0pt plus 5cm}Director\-Interface\-::\-Director\-Interface (
\begin{DoxyParamCaption}
\item[{{\bf Front\-Panel\-Info} $\ast$}]{panel\-Info}
\end{DoxyParamCaption}
)}}\label{class_director_interface_af038ceceaba3376519b2fac8f6124a3c}


Constructs a new \hyperlink{class_director_interface}{Director\-Interface} object. 

This function sets up the director interface. It takes in a panel\-Info object pointer, since that is the object that creates and manages the sockets to the \hyperlink{class_director}{Director} application. It also sets up the local reward/flush handling system that allows the Front Panel application to trigger rewards and flushes even if the \hyperlink{namespace_picto}{Picto} \hyperlink{class_director}{Director} application is not running. This is particularly important if the Picto\-Box is being used with some other non-\/picto application (ie. Legacy Orion application). For the purpose of functioning with Leelab's legacy Orion application, all reward/flush durations are stored in the Windows registry and this is set up in this constructor. Note that the latest Orion code has been updated to query this registry entry for reward durations so that Orion can run on Pictoboxes and use the reward timing data set through their front panel. 

Definition at line 34 of file Director\-Interface.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{class_director_interface_a9ded2d133f5911f909ac3e4a0029dd68}{\index{Director\-Interface@{Director\-Interface}!flush@{flush}}
\index{flush@{flush}!DirectorInterface@{Director\-Interface}}
\subsubsection[{flush}]{\setlength{\rightskip}{0pt plus 5cm}bool Director\-Interface\-::flush (
\begin{DoxyParamCaption}
\item[{int}]{controller}
\end{DoxyParamCaption}
)}}\label{class_director_interface_a9ded2d133f5911f909ac3e4a0029dd68}


Starts a flush or stops it if one is already in progress on the input controller. 

If a flush is already in progress for the input controller, it is stopped, otherwise a message is sent to the director application to begin a flush according to the currently set flush duration. Note that flushes can still occur even if the director is not running. In this case flushes are simply handled locally within this application. This is important in case the pictobox is being used with some third party application (ie. Legacy Orion software) and not the \hyperlink{namespace_picto}{Picto} \hyperlink{class_director}{Director}. This function returns false only if the input controller number or the currently set flush duration were invalid, otherwise it always successfully flushes whether or not the director application is reachable. \begin{DoxySeeAlso}{See Also}
update\-Local\-Rewards() 
\end{DoxySeeAlso}


Definition at line 271 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_a38dfc7b5d091c8ba5df16f608376f3b7}{\index{Director\-Interface@{Director\-Interface}!get\-Flush\-Duration@{get\-Flush\-Duration}}
\index{get\-Flush\-Duration@{get\-Flush\-Duration}!DirectorInterface@{Director\-Interface}}
\subsubsection[{get\-Flush\-Duration}]{\setlength{\rightskip}{0pt plus 5cm}int Director\-Interface\-::get\-Flush\-Duration (
\begin{DoxyParamCaption}
\item[{int}]{controller}
\end{DoxyParamCaption}
)}}\label{class_director_interface_a38dfc7b5d091c8ba5df16f608376f3b7}


Returns the current flush duration for the input controller number. 

Returns -\/1 when communication fails or the flush duration is seconds if communication is successful 

Definition at line 239 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_affd5f08e8c7f6a77b76e8776fd16f223}{\index{Director\-Interface@{Director\-Interface}!get\-Flush\-Time\-Remaining@{get\-Flush\-Time\-Remaining}}
\index{get\-Flush\-Time\-Remaining@{get\-Flush\-Time\-Remaining}!DirectorInterface@{Director\-Interface}}
\subsubsection[{get\-Flush\-Time\-Remaining}]{\setlength{\rightskip}{0pt plus 5cm}int Director\-Interface\-::get\-Flush\-Time\-Remaining (
\begin{DoxyParamCaption}
\item[{int}]{controller}
\end{DoxyParamCaption}
)}}\label{class_director_interface_affd5f08e8c7f6a77b76e8776fd16f223}


Returns the number of seconds remaining before the currently active flush will be completed. 

This only works with the \hyperlink{class_director}{Director} application. If flushes are performed local to the Front Panel application (see \hyperlink{class_director_interface_a9ded2d133f5911f909ac3e4a0029dd68}{flush()}) this function will always return -\/1. 

Definition at line 302 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_a647ba38d879d6c789472390808b8822c}{\index{Director\-Interface@{Director\-Interface}!get\-I\-P@{get\-I\-P}}
\index{get\-I\-P@{get\-I\-P}!DirectorInterface@{Director\-Interface}}
\subsubsection[{get\-I\-P}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Director\-Interface\-::get\-I\-P (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_director_interface_a647ba38d879d6c789472390808b8822c}


Gets the current I\-P address from the Direction application. 

Unlike the \hyperlink{class_director_interface_ac461d58ad8cc8bd1e58d48420f48503b}{set\-I\-P()} function, this function works correctly on the director side. On succesful communication, a string containing the ip address is returned, otherwise a blank string is returned. 

Definition at line 95 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_aa9978bbc809f4026682fa869b55a1aa5}{\index{Director\-Interface@{Director\-Interface}!get\-Name@{get\-Name}}
\index{get\-Name@{get\-Name}!DirectorInterface@{Director\-Interface}}
\subsubsection[{get\-Name}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Director\-Interface\-::get\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_director_interface_aa9978bbc809f4026682fa869b55a1aa5}


Returns the current name of the Picto\-Box as read from the \hyperlink{class_director}{Director} application. 

Returns '\hyperlink{namespace_picto}{Picto} Not Found' when communication fails. Don't name the Picto\-Box '\hyperlink{namespace_picto}{Picto} Not Found', that would be confusing... 

Definition at line 126 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_a610f12491884aebd3b775b5fbbb3202c}{\index{Director\-Interface@{Director\-Interface}!get\-Reward\-Duration@{get\-Reward\-Duration}}
\index{get\-Reward\-Duration@{get\-Reward\-Duration}!DirectorInterface@{Director\-Interface}}
\subsubsection[{get\-Reward\-Duration}]{\setlength{\rightskip}{0pt plus 5cm}int Director\-Interface\-::get\-Reward\-Duration (
\begin{DoxyParamCaption}
\item[{int}]{controller}
\end{DoxyParamCaption}
)}}\label{class_director_interface_a610f12491884aebd3b775b5fbbb3202c}


Returns the current reward duration for the input controller number. 

Returns -\/1 when communication fails or the reward duration is ms if communication is successful 

Definition at line 192 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_a1a10f1dcc4f45cb7d4c24f1f40dadd81}{\index{Director\-Interface@{Director\-Interface}!get\-Status@{get\-Status}}
\index{get\-Status@{get\-Status}!DirectorInterface@{Director\-Interface}}
\subsubsection[{get\-Status}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Director\-Status} Director\-Interface\-::get\-Status (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_director_interface_a1a10f1dcc4f45cb7d4c24f1f40dadd81}


Returns a Director\-Status enum containing the current status as reported by the \hyperlink{class_director}{Director} application. 

See Director\-Status for interpretations of returned values. 

Definition at line 141 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_ac38c9e1b84eaddc5210ecb347db5df32}{\index{Director\-Interface@{Director\-Interface}!set\-Flush\-Duration@{set\-Flush\-Duration}}
\index{set\-Flush\-Duration@{set\-Flush\-Duration}!DirectorInterface@{Director\-Interface}}
\subsubsection[{set\-Flush\-Duration}]{\setlength{\rightskip}{0pt plus 5cm}bool Director\-Interface\-::set\-Flush\-Duration (
\begin{DoxyParamCaption}
\item[{int}]{flush\-Dur, }
\item[{int}]{controller}
\end{DoxyParamCaption}
)}}\label{class_director_interface_ac38c9e1b84eaddc5210ecb347db5df32}


Sets the reward duration of the for the input controller number to the input flush duration (in seconds) 

Returns true on successful set, false on failure. 

Definition at line 216 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_ac461d58ad8cc8bd1e58d48420f48503b}{\index{Director\-Interface@{Director\-Interface}!set\-I\-P@{set\-I\-P}}
\index{set\-I\-P@{set\-I\-P}!DirectorInterface@{Director\-Interface}}
\subsubsection[{set\-I\-P}]{\setlength{\rightskip}{0pt plus 5cm}bool Director\-Interface\-::set\-I\-P (
\begin{DoxyParamCaption}
\item[{Q\-String}]{addr}
\end{DoxyParamCaption}
)}}\label{class_director_interface_ac461d58ad8cc8bd1e58d48420f48503b}


Not yet implemented in the director appliction. 

This function is supposed to change the ip address of the director. This is not yet supported by the director. When it is supported, it will return true on success and false on failure. currently true and false only indicate whether the message was sent. It doesn't actually do anything yet though. Trust me. 

Definition at line 81 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_ab5a2e5ae02989b19ed12c0d884aa45f6}{\index{Director\-Interface@{Director\-Interface}!set\-Name@{set\-Name}}
\index{set\-Name@{set\-Name}!DirectorInterface@{Director\-Interface}}
\subsubsection[{set\-Name}]{\setlength{\rightskip}{0pt plus 5cm}bool Director\-Interface\-::set\-Name (
\begin{DoxyParamCaption}
\item[{Q\-String}]{name}
\end{DoxyParamCaption}
)}}\label{class_director_interface_ab5a2e5ae02989b19ed12c0d884aa45f6}


Sets the name of the Pictobox to the \hyperlink{class_director}{Director} application. 

Returns true on successful set, false on failure. 

Definition at line 111 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_a67f9e1237b43292deb6d287f10d15bff}{\index{Director\-Interface@{Director\-Interface}!set\-Reward\-Duration@{set\-Reward\-Duration}}
\index{set\-Reward\-Duration@{set\-Reward\-Duration}!DirectorInterface@{Director\-Interface}}
\subsubsection[{set\-Reward\-Duration}]{\setlength{\rightskip}{0pt plus 5cm}bool Director\-Interface\-::set\-Reward\-Duration (
\begin{DoxyParamCaption}
\item[{int}]{reward\-Dur, }
\item[{int}]{controller}
\end{DoxyParamCaption}
)}}\label{class_director_interface_a67f9e1237b43292deb6d287f10d15bff}


Sets the reward duration of the for the input controller number to the input reward duration (in ms) 

Returns true on successful set, false on failure. 

Definition at line 169 of file Director\-Interface.\-cpp.

\hypertarget{class_director_interface_a82b07bf6375ff90d71663a0373a86765}{\index{Director\-Interface@{Director\-Interface}!start\-Reward@{start\-Reward}}
\index{start\-Reward@{start\-Reward}!DirectorInterface@{Director\-Interface}}
\subsubsection[{start\-Reward}]{\setlength{\rightskip}{0pt plus 5cm}bool Director\-Interface\-::start\-Reward (
\begin{DoxyParamCaption}
\item[{int}]{controller}
\end{DoxyParamCaption}
)}}\label{class_director_interface_a82b07bf6375ff90d71663a0373a86765}


Starts a reward on the input controller. 

This function sends a message to the director application to begin a reward according to the currently set reward duration on the input controller. Note that rewards can still occur even if the director is not running. In this case rewards are simply handled locally within this application. This is important in case the pictobox is being used with some third party application (ie. Legacy Orion software) and not the \hyperlink{namespace_picto}{Picto} \hyperlink{class_director}{Director}. This function returns false only if the input controller number or the currently set reward duration were invalid, otherwise it always successfully starts a reward whether or not the director application is reachable. \begin{DoxySeeAlso}{See Also}
update\-Local\-Rewards() 
\end{DoxySeeAlso}


Definition at line 323 of file Director\-Interface.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/embedded/frontpanel/\hyperlink{_director_interface_8h}{Director\-Interface.\-h}\item 
source/embedded/frontpanel/\hyperlink{_director_interface_8cpp}{Director\-Interface.\-cpp}\end{DoxyCompactItemize}
