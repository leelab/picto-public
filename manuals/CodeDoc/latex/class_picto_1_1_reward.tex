\hypertarget{class_picto_1_1_reward}{\section{Picto\-:\-:Reward Class Reference}
\label{class_picto_1_1_reward}\index{Picto\-::\-Reward@{Picto\-::\-Reward}}
}


A \hyperlink{class_picto_1_1_state_machine_element}{State\-Machine\-Element} that initiates reward feedback for the test subject.  




{\ttfamily \#include $<$Reward.\-h$>$}

Inheritance diagram for Picto\-:\-:Reward\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=9.000000cm]{class_picto_1_1_reward}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_picto_1_1_reward_acc1d1c8281f093340b42414957376654}{Reward} ()
\begin{DoxyCompactList}\small\item\em Constructs a new \hyperlink{class_picto_1_1_reward}{Reward} object. \end{DoxyCompactList}\item 
Q\-String \hyperlink{class_picto_1_1_reward_a2b250d60f1d51b31360f5a7c8f4c5eec}{run} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_engine_1_1_picto_engine}{Engine\-::\-Picto\-Engine} $>$ engine)
\begin{DoxyCompactList}\small\item\em Runs this \hyperlink{class_picto_1_1_reward}{Reward}'s execution logic within the framework of the input Picto\-Engine. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_a22c9f49f9f942011a175798753c9995f}{Q\-String \hyperlink{class_picto_1_1_reward_a22c9f49f9f942011a175798753c9995f}{slave\-Run} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_engine_1_1_picto_engine}{Engine\-::\-Picto\-Engine} $>$ engine)}\label{class_picto_1_1_reward_a22c9f49f9f942011a175798753c9995f}

\begin{DoxyCompactList}\small\item\em When a \hyperlink{class_picto_1_1_reward}{Reward} is run as a slave, it really doesn't do anything. The \hyperlink{class_picto_1_1_slave_experiment_driver}{Slave\-Experiment\-Driver} tells the Picto\-Engine when to trigger an audio reward based on the reward timing data in the session file. This function is therefore empty. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_ad90e7d9025dc24e1e39c1e0590c32509}{virtual Q\-String \hyperlink{class_picto_1_1_reward_ad90e7d9025dc24e1e39c1e0590c32509}{get\-U\-I\-Template} ()}\label{class_picto_1_1_reward_ad90e7d9025dc24e1e39c1e0590c32509}

\begin{DoxyCompactList}\small\item\em Returns the name of a user interface template that should be used to represent this element in a U\-I. \end{DoxyCompactList}\item 
virtual Q\-String \hyperlink{class_picto_1_1_reward_a6a96e2e9cf2ad16ed5553adb9a72ca3e}{friendly\-Type\-Name} ()
\begin{DoxyCompactList}\small\item\em Returns a friendly string identifying this type of \hyperlink{class_picto_1_1_asset}{Asset}. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_a8c83183b80c44e95fa86d9e4e52ccfca}{int \hyperlink{class_picto_1_1_reward_a8c83183b80c44e95fa86d9e4e52ccfca}{get\-Number} ()}\label{class_picto_1_1_reward_a8c83183b80c44e95fa86d9e4e52ccfca}

\begin{DoxyCompactList}\small\item\em Gets the number of rewards that will be provided when this \hyperlink{class_picto_1_1_reward}{Reward} is triggered. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_ae746594e8b9e8e5d7defc49afe1652c0}{void \hyperlink{class_picto_1_1_reward_ae746594e8b9e8e5d7defc49afe1652c0}{set\-Number} (int num)}\label{class_picto_1_1_reward_ae746594e8b9e8e5d7defc49afe1652c0}

\begin{DoxyCompactList}\small\item\em Sets the number of rewards that will be provided when this \hyperlink{class_picto_1_1_reward}{Reward} is triggered. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_a97d509e37a118eeed08899738ab21a04}{int \hyperlink{class_picto_1_1_reward_a97d509e37a118eeed08899738ab21a04}{get\-Unit\-Quantity} ()}\label{class_picto_1_1_reward_a97d509e37a118eeed08899738ab21a04}

\begin{DoxyCompactList}\small\item\em Gets the number of milliseconds for which each reward will be provided. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_adda7a1f24528a5ab1d054322ba0970f7}{void \hyperlink{class_picto_1_1_reward_adda7a1f24528a5ab1d054322ba0970f7}{set\-Unit\-Quantity} (int quant)}\label{class_picto_1_1_reward_adda7a1f24528a5ab1d054322ba0970f7}

\begin{DoxyCompactList}\small\item\em Sets the number of milliseconds for which each reward will be provided. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_a64598f6387d8ec06a440bde06cbc6903}{int \hyperlink{class_picto_1_1_reward_a64598f6387d8ec06a440bde06cbc6903}{get\-Min\-Reward\-Period} ()}\label{class_picto_1_1_reward_a64598f6387d8ec06a440bde06cbc6903}

\begin{DoxyCompactList}\small\item\em Gets the minimum number of milliseconds between rewards when multiple rewards are provided. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_a7d0807fc4c0d7e24910bcc7fd0d060f2}{void \hyperlink{class_picto_1_1_reward_a7d0807fc4c0d7e24910bcc7fd0d060f2}{set\-Min\-Reward\-Period} (int delay)}\label{class_picto_1_1_reward_a7d0807fc4c0d7e24910bcc7fd0d060f2}

\begin{DoxyCompactList}\small\item\em Sets the minimum number of milliseconds between rewards when multiple rewards are provided. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_picto_1_1_reward_a90319014a2d1e40e94d5432d0bc62934}{static Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_asset}{Asset} $>$ \hyperlink{class_picto_1_1_reward_a90319014a2d1e40e94d5432d0bc62934}{Create} ()}\label{class_picto_1_1_reward_a90319014a2d1e40e94d5432d0bc62934}

\begin{DoxyCompactList}\small\item\em Creates a new \hyperlink{class_picto_1_1_reward}{Reward} object and returns a shared \hyperlink{class_picto_1_1_asset}{Asset} pointer to it. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual void \hyperlink{class_picto_1_1_reward_a4c2d4714bba0e99537fa9438b7acc9c0}{post\-Deserialize} ()
\begin{DoxyCompactList}\small\item\em This function is called in \hyperlink{class_picto_1_1_asset_a8bed4da09ecb1c07ce0dab313a9aba67}{from\-Xml()} after successful deserialization and is used to initialize the \hyperlink{class_picto_1_1_asset}{Asset} based on values that were loaded in during deserialization. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_ad88c181f048c98bbc457f2c6b1b49ba3}{virtual bool \hyperlink{class_picto_1_1_reward_ad88c181f048c98bbc457f2c6b1b49ba3}{validate\-Object} (Q\-Shared\-Pointer$<$ Q\-Xml\-Stream\-Reader $>$ xml\-Stream\-Reader)}\label{class_picto_1_1_reward_ad88c181f048c98bbc457f2c6b1b49ba3}

\begin{DoxyCompactList}\small\item\em Extends \hyperlink{class_picto_1_1_state_machine_element_a52a176b16cf803ed3e7f82f3e1a4dfb7}{State\-Machine\-Element\-::validate\-Object()} to verify that \hyperlink{class_picto_1_1_property}{Property} values for this element are greater than zero. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Properties}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_picto_1_1_reward_aea0deede63935e3526664a8c2315e1c4}{int \hyperlink{class_picto_1_1_reward_aea0deede63935e3526664a8c2315e1c4}{number}}\label{class_picto_1_1_reward_aea0deede63935e3526664a8c2315e1c4}

\begin{DoxyCompactList}\small\item\em Gets/\-Sets the number of rewards that will be provided when this \hyperlink{class_picto_1_1_reward}{Reward} is triggered. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_afd848dc195436c0a85f8637b5ed1ae19}{int \hyperlink{class_picto_1_1_reward_afd848dc195436c0a85f8637b5ed1ae19}{unit\-Quantity}}\label{class_picto_1_1_reward_afd848dc195436c0a85f8637b5ed1ae19}

\begin{DoxyCompactList}\small\item\em Gets/\-Sets the number of milliseconds for which each reward will be provided. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_reward_ad06e280ebc6025df96111d994068c1e9}{int \hyperlink{class_picto_1_1_reward_ad06e280ebc6025df96111d994068c1e9}{min\-Reward\-Period}}\label{class_picto_1_1_reward_ad06e280ebc6025df96111d994068c1e9}

\begin{DoxyCompactList}\small\item\em Gets/\-Sets the minimum number of milliseconds between rewards when multiple rewards are provided. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
A \hyperlink{class_picto_1_1_state_machine_element}{State\-Machine\-Element} that initiates reward feedback for the test subject. 

The \hyperlink{class_picto_1_1_reward}{Reward} element provides a number of Properties to define the parameters of the reward that will be provided when it is reached. These include the number of rewards, their duration and the spacing between them. It is important to note, however, that no experimental time passes inside a \hyperlink{class_picto_1_1_reward}{Reward} element. When the element is reached it initiates the reward supply process, but control returns immediately and continues on to the next element. This means that the design needs to define what the test subject is seeing during the course of rewarding. If, for example, the \hyperlink{class_picto_1_1_reward}{Reward} element is set to provide 2 rewards of 100ms each with a minimum period of 300ms. As soon as control flow reaches the \hyperlink{class_picto_1_1_reward}{Reward} element, the Picto\-Engine will be set to start a reward at the onset of the following frame, that reward will end 100ms from the onset of that frame, another reward will be provided at the first frame onset following 300ms after the onset of that first frame and it will end 100ms after that. This whole process will take something like 400ms, so the design will need to include \hyperlink{class_picto_1_1_state}{State} elements that handle the display during the course of that reward process. This is useful for creating animations representing reward delivery like reward tokens that slowly disappear during the course of the reward supply. \begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}


Definition at line 32 of file Reward.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_picto_1_1_reward_acc1d1c8281f093340b42414957376654}{\index{Picto\-::\-Reward@{Picto\-::\-Reward}!Reward@{Reward}}
\index{Reward@{Reward}!Picto::Reward@{Picto\-::\-Reward}}
\subsubsection[{Reward}]{\setlength{\rightskip}{0pt plus 5cm}Picto\-::\-Reward\-::\-Reward (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_picto_1_1_reward_acc1d1c8281f093340b42414957376654}


Constructs a new \hyperlink{class_picto_1_1_reward}{Reward} object. 

Adds the following Properties\-:
\begin{DoxyItemize}
\item Num\-Rewards -\/ Editable at runtime\-: defines the number of rewards that will be provided each time control flow reaches this element.
\item Reward\-Qty -\/ Editable at runtime\-: The number of milliseconds for which reward will be provided for each provided reward.
\item Min\-Reward\-Period\-: The minimum number of milliseconds between the start of subsequent rewards.
\item Reward\-Chan\-: The reward channel on which the reward will be provided (Not currently visible since Pictoboxes currently only have one reward channel). 
\end{DoxyItemize}

Definition at line 16 of file Reward.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{class_picto_1_1_reward_a6a96e2e9cf2ad16ed5553adb9a72ca3e}{\index{Picto\-::\-Reward@{Picto\-::\-Reward}!friendly\-Type\-Name@{friendly\-Type\-Name}}
\index{friendly\-Type\-Name@{friendly\-Type\-Name}!Picto::Reward@{Picto\-::\-Reward}}
\subsubsection[{friendly\-Type\-Name}]{\setlength{\rightskip}{0pt plus 5cm}virtual Q\-String Picto\-::\-Reward\-::friendly\-Type\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_reward_a6a96e2e9cf2ad16ed5553adb9a72ca3e}


Returns a friendly string identifying this type of \hyperlink{class_picto_1_1_asset}{Asset}. 

This is a string that users will see, so check the spelling... we've had problems with that in the past (ie. \hyperlink{class_picto_1_1_target_controller}{Target\-Controller}, \char`\"{}\-Total Time Excceeded\char`\"{} result). 

Reimplemented from \hyperlink{class_picto_1_1_state_machine_element_a71bb8021124ed8ce64e498e767b69e1d}{Picto\-::\-State\-Machine\-Element}.



Definition at line 50 of file Reward.\-h.

\hypertarget{class_picto_1_1_reward_a4c2d4714bba0e99537fa9438b7acc9c0}{\index{Picto\-::\-Reward@{Picto\-::\-Reward}!post\-Deserialize@{post\-Deserialize}}
\index{post\-Deserialize@{post\-Deserialize}!Picto::Reward@{Picto\-::\-Reward}}
\subsubsection[{post\-Deserialize}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-Reward\-::post\-Deserialize (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_reward_a4c2d4714bba0e99537fa9438b7acc9c0}


This function is called in \hyperlink{class_picto_1_1_asset_a8bed4da09ecb1c07ce0dab313a9aba67}{from\-Xml()} after successful deserialization and is used to initialize the \hyperlink{class_picto_1_1_asset}{Asset} based on values that were loaded in during deserialization. 

In the case of the \hyperlink{class_picto_1_1_asset}{Asset} class, during post\-Deserialize we tell the \hyperlink{class_picto_1_1_design_config}{Design\-Config} that if we have reached the stage of loading where \hyperlink{class_picto_1_1_asset}{Asset} I\-Ds must be unique, it should make sure that our \hyperlink{class_picto_1_1_asset}{Asset} I\-D is different from all others in this design. \begin{DoxySeeAlso}{See Also}
\hyperlink{class_picto_1_1_design_config_ab57e0738b97e4358ab09530cd6815fc0}{Design\-Config\-::fix\-Duplicated\-Asset\-Ids()} 
\end{DoxySeeAlso}


Reimplemented from \hyperlink{class_picto_1_1_state_machine_element_ac71e3f57e16c8be8dc4d6900c836948f}{Picto\-::\-State\-Machine\-Element}.



Definition at line 72 of file Reward.\-cpp.

\hypertarget{class_picto_1_1_reward_a2b250d60f1d51b31360f5a7c8f4c5eec}{\index{Picto\-::\-Reward@{Picto\-::\-Reward}!run@{run}}
\index{run@{run}!Picto::Reward@{Picto\-::\-Reward}}
\subsubsection[{run}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Picto\-::\-Reward\-::run (
\begin{DoxyParamCaption}
\item[{Q\-Shared\-Pointer$<$ {\bf Engine\-::\-Picto\-Engine} $>$}]{engine}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_picto_1_1_reward_a2b250d60f1d51b31360f5a7c8f4c5eec}


Runs this \hyperlink{class_picto_1_1_reward}{Reward}'s execution logic within the framework of the input Picto\-Engine. 

This function handles running entry and exit scripts, and initializing reward delivery according to its \hyperlink{class_picto_1_1_property}{Property} values. No experimental time passes during this function since \hyperlink{namespace_picto}{Picto} provides Rewards asynchoronously. This is important to keep in mind in experimental designs. When a \hyperlink{class_picto_1_1_reward}{Reward} with Num\-Rewards of 1 and Reward\-Qty equal to 100 is triggered, for example, a reward will begin at the next first phosphore time and will continue for 100ms thereafter. This means that it is up to the Design to manage what is visible to the test subject while a reward is being provided. 

Implements \hyperlink{class_picto_1_1_state_machine_element_a7a1f1ca8905c111dd043178b9132c770}{Picto\-::\-State\-Machine\-Element}.



Definition at line 40 of file Reward.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/common/statemachine/Reward.\-h\item 
source/common/statemachine/Reward.\-cpp\end{DoxyCompactItemize}
