\hypertarget{class_test_viewer}{\section{Test\-Viewer Class Reference}
\label{class_test_viewer}\index{Test\-Viewer@{Test\-Viewer}}
}


This allows designers to run the Experiment/\-Analysis that they are creating in a test environment for debugging.  




{\ttfamily \#include $<$testviewer.\-h$>$}

Inheritance diagram for Test\-Viewer\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_test_viewer}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_test_viewer_a33fb46c0d10ef281c24697687f3b3ea3}{init} ()
\begin{DoxyCompactList}\small\item\em Called just before displaying the viewer. \end{DoxyCompactList}\item 
void \hyperlink{class_test_viewer_aa585afc2e81af645c57e31d2fe8e4d9f}{deinit} ()
\begin{DoxyCompactList}\small\item\em Called just before hiding the viewer. \end{DoxyCompactList}\item 
\hypertarget{class_test_viewer_a44961fb27651b9cfaa7b3fa147832ca8}{bool \hyperlink{class_test_viewer_a44961fb27651b9cfaa7b3fa147832ca8}{about\-To\-Quit} ()}\label{class_test_viewer_a44961fb27651b9cfaa7b3fa147832ca8}

\begin{DoxyCompactList}\small\item\em Called when the application is about to quit. In this case, it just calls \hyperlink{class_test_viewer_aa585afc2e81af645c57e31d2fe8e4d9f}{deinit()}. \end{DoxyCompactList}\item 
void \hyperlink{class_test_viewer_a8ff7fc29e9eb7473a8f6f2994ed7ea1d}{Load\-Prop\-Vals\-From\-File} ()
\begin{DoxyCompactList}\small\item\em Loads runtime Property init\-Values from a previous Session to replace those in the current Experiment. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_test_viewer_af9c4eff886be72f03fe5d987d3dce9e9}{{\bfseries Test\-Viewer} (Q\-Widget $\ast$parent=0)}\label{class_test_viewer_af9c4eff886be72f03fe5d987d3dce9e9}

\item 
\hypertarget{class_test_viewer_a7fa1946128acf8b691b6932bdf889524}{Q\-String \hyperlink{class_test_viewer_a7fa1946128acf8b691b6932bdf889524}{type} ()}\label{class_test_viewer_a7fa1946128acf8b691b6932bdf889524}

\begin{DoxyCompactList}\small\item\em Returns a string containing the type of this viewer (e.\-g \char`\"{}\-State Edit Viewer\char`\"{}). \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
This allows designers to run the Experiment/\-Analysis that they are creating in a test environment for debugging. 

This \hyperlink{class_viewer}{Viewer} runs the Experiment inside a widget, using a Pixmap rendering target, and a mouse input channel. Analyses can be run during the course of the Experiment and should provide the same results as they would in real experiments with a couple of exceptions\-:
\begin{DoxyItemize}
\item Analysis\-Data\-Source elements will not have access to future data (since it doesn't exist yet), depending on the type of future data request, the result will either be meaningless or empty.
\item Some Analysis\-Data\-Source data will be simulated. L\-F\-P data for example is fake since there is no \char`\"{}\-Test Neural System\char`\"{} attached.
\item Frame rates may be much faster than they would be in a real experiment. This is because the Pixmap\-Visual\-Target doesn't know how to wait for V\-Sync while rendering, so it just renders and continues on. This could cause the \hyperlink{class_test_viewer}{Test\-Viewer} to think that many frames have gone by even though there may only have been one.
\end{DoxyItemize}

The toolbar for the Test \hyperlink{class_viewer}{Viewer} includes start/pause/stop commands as well as a drop down for choosing the Task to run, another drop down to select the \char`\"{}viewer\char`\"{} as either a Test Subject or an Operator. There is also a \hyperlink{class_property_frame}{Property\-Frame} for changing Task Property Init\-Values during the run, an Analysis\-Selector\-Widget for choosing Analyses to run during the Test, and an \hyperlink{class_output_widget_holder}{Output\-Widget\-Holder} for presenting Analysis\-Output\-Widgets

This Test \hyperlink{class_viewer}{Viewer} also contains a simple debugger which allows the designer to check variable values and even run javascript in a command line at the bottom of the window. The debugger is the stock Qt debugger and is used to debug \hyperlink{namespace_picto}{Picto} scripts. It is set up in Scriptable\-Container\-::init\-Scripting(). The debugger stops Experiment execution and waits for the user to press its play button before continuing for one of two reasons.
\begin{DoxyItemize}
\item A runtime error occurs.
\item The keyword -\/ debugger -\/ appeared in a script. Since \hyperlink{namespace_picto}{Picto} currently creates one script engine for every Scriptable\-Container, a different debugger window appears for every runtime error that occurs in a separate Scriptable\-Container. This can get unwieldy quickly, and we should consider fixing this at some point.
\end{DoxyItemize}

\begin{DoxyNote}{Note}
Like in real Experimental Runs, pressing the pause button causes the Run to pause only when control flow reaches the next Pause\-Point element. Suggestions for future features\-:
\begin{DoxyItemize}
\item Add a step function for advancing frame by frame 
\end{DoxyItemize}
\end{DoxyNote}
\begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}


Definition at line 63 of file testviewer.\-h.



\subsection{Member Function Documentation}
\hypertarget{class_test_viewer_aa585afc2e81af645c57e31d2fe8e4d9f}{\index{Test\-Viewer@{Test\-Viewer}!deinit@{deinit}}
\index{deinit@{deinit}!TestViewer@{Test\-Viewer}}
\subsubsection[{deinit}]{\setlength{\rightskip}{0pt plus 5cm}void Test\-Viewer\-::deinit (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{class_test_viewer_aa585afc2e81af645c57e31d2fe8e4d9f}


Called just before hiding the viewer. 

This function stops the current Task Run and clears the \hyperlink{class_property_frame}{Property\-Frame}. It is important that it clears the \hyperlink{class_property_frame}{Property\-Frame} because otherwise an unexpected signal-\/$>$slot-\/$>$signal-\/$>$... path leading from Property value changes through the \hyperlink{class_property_frame}{Property\-Frame} back to a different part of the Property value would be active. This would lead to unexpected behavior in the State\-Machine\-Editor. We also handle stopping the Experiment in a kind of round about way. Due to the fact that we don't yet run Experiments from a Qt Event loop and we need to just process events internally now and then, if an Experiment is running, this function will have been called from some Q\-Core\-Application\-::process\-Events() call internal to the Experiment. In that case, calling stop() here will not actually stop the Experiment until somewhere way up the call stack. If we were to directly emit deinit\-Completed() here, we would be telling the next viewer that it can take the focus before this \hyperlink{class_viewer}{Viewer}'s Experiment actually stopped running. Instead, we connect the \hyperlink{class_test_playback_controller}{Test\-Playback\-Controller}'s stopped() signal to our stopped() slot which emits deinit\-Completed(). By doing things this way, we are sure that when the next \hyperlink{class_viewer}{Viewer} takes focus, this \hyperlink{class_viewer}{Viewer}'s test Run will actually be fully stopped and done. 

Definition at line 113 of file testviewer.\-cpp.

\hypertarget{class_test_viewer_a33fb46c0d10ef281c24697687f3b3ea3}{\index{Test\-Viewer@{Test\-Viewer}!init@{init}}
\index{init@{init}!TestViewer@{Test\-Viewer}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void Test\-Viewer\-::init (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{class_test_viewer_a33fb46c0d10ef281c24697687f3b3ea3}


Called just before displaying the viewer. 

This function prepares the Design\-Root and the various U\-I components for a test run. \begin{DoxyNote}{Note}
Sometimes while working on an experiment, if we change something and don't reopen the experiment we have found that the experimental run doesn't work right. To prevent this, we are simply reseting the Experiment from xml whenever this \hyperlink{class_viewer}{Viewer} is opened and init is called. At some point, we should probably go through and debug this issue. 
\end{DoxyNote}


Definition at line 46 of file testviewer.\-cpp.

\hypertarget{class_test_viewer_a8ff7fc29e9eb7473a8f6f2994ed7ea1d}{\index{Test\-Viewer@{Test\-Viewer}!Load\-Prop\-Vals\-From\-File@{Load\-Prop\-Vals\-From\-File}}
\index{Load\-Prop\-Vals\-From\-File@{Load\-Prop\-Vals\-From\-File}!TestViewer@{Test\-Viewer}}
\subsubsection[{Load\-Prop\-Vals\-From\-File}]{\setlength{\rightskip}{0pt plus 5cm}void Test\-Viewer\-::\-Load\-Prop\-Vals\-From\-File (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [slot]}}}\label{class_test_viewer_a8ff7fc29e9eb7473a8f6f2994ed7ea1d}


Loads runtime Property init\-Values from a previous Session to replace those in the current Experiment. 

\begin{DoxyWarning}{Warning}
We haven't tested this in a while and it may not be working. Regardless, it might be good to do this differently and allow operators to save current Property configurations and restore them later. 
\end{DoxyWarning}


Definition at line 298 of file testviewer.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/workstation/\-Test\-Viewer/testviewer.\-h\item 
source/workstation/\-Test\-Viewer/testviewer.\-cpp\end{DoxyCompactItemize}
