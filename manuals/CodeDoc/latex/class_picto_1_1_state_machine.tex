\hypertarget{class_picto_1_1_state_machine}{\section{Picto\-:\-:State\-Machine Class Reference}
\label{class_picto_1_1_state_machine}\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}}
}


A container for a \hyperlink{class_picto_1_1_state}{State} Machine defined by \hyperlink{class_picto_1_1_state_machine_element}{State\-Machine\-Element} objects connected by Transitions.  




{\ttfamily \#include $<$State\-Machine.\-h$>$}

Inheritance diagram for Picto\-:\-:State\-Machine\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=6.484210cm]{class_picto_1_1_state_machine}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_picto_1_1_state_machine_abdc01cf5d156f7611381db0e06e48ad9}{State\-Machine} ()
\begin{DoxyCompactList}\small\item\em Constructs a new \hyperlink{class_picto_1_1_state_machine}{State\-Machine}. \end{DoxyCompactList}\item 
Q\-String \hyperlink{class_picto_1_1_state_machine_ae627a569715e852af85cff71d5e64e1e}{run} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_engine_1_1_picto_engine}{Engine\-::\-Picto\-Engine} $>$ engine)
\begin{DoxyCompactList}\small\item\em Redirects directly to run\-Private(). See that function for more details. \end{DoxyCompactList}\item 
virtual Q\-String \hyperlink{class_picto_1_1_state_machine_a6af8e4f88e7ea89a85e415e5c2a117fb}{slave\-Run} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_engine_1_1_picto_engine}{Engine\-::\-Picto\-Engine} $>$ engine)
\begin{DoxyCompactList}\small\item\em When a \hyperlink{class_picto_1_1_state_machine}{State\-Machine} is run as a slave, it really doesn't do anything since the \hyperlink{class_picto_1_1_slave_experiment_driver}{Slave\-Experiment\-Driver} handles changing of \hyperlink{class_picto_1_1_property}{Property} values and transitioning control flow based on what happened in the Master experiment. This function therefore does nothing except make sure that scripting is initialized. \end{DoxyCompactList}\item 
void \hyperlink{class_picto_1_1_state_machine_a677501d0b881f617e9e8b7f87afcc908}{set\-Path} (Q\-String\-List path)
\begin{DoxyCompactList}\small\item\em Sets the stored path to this \hyperlink{class_picto_1_1_state_machine}{State\-Machine}. \end{DoxyCompactList}\item 
bool \hyperlink{class_picto_1_1_state_machine_a350b2df2e138a726c349eb3286928dbe}{jump\-To\-State} (Q\-String\-List path, Q\-String state)
\begin{DoxyCompactList}\small\item\em This function appears to no longer be used (ie. The functions that call it are never called themselves). \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_state_machine_a8f913876907151154a0f69c2dce3fa4f}{virtual Q\-String \hyperlink{class_picto_1_1_state_machine_a8f913876907151154a0f69c2dce3fa4f}{get\-U\-I\-Template} ()}\label{class_picto_1_1_state_machine_a8f913876907151154a0f69c2dce3fa4f}

\begin{DoxyCompactList}\small\item\em Returns the name of a user interface template that should be used to represent this element in a U\-I. \end{DoxyCompactList}\item 
virtual Q\-String \hyperlink{class_picto_1_1_state_machine_aaa9075f394c70230044f2051c6d04c38}{friendly\-Type\-Name} ()
\begin{DoxyCompactList}\small\item\em Returns a friendly string identifying this type of \hyperlink{class_picto_1_1_asset}{Asset}. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_picto_1_1_state_machine_ab59beba932c283fa8dcb2c0f355542a7}{upgrade\-Version} (Q\-String deserialized\-Version)
\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_picto_1_1_state_machine_ac4b350f7cfca149e77e8b608f454a6ac}{static Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_asset}{Asset} $>$ \hyperlink{class_picto_1_1_state_machine_ac4b350f7cfca149e77e8b608f454a6ac}{Create} ()}\label{class_picto_1_1_state_machine_ac4b350f7cfca149e77e8b608f454a6ac}

\begin{DoxyCompactList}\small\item\em Creates a new \hyperlink{class_picto_1_1_state_machine}{State\-Machine} object and returns a shared \hyperlink{class_picto_1_1_asset}{Asset} pointer to it. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual Q\-String \hyperlink{class_picto_1_1_state_machine_a97b7fe78eab6d54c1e8c3d6a932fc73e}{default\-Tag\-Name} ()
\begin{DoxyCompactList}\small\item\em Returns the name of this \hyperlink{class_picto_1_1_data_store}{Data\-Store}'s default X\-M\-L tag. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_picto_1_1_state_machine_a3b28ab6e5310ea16c2dbb19d6e071f80}{post\-Deserialize} ()
\begin{DoxyCompactList}\small\item\em This function is called in \hyperlink{class_picto_1_1_asset_a8bed4da09ecb1c07ce0dab313a9aba67}{from\-Xml()} after successful deserialization and is used to initialize the \hyperlink{class_picto_1_1_asset}{Asset} based on values that were loaded in during deserialization. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_state_machine_a0f52f44365e6b7ba4e5c4ff92e092208}{virtual bool \hyperlink{class_picto_1_1_state_machine_a0f52f44365e6b7ba4e5c4ff92e092208}{validate\-Object} (Q\-Shared\-Pointer$<$ Q\-Xml\-Stream\-Reader $>$ xml\-Stream\-Reader)}\label{class_picto_1_1_state_machine_a0f52f44365e6b7ba4e5c4ff92e092208}

\begin{DoxyCompactList}\small\item\em Extends \hyperlink{class_picto_1_1_output_element_container_a19905a70272fa330d195ed51bfca1a16}{Output\-Element\-Container\-::validate\-Object()} to add checking for valid \hyperlink{class_picto_1_1_transition}{Transition} definitions, checking that all child element's results are connected to a transition, and checking to make sure no two elements have the same name. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_state_machine_a7555b512672af5a860678825d8b03ec3}{virtual bool \hyperlink{class_picto_1_1_state_machine_a7555b512672af5a860678825d8b03ec3}{can\-Have\-Scripts} ()}\label{class_picto_1_1_state_machine_a7555b512672af5a860678825d8b03ec3}

\begin{DoxyCompactList}\small\item\em Returns true if this \hyperlink{class_picto_1_1_scriptable_container}{Scriptable\-Container} can potentially include scripts that would need access to the scripting engine. \end{DoxyCompactList}\item 
virtual bool \hyperlink{class_picto_1_1_state_machine_adc8ccc0e0a7c8ab66fb33485b1a3cc30}{has\-Scripts} ()
\begin{DoxyCompactList}\small\item\em Returns true if this \hyperlink{class_picto_1_1_scriptable_container}{Scriptable\-Container} has scripts that need access to the scripting engine. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
A container for a \hyperlink{class_picto_1_1_state}{State} Machine defined by \hyperlink{class_picto_1_1_state_machine_element}{State\-Machine\-Element} objects connected by Transitions. 

A \hyperlink{class_picto_1_1_state_machine}{State\-Machine} contains multiple State\-Machine\-Elements and the Transitions between them. It is also a \hyperlink{class_picto_1_1_state_machine_element}{State\-Machine\-Element}, itself such that it can be contained by other State\-Machines. This class manages traversal of the \hyperlink{class_picto_1_1_state_machine}{State\-Machine} inside its \hyperlink{class_picto_1_1_state_machine_ae627a569715e852af85cff71d5e64e1e}{run()} function. Essentially, all Logic for a \hyperlink{class_picto_1_1_task}{Task} is contained inside its \hyperlink{class_picto_1_1_state_machine}{State\-Machine}, so this is one of the more important classes in the \hyperlink{namespace_picto}{Picto} framework. \begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}


Definition at line 35 of file State\-Machine.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_picto_1_1_state_machine_abdc01cf5d156f7611381db0e06e48ad9}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!State\-Machine@{State\-Machine}}
\index{State\-Machine@{State\-Machine}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{State\-Machine}]{\setlength{\rightskip}{0pt plus 5cm}Picto\-::\-State\-Machine\-::\-State\-Machine (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_picto_1_1_state_machine_abdc01cf5d156f7611381db0e06e48ad9}


Constructs a new \hyperlink{class_picto_1_1_state_machine}{State\-Machine}. 

Adds \hyperlink{class_picto_1_1_asset_factory}{Asset\-Factory} objects for all of the \hyperlink{class_picto_1_1_state_machine_element}{State\-Machine\-Element} children that a \hyperlink{class_picto_1_1_state_machine}{State\-Machine} is allowed to have. 

Definition at line 30 of file State\-Machine.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{class_picto_1_1_state_machine_a97b7fe78eab6d54c1e8c3d6a932fc73e}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!default\-Tag\-Name@{default\-Tag\-Name}}
\index{default\-Tag\-Name@{default\-Tag\-Name}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{default\-Tag\-Name}]{\setlength{\rightskip}{0pt plus 5cm}virtual Q\-String Picto\-::\-State\-Machine\-::default\-Tag\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_state_machine_a97b7fe78eab6d54c1e8c3d6a932fc73e}


Returns the name of this \hyperlink{class_picto_1_1_data_store}{Data\-Store}'s default X\-M\-L tag. 

\begin{DoxyNote}{Note}
The one who determines a child's tag name is its parent however, since it is its parent that needs to understand which X\-M\-L tags need to be deserialized in which types of \hyperlink{class_picto_1_1_asset}{Asset} object. See the Output\-Element\-Container\-::\-Output\-Element\-Container() constructor for an example of this. 
\end{DoxyNote}


Reimplemented from \hyperlink{class_picto_1_1_state_machine_element_afcfbbc6a685a8df36e44ba713eedc811}{Picto\-::\-State\-Machine\-Element}.



Definition at line 61 of file State\-Machine.\-h.

\hypertarget{class_picto_1_1_state_machine_aaa9075f394c70230044f2051c6d04c38}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!friendly\-Type\-Name@{friendly\-Type\-Name}}
\index{friendly\-Type\-Name@{friendly\-Type\-Name}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{friendly\-Type\-Name}]{\setlength{\rightskip}{0pt plus 5cm}virtual Q\-String Picto\-::\-State\-Machine\-::friendly\-Type\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_state_machine_aaa9075f394c70230044f2051c6d04c38}


Returns a friendly string identifying this type of \hyperlink{class_picto_1_1_asset}{Asset}. 

This is a string that users will see, so check the spelling... we've had problems with that in the past (ie. \hyperlink{class_picto_1_1_target_controller}{Target\-Controller}, \char`\"{}\-Total Time Excceeded\char`\"{} result). 

Reimplemented from \hyperlink{class_picto_1_1_output_element_container_aeb790e110381366623cda30e484eba89}{Picto\-::\-Output\-Element\-Container}.



Definition at line 56 of file State\-Machine.\-h.

\hypertarget{class_picto_1_1_state_machine_adc8ccc0e0a7c8ab66fb33485b1a3cc30}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!has\-Scripts@{has\-Scripts}}
\index{has\-Scripts@{has\-Scripts}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{has\-Scripts}]{\setlength{\rightskip}{0pt plus 5cm}bool Picto\-::\-State\-Machine\-::has\-Scripts (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_state_machine_adc8ccc0e0a7c8ab66fb33485b1a3cc30}


Returns true if this \hyperlink{class_picto_1_1_scriptable_container}{Scriptable\-Container} has scripts that need access to the scripting engine. 

\begin{DoxyNote}{Note}
If this function returns true, \hyperlink{class_picto_1_1_state_machine_a7555b512672af5a860678825d8b03ec3}{can\-Have\-Scripts()} should also return true. 
\end{DoxyNote}


Reimplemented from \hyperlink{class_picto_1_1_state_machine_element_ab93cc37be3b570575b812e13ec4f806a}{Picto\-::\-State\-Machine\-Element}.



Definition at line 432 of file State\-Machine.\-cpp.

\hypertarget{class_picto_1_1_state_machine_a350b2df2e138a726c349eb3286928dbe}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!jump\-To\-State@{jump\-To\-State}}
\index{jump\-To\-State@{jump\-To\-State}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{jump\-To\-State}]{\setlength{\rightskip}{0pt plus 5cm}bool Picto\-::\-State\-Machine\-::jump\-To\-State (
\begin{DoxyParamCaption}
\item[{Q\-String\-List}]{path, }
\item[{Q\-String}]{state}
\end{DoxyParamCaption}
)}}\label{class_picto_1_1_state_machine_a350b2df2e138a726c349eb3286928dbe}


This function appears to no longer be used (ie. The functions that call it are never called themselves). 

The function was once used when attaching to a remote \hyperlink{class_picto_1_1_experiment}{Experiment} that was already running in order to jump to the currently running part of the \hyperlink{class_picto_1_1_state_machine}{State\-Machine}. Since then, we have created the \hyperlink{class_picto_1_1_state_updater}{State\-Updater}, \hyperlink{class_picto_1_1_slave_experiment_driver}{Slave\-Experiment\-Driver} system that allows us to run \char`\"{}\-Slave\char`\"{} Experiments from within the Qt event loop based on information coming from the Master, and not only from within the blocking run\-Task() function.

This function should probably be removed. 

Definition at line 80 of file State\-Machine.\-cpp.

\hypertarget{class_picto_1_1_state_machine_a3b28ab6e5310ea16c2dbb19d6e071f80}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!post\-Deserialize@{post\-Deserialize}}
\index{post\-Deserialize@{post\-Deserialize}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{post\-Deserialize}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-State\-Machine\-::post\-Deserialize (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_state_machine_a3b28ab6e5310ea16c2dbb19d6e071f80}


This function is called in \hyperlink{class_picto_1_1_asset_a8bed4da09ecb1c07ce0dab313a9aba67}{from\-Xml()} after successful deserialization and is used to initialize the \hyperlink{class_picto_1_1_asset}{Asset} based on values that were loaded in during deserialization. 

In the case of the \hyperlink{class_picto_1_1_asset}{Asset} class, during post\-Deserialize we tell the \hyperlink{class_picto_1_1_design_config}{Design\-Config} that if we have reached the stage of loading where \hyperlink{class_picto_1_1_asset}{Asset} I\-Ds must be unique, it should make sure that our \hyperlink{class_picto_1_1_asset}{Asset} I\-D is different from all others in this design. \begin{DoxySeeAlso}{See Also}
\hyperlink{class_picto_1_1_design_config_ab57e0738b97e4358ab09530cd6815fc0}{Design\-Config\-::fix\-Duplicated\-Asset\-Ids()} 
\end{DoxySeeAlso}


Reimplemented from \hyperlink{class_picto_1_1_machine_container_a36591811c50d2086866100c246d751d0}{Picto\-::\-Machine\-Container}.



Definition at line 409 of file State\-Machine.\-cpp.

\hypertarget{class_picto_1_1_state_machine_ae627a569715e852af85cff71d5e64e1e}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!run@{run}}
\index{run@{run}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{run}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Picto\-::\-State\-Machine\-::run (
\begin{DoxyParamCaption}
\item[{Q\-Shared\-Pointer$<$ {\bf Engine\-::\-Picto\-Engine} $>$}]{engine}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_picto_1_1_state_machine_ae627a569715e852af85cff71d5e64e1e}


Redirects directly to run\-Private(). See that function for more details. 

This indiretion is here for historical reasons and can probably be removed. run\-Private() should probably be removed with its code copied into this function. 

Implements \hyperlink{class_picto_1_1_state_machine_element_a7a1f1ca8905c111dd043178b9132c770}{Picto\-::\-State\-Machine\-Element}.



Definition at line 333 of file State\-Machine.\-cpp.

\hypertarget{class_picto_1_1_state_machine_a677501d0b881f617e9e8b7f87afcc908}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!set\-Path@{set\-Path}}
\index{set\-Path@{set\-Path}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{set\-Path}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-State\-Machine\-::set\-Path (
\begin{DoxyParamCaption}
\item[{Q\-String\-List}]{path}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{class_picto_1_1_state_machine_a677501d0b881f617e9e8b7f87afcc908}


Sets the stored path to this \hyperlink{class_picto_1_1_state_machine}{State\-Machine}. 

\begin{DoxyNote}{Note}
This function has been here a long time, but since then we have added methods for automatically retrieving an \hyperlink{class_picto_1_1_asset}{Asset}'s Path (\hyperlink{class_picto_1_1_asset_a310a0e5ffab1adff37039f27b998684a}{Asset\-::get\-Path()}), so it is probably redundant and removable. 
\end{DoxyNote}


Definition at line 52 of file State\-Machine.\-h.

\hypertarget{class_picto_1_1_state_machine_a6af8e4f88e7ea89a85e415e5c2a117fb}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!slave\-Run@{slave\-Run}}
\index{slave\-Run@{slave\-Run}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{slave\-Run}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Picto\-::\-State\-Machine\-::slave\-Run (
\begin{DoxyParamCaption}
\item[{Q\-Shared\-Pointer$<$ {\bf Engine\-::\-Picto\-Engine} $>$}]{engine}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_picto_1_1_state_machine_a6af8e4f88e7ea89a85e415e5c2a117fb}


When a \hyperlink{class_picto_1_1_state_machine}{State\-Machine} is run as a slave, it really doesn't do anything since the \hyperlink{class_picto_1_1_slave_experiment_driver}{Slave\-Experiment\-Driver} handles changing of \hyperlink{class_picto_1_1_property}{Property} values and transitioning control flow based on what happened in the Master experiment. This function therefore does nothing except make sure that scripting is initialized. 

Make some sort of intelligent error reporting... 

Implements \hyperlink{class_picto_1_1_state_machine_element_a0dbfefa77a60c323a285626bf6057c2b}{Picto\-::\-State\-Machine\-Element}.



Definition at line 342 of file State\-Machine.\-cpp.

\hypertarget{class_picto_1_1_state_machine_ab59beba932c283fa8dcb2c0f355542a7}{\index{Picto\-::\-State\-Machine@{Picto\-::\-State\-Machine}!upgrade\-Version@{upgrade\-Version}}
\index{upgrade\-Version@{upgrade\-Version}!Picto::StateMachine@{Picto\-::\-State\-Machine}}
\subsubsection[{upgrade\-Version}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-State\-Machine\-::upgrade\-Version (
\begin{DoxyParamCaption}
\item[{Q\-String}]{deserialized\-Version}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_picto_1_1_state_machine_ab59beba932c283fa8dcb2c0f355542a7}
Before Design syntax version 0.\-0.\-1, all U\-I position data was stored in \hyperlink{class_picto_1_1_u_i_info}{U\-I\-Info} objects that were sub-\/elements of \hyperlink{class_picto_1_1_u_i_enabled}{U\-I\-Enabled} objects. At version 0.\-0.\-1, we moved U\-I data out of the Experimental design into a separate U\-I\-Elements of a \hyperlink{class_picto_1_1_u_i_data}{U\-I\-Data} design. 

Reimplemented from \hyperlink{class_picto_1_1_u_i_enabled_a12c0d0357c85854db9220c72c4941b15}{Picto\-::\-U\-I\-Enabled}.



Definition at line 120 of file State\-Machine.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/common/statemachine/State\-Machine.\-h\item 
source/common/statemachine/State\-Machine.\-cpp\end{DoxyCompactItemize}
