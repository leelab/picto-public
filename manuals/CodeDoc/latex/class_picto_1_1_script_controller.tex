\hypertarget{class_picto_1_1_script_controller}{\section{Picto\-:\-:Script\-Controller Class Reference}
\label{class_picto_1_1_script_controller}\index{Picto\-::\-Script\-Controller@{Picto\-::\-Script\-Controller}}
}


A general \hyperlink{class_picto_1_1_control_element}{Control\-Element} with user definable logic and results.  




{\ttfamily \#include $<$Script\-Controller.\-h$>$}

Inheritance diagram for Picto\-:\-:Script\-Controller\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=9.000000cm]{class_picto_1_1_script_controller}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_picto_1_1_script_controller_a2e338d3c263bc259c69812b5c7b8cb10}{bool \hyperlink{class_picto_1_1_script_controller_a2e338d3c263bc259c69812b5c7b8cb10}{is\-Done} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_engine_1_1_picto_engine}{Engine\-::\-Picto\-Engine} $>$ engine)}\label{class_picto_1_1_script_controller_a2e338d3c263bc259c69812b5c7b8cb10}

\begin{DoxyCompactList}\small\item\em is\-Done will return true if the \hyperlink{class_picto_1_1_control_element}{Control\-Element}'s logic determines that some condition has been met. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_script_controller_ac32cbda0f2990423567bc53b69516b4f}{Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_result}{Result} $>$ \hyperlink{class_picto_1_1_script_controller_ac32cbda0f2990423567bc53b69516b4f}{get\-Result} ()}\label{class_picto_1_1_script_controller_ac32cbda0f2990423567bc53b69516b4f}

\begin{DoxyCompactList}\small\item\em Returns the latest result after a \hyperlink{class_picto_1_1_control_element}{Control\-Element} \hyperlink{class_picto_1_1_script_controller_a2e338d3c263bc259c69812b5c7b8cb10}{is\-Done()}. If the \hyperlink{class_picto_1_1_control_element}{Control\-Element} is not done, this returns an empty result pointer. \end{DoxyCompactList}\item 
void \hyperlink{class_picto_1_1_script_controller_a38429c7fc5689ad63bb43b6590e47365}{start} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_engine_1_1_picto_engine}{Engine\-::\-Picto\-Engine} $>$ engine)
\begin{DoxyCompactList}\small\item\em Initializes the \hyperlink{class_picto_1_1_control_element}{Control\-Element}. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_picto_1_1_script_controller_a78d4532ff6719d9252f1b993636b19b9}{upgrade\-Version} (Q\-String deserialized\-Version)
\item 
\hypertarget{class_picto_1_1_script_controller_a58c7da4ad9cec9e457eb7d42c66c875f}{virtual Q\-String \hyperlink{class_picto_1_1_script_controller_a58c7da4ad9cec9e457eb7d42c66c875f}{get\-U\-I\-Template} ()}\label{class_picto_1_1_script_controller_a58c7da4ad9cec9e457eb7d42c66c875f}

\begin{DoxyCompactList}\small\item\em Returns the name of a user interface template that should be used to represent this element in a U\-I. \end{DoxyCompactList}\item 
virtual Q\-String \hyperlink{class_picto_1_1_script_controller_a2620db63182fd3554e7dc61d8d0e6408}{friendly\-Type\-Name} ()
\begin{DoxyCompactList}\small\item\em Returns a friendly string identifying this type of \hyperlink{class_picto_1_1_asset}{Asset}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_picto_1_1_script_controller_a414dce33b6f23110fa4ddc6513bea76f}{static \hyperlink{class_picto_1_1_control_element}{Control\-Element} $\ast$ \hyperlink{class_picto_1_1_script_controller_a414dce33b6f23110fa4ddc6513bea76f}{New\-Script\-Controller} ()}\label{class_picto_1_1_script_controller_a414dce33b6f23110fa4ddc6513bea76f}

\begin{DoxyCompactList}\small\item\em Creates and returns a pointer to a new \hyperlink{class_picto_1_1_script_controller}{Script\-Controller} object. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_script_controller_a3ec58a0badc64a11946f48f0a0f681c7}{static Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_asset}{Asset} $>$ \hyperlink{class_picto_1_1_script_controller_a3ec58a0badc64a11946f48f0a0f681c7}{Create} ()}\label{class_picto_1_1_script_controller_a3ec58a0badc64a11946f48f0a0f681c7}

\begin{DoxyCompactList}\small\item\em Creates and returns a shared pointer to a new \hyperlink{class_picto_1_1_script_controller}{Script\-Controller} object. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_script_controller_acf70b851a58d594b800789f2ac1baa2a}{static Q\-String \hyperlink{class_picto_1_1_script_controller_acf70b851a58d594b800789f2ac1baa2a}{Controller\-Type} ()}\label{class_picto_1_1_script_controller_acf70b851a58d594b800789f2ac1baa2a}

\begin{DoxyCompactList}\small\item\em Returns the name of this type of \hyperlink{class_picto_1_1_control_element}{Control\-Element}. Namely, \char`\"{}\-Script Controller\char`\"{}. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
virtual Q\-String \hyperlink{class_picto_1_1_script_controller_aa4cc92c24d03887890452e350cf5aac4}{get\-Return\-Value\-Error} (Q\-String script\-Name, const Q\-Script\-Value \&return\-Value)
\begin{DoxyCompactList}\small\item\em This function returns an error string if the input return\-Value is invalid or there was some other problem with the latest script that was run. \end{DoxyCompactList}\item 
virtual void \hyperlink{class_picto_1_1_script_controller_a8f67155393f4a6ee394120b5008befab}{post\-Deserialize} ()
\begin{DoxyCompactList}\small\item\em This function is called in \hyperlink{class_picto_1_1_asset_a8bed4da09ecb1c07ce0dab313a9aba67}{from\-Xml()} after successful deserialization and is used to initialize the \hyperlink{class_picto_1_1_asset}{Asset} based on values that were loaded in during deserialization. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_script_controller_a98107f46374aa1980fcba656d2f5fb97}{virtual bool \hyperlink{class_picto_1_1_script_controller_a98107f46374aa1980fcba656d2f5fb97}{validate\-Object} (Q\-Shared\-Pointer$<$ Q\-Xml\-Stream\-Reader $>$ xml\-Stream\-Reader)}\label{class_picto_1_1_script_controller_a98107f46374aa1980fcba656d2f5fb97}

\begin{DoxyCompactList}\small\item\em Extends \hyperlink{class_picto_1_1_scriptable_ab6e2944c43a3b5d418bf7b251594386d}{Scriptable\-::validate\-Object()} to check the syntax of this object's scripts and add a compilation error if any problems are found. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_script_controller_a553be0d62a7f4214dd74e2b56ccc966f}{virtual bool \hyperlink{class_picto_1_1_script_controller_a553be0d62a7f4214dd74e2b56ccc966f}{can\-Have\-Scripts} ()}\label{class_picto_1_1_script_controller_a553be0d62a7f4214dd74e2b56ccc966f}

\begin{DoxyCompactList}\small\item\em Returns true if this \hyperlink{class_picto_1_1_scriptable_container}{Scriptable\-Container} can potentially include scripts that would need access to the scripting engine. \end{DoxyCompactList}\item 
virtual bool \hyperlink{class_picto_1_1_script_controller_af2c140e4c6f20c01bfcff27459ad624b}{has\-Scripts} ()
\begin{DoxyCompactList}\small\item\em Returns true if this \hyperlink{class_picto_1_1_scriptable_container}{Scriptable\-Container} has scripts that need access to the scripting engine. \end{DoxyCompactList}\item 
virtual Q\-Map$<$ Q\-String, Q\-String $>$ \hyperlink{class_picto_1_1_script_controller_a96c4021832e13bb6ab7727ac3646af92}{get\-Scripts} ()
\begin{DoxyCompactList}\small\item\em Returns a lookup table containing the names of Properties containing scripts indexed by the name by which those scripts will be accessible. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
A general \hyperlink{class_picto_1_1_control_element}{Control\-Element} with user definable logic and results. 

A \hyperlink{class_picto_1_1_script_controller}{Script\-Controller} is a broad use controller in which the designer can create their own logical checks for whether to continue in a state or exit from it. Like in a \hyperlink{class_picto_1_1_switch_element}{Switch\-Element}, you can add multiple \hyperlink{class_picto_1_1_logic_result}{Logic\-Result} elements to a \hyperlink{class_picto_1_1_script_controller}{Script\-Controller} and trigger them by returning a string that is equal to one of the results's names. In order to continue in the \hyperlink{class_picto_1_1_state}{State} without exiting, simply return any value that is not equal to a result name or nothing at all. \begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}


Definition at line 23 of file Script\-Controller.\-h.



\subsection{Member Function Documentation}
\hypertarget{class_picto_1_1_script_controller_a2620db63182fd3554e7dc61d8d0e6408}{\index{Picto\-::\-Script\-Controller@{Picto\-::\-Script\-Controller}!friendly\-Type\-Name@{friendly\-Type\-Name}}
\index{friendly\-Type\-Name@{friendly\-Type\-Name}!Picto::ScriptController@{Picto\-::\-Script\-Controller}}
\subsubsection[{friendly\-Type\-Name}]{\setlength{\rightskip}{0pt plus 5cm}virtual Q\-String Picto\-::\-Script\-Controller\-::friendly\-Type\-Name (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_script_controller_a2620db63182fd3554e7dc61d8d0e6408}


Returns a friendly string identifying this type of \hyperlink{class_picto_1_1_asset}{Asset}. 

This is a string that users will see, so check the spelling... we've had problems with that in the past (ie. \hyperlink{class_picto_1_1_target_controller}{Target\-Controller}, \char`\"{}\-Total Time Excceeded\char`\"{} result). 

Reimplemented from \hyperlink{class_picto_1_1_control_element_ad9a828f49943e34a15a69138c64ac4da}{Picto\-::\-Control\-Element}.



Definition at line 41 of file Script\-Controller.\-h.

\hypertarget{class_picto_1_1_script_controller_aa4cc92c24d03887890452e350cf5aac4}{\index{Picto\-::\-Script\-Controller@{Picto\-::\-Script\-Controller}!get\-Return\-Value\-Error@{get\-Return\-Value\-Error}}
\index{get\-Return\-Value\-Error@{get\-Return\-Value\-Error}!Picto::ScriptController@{Picto\-::\-Script\-Controller}}
\subsubsection[{get\-Return\-Value\-Error}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Picto\-::\-Script\-Controller\-::get\-Return\-Value\-Error (
\begin{DoxyParamCaption}
\item[{Q\-String}]{script\-Name, }
\item[{const Q\-Script\-Value \&}]{return\-Value}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_script_controller_aa4cc92c24d03887890452e350cf5aac4}


This function returns an error string if the input return\-Value is invalid or there was some other problem with the latest script that was run. 

The Q\-String scipt\-Name entry is the name of the script that was just run as returned by \hyperlink{class_picto_1_1_script_controller_a96c4021832e13bb6ab7727ac3646af92}{get\-Scripts()}. This function is called by check\-Script\-Results() which will trigger a runtime error with the returned string as an error message if the returned string is not empty. \begin{DoxySeeAlso}{See Also}
check\-Script\-Results(), \hyperlink{class_picto_1_1_scriptable_container_ab3d900d7a5403b8795b0edb54e50a750}{init\-Scripting()} 
\end{DoxySeeAlso}


Reimplemented from \hyperlink{class_picto_1_1_scriptable_container_a1e0264aee7ce551d450dc07a6b369d56}{Picto\-::\-Scriptable\-Container}.



Definition at line 107 of file Script\-Controller.\-cpp.

\hypertarget{class_picto_1_1_script_controller_a96c4021832e13bb6ab7727ac3646af92}{\index{Picto\-::\-Script\-Controller@{Picto\-::\-Script\-Controller}!get\-Scripts@{get\-Scripts}}
\index{get\-Scripts@{get\-Scripts}!Picto::ScriptController@{Picto\-::\-Script\-Controller}}
\subsubsection[{get\-Scripts}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Map$<$ Q\-String, Q\-String $>$ Picto\-::\-Script\-Controller\-::get\-Scripts (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_script_controller_a96c4021832e13bb6ab7727ac3646af92}


Returns a lookup table containing the names of Properties containing scripts indexed by the name by which those scripts will be accessible. 

\begin{DoxyNote}{Note}
There is some history here. Originally, these scripts were stored as part of the scripting engine, and so their names had to be unique. Now they are stored in a table of Q\-Script\-Program objects and so there is probably not any real need for their \char`\"{}script names\char`\"{} to be different from the \char`\"{}\-Property names\char`\"{} of the Properties containing the script text. We should probably change this at some point. 
\end{DoxyNote}


Reimplemented from \hyperlink{class_picto_1_1_scriptable_container_a6476dc86309bfa82d6b02b04e7dba4cf}{Picto\-::\-Scriptable\-Container}.



Definition at line 144 of file Script\-Controller.\-cpp.

\hypertarget{class_picto_1_1_script_controller_af2c140e4c6f20c01bfcff27459ad624b}{\index{Picto\-::\-Script\-Controller@{Picto\-::\-Script\-Controller}!has\-Scripts@{has\-Scripts}}
\index{has\-Scripts@{has\-Scripts}!Picto::ScriptController@{Picto\-::\-Script\-Controller}}
\subsubsection[{has\-Scripts}]{\setlength{\rightskip}{0pt plus 5cm}bool Picto\-::\-Script\-Controller\-::has\-Scripts (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_script_controller_af2c140e4c6f20c01bfcff27459ad624b}


Returns true if this \hyperlink{class_picto_1_1_scriptable_container}{Scriptable\-Container} has scripts that need access to the scripting engine. 

\begin{DoxyNote}{Note}
If this function returns true, \hyperlink{class_picto_1_1_script_controller_a553be0d62a7f4214dd74e2b56ccc966f}{can\-Have\-Scripts()} should also return true. 
\end{DoxyNote}


Reimplemented from \hyperlink{class_picto_1_1_scriptable_container_acb933156df40af1820e623fa92d051a4}{Picto\-::\-Scriptable\-Container}.



Definition at line 137 of file Script\-Controller.\-cpp.

\hypertarget{class_picto_1_1_script_controller_a8f67155393f4a6ee394120b5008befab}{\index{Picto\-::\-Script\-Controller@{Picto\-::\-Script\-Controller}!post\-Deserialize@{post\-Deserialize}}
\index{post\-Deserialize@{post\-Deserialize}!Picto::ScriptController@{Picto\-::\-Script\-Controller}}
\subsubsection[{post\-Deserialize}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-Script\-Controller\-::post\-Deserialize (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}}\label{class_picto_1_1_script_controller_a8f67155393f4a6ee394120b5008befab}


This function is called in \hyperlink{class_picto_1_1_asset_a8bed4da09ecb1c07ce0dab313a9aba67}{from\-Xml()} after successful deserialization and is used to initialize the \hyperlink{class_picto_1_1_asset}{Asset} based on values that were loaded in during deserialization. 

In the case of the \hyperlink{class_picto_1_1_asset}{Asset} class, during post\-Deserialize we tell the \hyperlink{class_picto_1_1_design_config}{Design\-Config} that if we have reached the stage of loading where \hyperlink{class_picto_1_1_asset}{Asset} I\-Ds must be unique, it should make sure that our \hyperlink{class_picto_1_1_asset}{Asset} I\-D is different from all others in this design. \begin{DoxySeeAlso}{See Also}
\hyperlink{class_picto_1_1_design_config_ab57e0738b97e4358ab09530cd6815fc0}{Design\-Config\-::fix\-Duplicated\-Asset\-Ids()} 
\end{DoxySeeAlso}


Reimplemented from \hyperlink{class_picto_1_1_control_element_a51697af839f1b0f3e792516f59fd5941}{Picto\-::\-Control\-Element}.



Definition at line 123 of file Script\-Controller.\-cpp.

\hypertarget{class_picto_1_1_script_controller_a38429c7fc5689ad63bb43b6590e47365}{\index{Picto\-::\-Script\-Controller@{Picto\-::\-Script\-Controller}!start@{start}}
\index{start@{start}!Picto::ScriptController@{Picto\-::\-Script\-Controller}}
\subsubsection[{start}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-Script\-Controller\-::start (
\begin{DoxyParamCaption}
\item[{Q\-Shared\-Pointer$<$ {\bf Engine\-::\-Picto\-Engine} $>$}]{engine}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_picto_1_1_script_controller_a38429c7fc5689ad63bb43b6590e47365}


Initializes the \hyperlink{class_picto_1_1_control_element}{Control\-Element}. 

Should be called when a \hyperlink{class_picto_1_1_state}{State} is first entered. \begin{DoxyNote}{Note}
\hyperlink{class_picto_1_1_control_element_ac660682acd7da329220cc7c4d7a9d825}{activate\-Targets()} should be called by this function if \hyperlink{class_picto_1_1_control_target}{Control\-Target} elements will be used. This will cause their bounding geometries to be highlighted in the operator view until they are deactivated. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See Also}
Activate\-Targets() 
\end{DoxySeeAlso}


Reimplemented from \hyperlink{class_picto_1_1_control_element_a29316418d618837adeebf47bb8d58308}{Picto\-::\-Control\-Element}.



Definition at line 39 of file Script\-Controller.\-cpp.

\hypertarget{class_picto_1_1_script_controller_a78d4532ff6719d9252f1b993636b19b9}{\index{Picto\-::\-Script\-Controller@{Picto\-::\-Script\-Controller}!upgrade\-Version@{upgrade\-Version}}
\index{upgrade\-Version@{upgrade\-Version}!Picto::ScriptController@{Picto\-::\-Script\-Controller}}
\subsubsection[{upgrade\-Version}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-Script\-Controller\-::upgrade\-Version (
\begin{DoxyParamCaption}
\item[{Q\-String}]{deserialized\-Version}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_picto_1_1_script_controller_a78d4532ff6719d9252f1b993636b19b9}
Before Design syntax version 0.\-0.\-1, all U\-I position data was stored in \hyperlink{class_picto_1_1_u_i_info}{U\-I\-Info} objects that were sub-\/elements of \hyperlink{class_picto_1_1_u_i_enabled}{U\-I\-Enabled} objects. At version 0.\-0.\-1, we moved U\-I data out of the Experimental design into a separate U\-I\-Elements of a \hyperlink{class_picto_1_1_u_i_data}{U\-I\-Data} design. 

Reimplemented from \hyperlink{class_picto_1_1_u_i_enabled_a12c0d0357c85854db9220c72c4941b15}{Picto\-::\-U\-I\-Enabled}.



Definition at line 68 of file Script\-Controller.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/common/controlelements/Script\-Controller.\-h\item 
source/common/controlelements/Script\-Controller.\-cpp\end{DoxyCompactItemize}
