\hypertarget{class_picto_1_1_scene}{\section{Picto\-:\-:Scene Class Reference}
\label{class_picto_1_1_scene}\index{Picto\-::\-Scene@{Picto\-::\-Scene}}
}


Handles rendering of Output\-Elements each frame.  




{\ttfamily \#include $<$Scene.\-h$>$}

Inheritance diagram for Picto\-:\-:Scene\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_picto_1_1_scene}
\end{center}
\end{figure}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_picto_1_1_scene_a1558a1f1eec6582e509defd1ff684fb7}{ready\-For\-Render} (int caller\-Id)
\begin{DoxyCompactList}\small\item\em Emitted when rendering is setup and the object wants do\-Render() to be called. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_picto_1_1_scene_aaf9d9efc4da11b8596628a102b152de9}{render} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_engine_1_1_picto_engine}{Engine\-::\-Picto\-Engine} $>$ engine, int caller\-Id)
\begin{DoxyCompactList}\small\item\em Sets up rendering and then causes the actual render to happen by triggering the do\-Render() function. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_scene_a34b54232e27f489aa0c88ca4492882d3}{void \hyperlink{class_picto_1_1_scene_a34b54232e27f489aa0c88ca4492882d3}{set\-Background\-Color} (Q\-Color color)}\label{class_picto_1_1_scene_a34b54232e27f489aa0c88ca4492882d3}

\begin{DoxyCompactList}\small\item\em Not currently used, but the idea is that this would set the background color rendered by this \hyperlink{class_picto_1_1_scene}{Scene}. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_scene_a84a42dfd298e46798bf7fad2df2d3059}{void \hyperlink{class_picto_1_1_scene_a84a42dfd298e46798bf7fad2df2d3059}{add\-Visual\-Element} (Q\-Shared\-Pointer$<$ \hyperlink{struct_picto_1_1_visual_element}{Visual\-Element} $>$ element)}\label{class_picto_1_1_scene_a84a42dfd298e46798bf7fad2df2d3059}

\begin{DoxyCompactList}\small\item\em Adds the input \hyperlink{struct_picto_1_1_visual_element}{Visual\-Element} to this \hyperlink{class_picto_1_1_scene}{Scene} so that it will be displayed next frame if it is marked visible. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_scene_af4522aca529497fb2901ce69e3748c60}{void \hyperlink{class_picto_1_1_scene_af4522aca529497fb2901ce69e3748c60}{add\-Audio\-Element} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_audio_element}{Audio\-Element} $>$ element)}\label{class_picto_1_1_scene_af4522aca529497fb2901ce69e3748c60}

\begin{DoxyCompactList}\small\item\em Adds the input \hyperlink{class_picto_1_1_audio_element}{Audio\-Element} to this \hyperlink{class_picto_1_1_scene}{Scene} so that it will be played next frame if it is set to play. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_scene_aa08595cf0763b8969bfef393bb6447f0}{void \hyperlink{class_picto_1_1_scene_aa08595cf0763b8969bfef393bb6447f0}{add\-Output\-Signal} (Q\-Shared\-Pointer$<$ \hyperlink{struct_picto_1_1_output_signal}{Output\-Signal} $>$ element)}\label{class_picto_1_1_scene_aa08595cf0763b8969bfef393bb6447f0}

\begin{DoxyCompactList}\small\item\em Adds the input \hyperlink{struct_picto_1_1_output_signal}{Output\-Signal} to this \hyperlink{class_picto_1_1_scene}{Scene} so that its voltage effects will be triggered next frame. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_scene}{Scene} $>$ \hyperlink{class_picto_1_1_scene_a26d9a1e0c272cdbaf9d6c61125be1700}{create\-Scene} ()
\begin{DoxyCompactList}\small\item\em Creates a new \hyperlink{class_picto_1_1_scene}{Scene} object and returns a shared pointer to it. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_scene_a5d9afebbcf97818d17f3da512ab94df9}{static void \hyperlink{class_picto_1_1_scene_a5d9afebbcf97818d17f3da512ab94df9}{set\-Zoom} (float zoom)}\label{class_picto_1_1_scene_a5d9afebbcf97818d17f3da512ab94df9}

\begin{DoxyCompactList}\small\item\em Sets the current zoom level of this scene.  The zoom value must be greater than zero and less than 1. Essentially, this value will multiply all of the dimensions of objects in the \hyperlink{class_picto_1_1_scene}{Scene} to create smaller objects for smaller zoom values and simulate a 'Zoom Out' effect. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_scene_ae8009d1b0b96e81c50706fcccbd18b0b}{static void \hyperlink{class_picto_1_1_scene_ae8009d1b0b96e81c50706fcccbd18b0b}{close\-Render\-Loops} ()}\label{class_picto_1_1_scene_ae8009d1b0b96e81c50706fcccbd18b0b}

\begin{DoxyCompactList}\small\item\em In case the \hyperlink{class_picto_1_1_scene_aaf9d9efc4da11b8596628a102b152de9}{render()} function is stuck waiting for do\-Render() to render graphics for some reason, this function causes execution to break out of that loop. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Handles rendering of Output\-Elements each frame. 

A scene is the thing that actually puts images on the screen, plays audio, and sets voltages to output pins. Scenes are used by the two State\-Machine\-Elements in which experimental time passes, \hyperlink{class_picto_1_1_state}{State} and \hyperlink{class_picto_1_1_pause_point}{Pause\-Point}. Each of these contains a single \hyperlink{class_picto_1_1_scene}{Scene}. To use a scene, Visual\-Elements, Audio\-Elements, and Output\-Signals are added using their respective add?() functions. When it comes time to render the elements for the test subject, \hyperlink{class_picto_1_1_scene_aaf9d9efc4da11b8596628a102b152de9}{render()} is called with the Picto\-Engine and the Asset\-Id of the element calling the function.

\begin{DoxyNote}{Note}
There is some complexity associated with this object due to the fact that Qt requires that all rendering activities occur in the main U\-I thread. Since we want to be able to run Experiments in a separate thread, we needed to set up a system in which we can be sure that the render code gets run in the main U\-I thread, but everything else can run in a separate thread. We handle this by moving the \hyperlink{class_picto_1_1_scene}{Scene} object into the U\-I thread, and then calling its private render code using a signal-\/slot framework. This is all handled internally and needn't concern outside classes. For more detail on this, see \hyperlink{class_picto_1_1_scene_aaf9d9efc4da11b8596628a102b152de9}{render()} and do\-Render(). 
\end{DoxyNote}
\begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}


Definition at line 37 of file Scene.\-h.



\subsection{Member Function Documentation}
\hypertarget{class_picto_1_1_scene_a26d9a1e0c272cdbaf9d6c61125be1700}{\index{Picto\-::\-Scene@{Picto\-::\-Scene}!create\-Scene@{create\-Scene}}
\index{create\-Scene@{create\-Scene}!Picto::Scene@{Picto\-::\-Scene}}
\subsubsection[{create\-Scene}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Shared\-Pointer$<$ {\bf Scene} $>$ Scene\-::create\-Scene (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_picto_1_1_scene_a26d9a1e0c272cdbaf9d6c61125be1700}


Creates a new \hyperlink{class_picto_1_1_scene}{Scene} object and returns a shared pointer to it. 

\begin{DoxyNote}{Note}
The scene handles rendering to the U\-I so it's rendering system must run in the U\-I thread. To make sure this happens, we use the qt signal-\/$>$slot system which gaurantees that if we mark this object as running the main thread, any slots that are triggered on the object will wait for the U\-I thread to run. Since we only call the private do\-Render() function through a signal-\/$>$slot connection, we are gauranteed that rendering is in the U\-I thread. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See Also}
\hyperlink{class_picto_1_1_scene_aaf9d9efc4da11b8596628a102b152de9}{render()}, do\-Render(), \hyperlink{class_picto_1_1_scene_a1558a1f1eec6582e509defd1ff684fb7}{ready\-For\-Render()} 
\end{DoxySeeAlso}


Definition at line 28 of file Scene.\-cpp.

\hypertarget{class_picto_1_1_scene_a1558a1f1eec6582e509defd1ff684fb7}{\index{Picto\-::\-Scene@{Picto\-::\-Scene}!ready\-For\-Render@{ready\-For\-Render}}
\index{ready\-For\-Render@{ready\-For\-Render}!Picto::Scene@{Picto\-::\-Scene}}
\subsubsection[{ready\-For\-Render}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-Scene\-::ready\-For\-Render (
\begin{DoxyParamCaption}
\item[{int}]{caller\-Id}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{class_picto_1_1_scene_a1558a1f1eec6582e509defd1ff684fb7}


Emitted when rendering is setup and the object wants do\-Render() to be called. 

This signal essentially exists in order to deal with a Qt requirement that all rendering activity occurs only in the main U\-I thread. See render\-I(), do\-Render() for more detail. \hypertarget{class_picto_1_1_scene_aaf9d9efc4da11b8596628a102b152de9}{\index{Picto\-::\-Scene@{Picto\-::\-Scene}!render@{render}}
\index{render@{render}!Picto::Scene@{Picto\-::\-Scene}}
\subsubsection[{render}]{\setlength{\rightskip}{0pt plus 5cm}void Scene\-::render (
\begin{DoxyParamCaption}
\item[{Q\-Shared\-Pointer$<$ {\bf Engine\-::\-Picto\-Engine} $>$}]{engine, }
\item[{int}]{caller\-Id}
\end{DoxyParamCaption}
)}}\label{class_picto_1_1_scene_aaf9d9efc4da11b8596628a102b152de9}


Sets up rendering and then causes the actual render to happen by triggering the do\-Render() function. 

The actual rendering code that displays to the screen must run in the main U\-I thread but we don't want to require everything else to be in that thread. Originally \hyperlink{namespace_picto}{Picto} wasn't designed with seperation of the View and Control logic into different threads so we needed to allow rendering code to occur in the U\-I thread and Control logic to occur in a separate thread without rewriting the whole system. The method that we are using for now is to simply setup the render in this routine, then pause the Control logic thread until the do\-Render() which actually performs the render is called in the U\-I thread. \begin{DoxyNote}{Note}
When running on the Picto\-Director there is only one thread (ie. everything runs in the U\-I Thread) and so there is no pause.
\end{DoxyNote}
caller\-Id is the Asset\-Id of the \hyperlink{class_picto_1_1_asset}{Asset} calling \hyperlink{class_picto_1_1_scene_aaf9d9efc4da11b8596628a102b152de9}{render()}. 

Definition at line 50 of file Scene.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/common/statemachine/Scene.\-h\item 
source/common/statemachine/Scene.\-cpp\end{DoxyCompactItemize}
