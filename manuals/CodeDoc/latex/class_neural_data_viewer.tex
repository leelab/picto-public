\hypertarget{class_neural_data_viewer}{\section{Neural\-Data\-Viewer Class Reference}
\label{class_neural_data_viewer}\index{Neural\-Data\-Viewer@{Neural\-Data\-Viewer}}
}


A widget used to display live lfp and spike data in the Workstation's Remote \hyperlink{class_viewer}{Viewer} during an experimental session.  




{\ttfamily \#include $<$neural\-Data\-Viewer.\-h$>$}

Inheritance diagram for Neural\-Data\-Viewer\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_neural_data_viewer}
\end{center}
\end{figure}
\subsection*{Public Slots}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_neural_data_viewer_a2ca4a819f8149a661a30bb1fe64f455c}{void \hyperlink{class_neural_data_viewer_a2ca4a819f8149a661a30bb1fe64f455c}{set\-Behavioral\-Time} (double time)}\label{class_neural_data_viewer_a2ca4a819f8149a661a30bb1fe64f455c}

\begin{DoxyCompactList}\small\item\em Sets the current time for this \hyperlink{class_viewer}{Viewer}. Time is according to the behaioral time stream. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_neural_data_viewer_a2e9aa904728f717169190b383d779945}{Neural\-Data\-Viewer} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_engine_1_1_picto_engine}{Picto\-::\-Engine\-::\-Picto\-Engine} $>$ engine, Q\-Widget $\ast$parent=0)
\begin{DoxyCompactList}\small\item\em Constructs a \hyperlink{class_neural_data_viewer}{Neural\-Data\-Viewer} object. \end{DoxyCompactList}\item 
\hypertarget{class_neural_data_viewer_ad7a50c38547be5f6bbe9ef68b1622c30}{void \hyperlink{class_neural_data_viewer_ad7a50c38547be5f6bbe9ef68b1622c30}{initialize} ()}\label{class_neural_data_viewer_ad7a50c38547be5f6bbe9ef68b1622c30}

\begin{DoxyCompactList}\small\item\em Initializes \hyperlink{class_neural_data_viewer}{Neural\-Data\-Viewer} variables. \end{DoxyCompactList}\item 
\hypertarget{class_neural_data_viewer_a5c15d9ad0b15991124e03c9f6ad21fcf}{void \hyperlink{class_neural_data_viewer_a5c15d9ad0b15991124e03c9f6ad21fcf}{deinitialize} ()}\label{class_neural_data_viewer_a5c15d9ad0b15991124e03c9f6ad21fcf}

\begin{DoxyCompactList}\small\item\em Deallocates memory used by the \hyperlink{class_neural_data_viewer}{Neural\-Data\-Viewer}. This is useful for when the U\-I goes to a State where the \hyperlink{class_neural_data_viewer}{Neural\-Data\-Viewer} is not active. \end{DoxyCompactList}\item 
void \hyperlink{class_neural_data_viewer_a33ce26232edaa58ba4400621fc0f1cb4}{add\-L\-F\-P\-Data} (\hyperlink{class_picto_1_1_l_f_p_data_unit_package}{L\-F\-P\-Data\-Unit\-Package} \&data)
\begin{DoxyCompactList}\small\item\em Adds the L\-F\-P data from the input L\-F\-P\-Data\-Unit\-Package to the \hyperlink{class_neural_data_viewer}{Neural\-Data\-Viewer}. \end{DoxyCompactList}\item 
void \hyperlink{class_neural_data_viewer_ab1e672e37e9902a1053996be1e60949f}{add\-Spike\-Data} (\hyperlink{class_picto_1_1_neural_data_unit}{Neural\-Data\-Unit} \&data)
\begin{DoxyCompactList}\small\item\em Adds the Spike data from the input Neural\-Data\-Unit to the \hyperlink{class_neural_data_viewer}{Neural\-Data\-Viewer}. \end{DoxyCompactList}\item 
void \hyperlink{class_neural_data_viewer_a4157c87495c85be09e6450f94642efd0}{replot} ()
\begin{DoxyCompactList}\small\item\em Updates the spike and lfp plots for the latest times and any new data that has arrived. \end{DoxyCompactList}\item 
\hypertarget{class_neural_data_viewer_a99a23b66072662768d5d213066bcd1a8}{int \hyperlink{class_neural_data_viewer_a99a23b66072662768d5d213066bcd1a8}{get\-Latest\-Id} ()}\label{class_neural_data_viewer_a99a23b66072662768d5d213066bcd1a8}

\begin{DoxyCompactList}\small\item\em Returns the Data\-Id of the latest Neural data to have been written to this viewer. \end{DoxyCompactList}\item 
\hypertarget{class_neural_data_viewer_ab1134a17a37625f981f297daf6d3233b}{int \hyperlink{class_neural_data_viewer_ab1134a17a37625f981f297daf6d3233b}{curr\-Channel} ()}\label{class_neural_data_viewer_ab1134a17a37625f981f297daf6d3233b}

\begin{DoxyCompactList}\small\item\em Returns the channel of the neural data currently being displayed. \end{DoxyCompactList}\item 
\hypertarget{class_neural_data_viewer_a17ce9132f1eacd87868566ac7c40bb62}{int \hyperlink{class_neural_data_viewer_a17ce9132f1eacd87868566ac7c40bb62}{curr\-Unit} ()}\label{class_neural_data_viewer_a17ce9132f1eacd87868566ac7c40bb62}

\begin{DoxyCompactList}\small\item\em Returns the unit of the spike data currently being displayed. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
A widget used to display live lfp and spike data in the Workstation's Remote \hyperlink{class_viewer}{Viewer} during an experimental session. 

This widget displays two plots, one for lfp data and the other for spike data. The data displayed on the plot is set using two drop downs to select the currently displayed channel and unit (for the spike window). The dropdowns contain all channel/unit combinations for which data has been added to the viewer. Beyond the actual plotted data, the plots themselves include a vertical red line representing the current experimental time. The line moves across the plot and the plot is cleared and redrawn from the beginning whenever the current time reaches the end of the plot.

The Remote \hyperlink{class_viewer}{Viewer} takes care of updating the widget by calling add\-L\-P\-F\-Data() and \hyperlink{class_neural_data_viewer_ab1e672e37e9902a1053996be1e60949f}{add\-Spike\-Data()} to add the latest neural data to arrive from the Picto\-Server. It calls \hyperlink{class_neural_data_viewer_a2ca4a819f8149a661a30bb1fe64f455c}{set\-Behavioral\-Time()} and \hyperlink{class_neural_data_viewer_a4157c87495c85be09e6450f94642efd0}{replot()} frequently to update the plot to the latest Experimental time.

\begin{DoxyNote}{Note}
You will notice that the L\-F\-P data lags behind the red bar and jumps up in half second jumps. The half second jump is a function of our buffering a half second of L\-F\-P data on the Proxy before sending it to the \hyperlink{class_server}{Server}. The lag is a function of the Neural Data Acquisition system being used since some only make their data available with a noticeable lag. In particular, we have noticed that the T\-D\-T system seems to have a lag of a few seconds. The Plexon system has a lower lag. 
\end{DoxyNote}
\begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}


Definition at line 49 of file neural\-Data\-Viewer.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_neural_data_viewer_a2e9aa904728f717169190b383d779945}{\index{Neural\-Data\-Viewer@{Neural\-Data\-Viewer}!Neural\-Data\-Viewer@{Neural\-Data\-Viewer}}
\index{Neural\-Data\-Viewer@{Neural\-Data\-Viewer}!NeuralDataViewer@{Neural\-Data\-Viewer}}
\subsubsection[{Neural\-Data\-Viewer}]{\setlength{\rightskip}{0pt plus 5cm}Neural\-Data\-Viewer\-::\-Neural\-Data\-Viewer (
\begin{DoxyParamCaption}
\item[{Q\-Shared\-Pointer$<$ {\bf Picto\-::\-Engine\-::\-Picto\-Engine} $>$}]{engine, }
\item[{Q\-Widget $\ast$}]{parent = {\ttfamily 0}}
\end{DoxyParamCaption}
)}}\label{class_neural_data_viewer_a2e9aa904728f717169190b383d779945}


Constructs a \hyperlink{class_neural_data_viewer}{Neural\-Data\-Viewer} object. 

The engine input is only actually used in the \hyperlink{class_neural_data_viewer_a4157c87495c85be09e6450f94642efd0}{replot()} function, and there all that is done is its existance is checked. It can probably be removed, but this will take some looking into. 

Definition at line 52 of file neural\-Data\-Viewer.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{class_neural_data_viewer_a33ce26232edaa58ba4400621fc0f1cb4}{\index{Neural\-Data\-Viewer@{Neural\-Data\-Viewer}!add\-L\-F\-P\-Data@{add\-L\-F\-P\-Data}}
\index{add\-L\-F\-P\-Data@{add\-L\-F\-P\-Data}!NeuralDataViewer@{Neural\-Data\-Viewer}}
\subsubsection[{add\-L\-F\-P\-Data}]{\setlength{\rightskip}{0pt plus 5cm}void Neural\-Data\-Viewer\-::add\-L\-F\-P\-Data (
\begin{DoxyParamCaption}
\item[{{\bf L\-F\-P\-Data\-Unit\-Package} \&}]{data}
\end{DoxyParamCaption}
)}}\label{class_neural_data_viewer_a33ce26232edaa58ba4400621fc0f1cb4}


Adds the L\-F\-P data from the input L\-F\-P\-Data\-Unit\-Package to the \hyperlink{class_neural_data_viewer}{Neural\-Data\-Viewer}. 

\begin{DoxyNote}{Note}
This function does not actually cause anything to be redrawn. It sets a lfp\-Plot\-Needs\-Update\-\_\- flag in case the new data is on the channel being displayed. \hyperlink{class_neural_data_viewer_a4157c87495c85be09e6450f94642efd0}{replot()} needs to be called to actually redraw the plot on screen. That function looks at the lfp\-Plot\-Needs\-Update\-\_\- flag to decide whether to add the new data to the displayed L\-F\-P plot. 
\end{DoxyNote}


Definition at line 112 of file neural\-Data\-Viewer.\-cpp.

\hypertarget{class_neural_data_viewer_ab1e672e37e9902a1053996be1e60949f}{\index{Neural\-Data\-Viewer@{Neural\-Data\-Viewer}!add\-Spike\-Data@{add\-Spike\-Data}}
\index{add\-Spike\-Data@{add\-Spike\-Data}!NeuralDataViewer@{Neural\-Data\-Viewer}}
\subsubsection[{add\-Spike\-Data}]{\setlength{\rightskip}{0pt plus 5cm}void Neural\-Data\-Viewer\-::add\-Spike\-Data (
\begin{DoxyParamCaption}
\item[{{\bf Neural\-Data\-Unit} \&}]{data}
\end{DoxyParamCaption}
)}}\label{class_neural_data_viewer_ab1e672e37e9902a1053996be1e60949f}


Adds the Spike data from the input Neural\-Data\-Unit to the \hyperlink{class_neural_data_viewer}{Neural\-Data\-Viewer}. 

\begin{DoxyNote}{Note}
This function does not actually cause anything to be redrawn. It sets a spike\-Plot\-Needs\-Update\-\_\- flag in case the new data is on the channel/unit being displayed. \hyperlink{class_neural_data_viewer_a4157c87495c85be09e6450f94642efd0}{replot()} needs to be called to actually redraw the plot on screen. That function looks at the spike\-Plot\-Needs\-Update\-\_\- flag to decide whether to add the new data to the displayed spike plot. 
\end{DoxyNote}


Definition at line 159 of file neural\-Data\-Viewer.\-cpp.

\hypertarget{class_neural_data_viewer_a4157c87495c85be09e6450f94642efd0}{\index{Neural\-Data\-Viewer@{Neural\-Data\-Viewer}!replot@{replot}}
\index{replot@{replot}!NeuralDataViewer@{Neural\-Data\-Viewer}}
\subsubsection[{replot}]{\setlength{\rightskip}{0pt plus 5cm}void Neural\-Data\-Viewer\-::replot (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_neural_data_viewer_a4157c87495c85be09e6450f94642efd0}


Updates the spike and lfp plots for the latest times and any new data that has arrived. 

This takes care of things like moving the red current time bar and restarting the plot if the current time has reached the right side of the window. 

Definition at line 203 of file neural\-Data\-Viewer.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/workstation/\-Remote\-Viewer/neural\-Data\-Viewer.\-h\item 
source/workstation/\-Remote\-Viewer/neural\-Data\-Viewer.\-cpp\end{DoxyCompactItemize}
