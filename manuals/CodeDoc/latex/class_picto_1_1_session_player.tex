\hypertarget{class_picto_1_1_session_player}{\section{Picto\-:\-:Session\-Player Class Reference}
\label{class_picto_1_1_session_player}\index{Picto\-::\-Session\-Player@{Picto\-::\-Session\-Player}}
}


Controls the timing and ordering of played back events during \hyperlink{namespace_picto}{Picto} Session playback.  




{\ttfamily \#include $<$Session\-Player.\-h$>$}

Inheritance diagram for Picto\-:\-:Session\-Player\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{class_picto_1_1_session_player}
\end{center}
\end{figure}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_picto_1_1_session_player_af6e2ed1e376e9d940c8f5554efbf753b}{void \hyperlink{class_picto_1_1_session_player_af6e2ed1e376e9d940c8f5554efbf753b}{starting\-Run} (Q\-String task\-Name, Q\-String run\-Name)}\label{class_picto_1_1_session_player_af6e2ed1e376e9d940c8f5554efbf753b}

\begin{DoxyCompactList}\small\item\em Emitted when playback of a Session Run starts or is restarted. task\-Name is the name of the task that was Run, run\-Name is the name that was saved for this Run during the Experimental Session. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_session_player_a7419758edb2920b408443d2683d8d029}{void \hyperlink{class_picto_1_1_session_player_a7419758edb2920b408443d2683d8d029}{loading} (bool starting\-Load)}\label{class_picto_1_1_session_player_a7419758edb2920b408443d2683d8d029}

\begin{DoxyCompactList}\small\item\em Emitted when loading of Session data starts or finishes. starting\-Load indicates if the event is a load start (true) or a load finish (false). \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_session_player_a37f89e41b206df6d3e88611f9638a394}{void \hyperlink{class_picto_1_1_session_player_a37f89e41b206df6d3e88611f9638a394}{reached\-End} ()}\label{class_picto_1_1_session_player_a37f89e41b206df6d3e88611f9638a394}

\begin{DoxyCompactList}\small\item\em Emitted when playback of the current Run ends. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_picto_1_1_session_player_a77e91caab8b8fdb0272d2dbe1c289c99}{Session\-Player} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_session_state}{Session\-State} $>$ sess\-State, Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_file_session_loader}{File\-Session\-Loader} $>$ sess\-Loader)
\begin{DoxyCompactList}\small\item\em Constructs a new \hyperlink{class_picto_1_1_session_player}{Session\-Player}. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_session_player_ab8096bcc250a2bc24c1b4509816f2da6}{void \hyperlink{class_picto_1_1_session_player_ab8096bcc250a2bc24c1b4509816f2da6}{restart} ()}\label{class_picto_1_1_session_player_ab8096bcc250a2bc24c1b4509816f2da6}

\begin{DoxyCompactList}\small\item\em Restarts the current run from the beginning. \end{DoxyCompactList}\item 
bool \hyperlink{class_picto_1_1_session_player_a6ac568dc380670485040937b9cc9e85c}{step\-To\-Time} (double time)
\begin{DoxyCompactList}\small\item\em Steps the Session time up to the input time. \hyperlink{class_picto_1_1_session_state}{Session\-State} signals indicating that Session events occured will be triggered along the way. \end{DoxyCompactList}\item 
double \hyperlink{class_picto_1_1_session_player_a6051bc0f91563498f813aa749140e4c7}{get\-Time} ()
\begin{DoxyCompactList}\small\item\em Returns the current playback time. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_session_player_a69d706f690e3c8a5eb38bb58fdfbd16d}{bool \hyperlink{class_picto_1_1_session_player_a69d706f690e3c8a5eb38bb58fdfbd16d}{is\-Processing} ()}\label{class_picto_1_1_session_player_a69d706f690e3c8a5eb38bb58fdfbd16d}

\begin{DoxyCompactList}\small\item\em While the processing\-\_\- bool is used in this class to make functions reentrant, this function does not appear to be used. It should probably be deleted. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Controls the timing and ordering of played back events during \hyperlink{namespace_picto}{Picto} Session playback. 

This class works closely with a \hyperlink{class_picto_1_1_session_state}{Session\-State} to playback Session events in a well defined and tightly controlled order. Its public interface is fairly simple, with \hyperlink{class_picto_1_1_session_player_ab8096bcc250a2bc24c1b4509816f2da6}{restart()} being used to restart the current run and \hyperlink{class_picto_1_1_session_player_a6ac568dc380670485040937b9cc9e85c}{step\-To\-Time()} being used to move through it. A great deal of thought has been put into the exact ordering of played back events. In particular the interleaving system for events that occured as part of the \hyperlink{class_picto_1_1_state_machine}{State\-Machine} (\hyperlink{class_picto_1_1_property}{Property} value changes, \hyperlink{class_picto_1_1_transition}{Transition} traversals) and events that occured outside of \hyperlink{class_picto_1_1_state_machine}{State\-Machine} control (\hyperlink{class_picto_1_1_signal}{Signal} data, Spikes, L\-F\-P, \hyperlink{class_picto_1_1_reward}{Reward}) needed to be clearly defined. For more detail on how this is handled, see step().

It should also be pointed out that the \hyperlink{class_picto_1_1_session_player}{Session\-Player} does not support \char`\"{}reverse playback\char`\"{} behavior. When \hyperlink{class_picto_1_1_session_player_a6ac568dc380670485040937b9cc9e85c}{step\-To\-Time()} recieves an input with a time that is lower than the latest time, the Session Run is restarted and fast forwarded to that position. This is due to the need to support the \hyperlink{class_picto_1_1_analysis}{Analysis} system. For more detail, see \hyperlink{class_picto_1_1_session_player_a6ac568dc380670485040937b9cc9e85c}{step\-To\-Time()}.

\begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}


Definition at line 28 of file Session\-Player.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_picto_1_1_session_player_a77e91caab8b8fdb0272d2dbe1c289c99}{\index{Picto\-::\-Session\-Player@{Picto\-::\-Session\-Player}!Session\-Player@{Session\-Player}}
\index{Session\-Player@{Session\-Player}!Picto::SessionPlayer@{Picto\-::\-Session\-Player}}
\subsubsection[{Session\-Player}]{\setlength{\rightskip}{0pt plus 5cm}Session\-Player\-::\-Session\-Player (
\begin{DoxyParamCaption}
\item[{Q\-Shared\-Pointer$<$ {\bf Session\-State} $>$}]{sess\-State, }
\item[{Q\-Shared\-Pointer$<$ {\bf File\-Session\-Loader} $>$}]{sess\-Loader}
\end{DoxyParamCaption}
)}}\label{class_picto_1_1_session_player_a77e91caab8b8fdb0272d2dbe1c289c99}


Constructs a new \hyperlink{class_picto_1_1_session_player}{Session\-Player}. 

sess\-State is the \hyperlink{class_picto_1_1_session_state}{Session\-State} that will be used to playback all of the Session data. sess\-Loader is the \hyperlink{class_picto_1_1_file_session_loader}{File\-Session\-Loader} that will load the Session file into the \hyperlink{class_picto_1_1_session_state}{Session\-State} object before playback. \begin{DoxyNote}{Note}
The input \hyperlink{class_picto_1_1_file_session_loader}{File\-Session\-Loader} does not appear to be used in this class anymore. It should probably be removed from this constructor. 
\end{DoxyNote}


Definition at line 10 of file Session\-Player.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{class_picto_1_1_session_player_a6051bc0f91563498f813aa749140e4c7}{\index{Picto\-::\-Session\-Player@{Picto\-::\-Session\-Player}!get\-Time@{get\-Time}}
\index{get\-Time@{get\-Time}!Picto::SessionPlayer@{Picto\-::\-Session\-Player}}
\subsubsection[{get\-Time}]{\setlength{\rightskip}{0pt plus 5cm}double Session\-Player\-::get\-Time (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_picto_1_1_session_player_a6051bc0f91563498f813aa749140e4c7}


Returns the current playback time. 

All Session events that occured up to this time have been emitted through \hyperlink{class_picto_1_1_session_state}{Session\-State} signals. 

Definition at line 129 of file Session\-Player.\-cpp.

\hypertarget{class_picto_1_1_session_player_a6ac568dc380670485040937b9cc9e85c}{\index{Picto\-::\-Session\-Player@{Picto\-::\-Session\-Player}!step\-To\-Time@{step\-To\-Time}}
\index{step\-To\-Time@{step\-To\-Time}!Picto::SessionPlayer@{Picto\-::\-Session\-Player}}
\subsubsection[{step\-To\-Time}]{\setlength{\rightskip}{0pt plus 5cm}bool Session\-Player\-::step\-To\-Time (
\begin{DoxyParamCaption}
\item[{double}]{time}
\end{DoxyParamCaption}
)}}\label{class_picto_1_1_session_player_a6ac568dc380670485040937b9cc9e85c}


Steps the Session time up to the input time. \hyperlink{class_picto_1_1_session_state}{Session\-State} signals indicating that Session events occured will be triggered along the way. 

This function calls step\-To\-Next\-Frame() over and over again until the input time is no longer higher than the time of the next frame. If the current Run has not yet been started, some initialization will occur before starting step\-To\-Next\-Frame() in the loop.

If the input time is lower than the current time in the Run, the Run will be restarted and then step\-To\-Next\-Frame() will be called until the input time as usual. This is due to the fact that Analyses depend on a complete pass through the Session Run from the beginning. If we \char`\"{}rewound\char`\"{}, we would have to undo \hyperlink{class_picto_1_1_analysis}{Analysis} script effects while we rewind to the input time and then restart \hyperlink{class_picto_1_1_analysis}{Analysis} at that point. That is not supported so we need to just clear the entire \hyperlink{class_picto_1_1_analysis}{Analysis} and start over from scratch. In cases where we end up restarting the run, the outside world will know what happened because the \hyperlink{class_picto_1_1_session_player_af6e2ed1e376e9d940c8f5554efbf753b}{starting\-Run()} signal will be emitted, just as it always is when playback of a new run starts.

If we reach the end of the Run before arriving at the input time, the \hyperlink{class_picto_1_1_session_player_a37f89e41b206df6d3e88611f9638a394}{reached\-End()} will be emitted. 

Definition at line 55 of file Session\-Player.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/common/playback/Session\-Player.\-h\item 
source/common/playback/Session\-Player.\-cpp\end{DoxyCompactItemize}
