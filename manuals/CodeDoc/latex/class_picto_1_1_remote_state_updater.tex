\hypertarget{class_picto_1_1_remote_state_updater}{\section{Picto\-:\-:Remote\-State\-Updater Class Reference}
\label{class_picto_1_1_remote_state_updater}\index{Picto\-::\-Remote\-State\-Updater@{Picto\-::\-Remote\-State\-Updater}}
}


A \hyperlink{class_picto_1_1_state_updater}{State\-Updater} that gathers Session events from the \hyperlink{namespace_picto}{Picto} \hyperlink{class_server}{Server} in real time.  




{\ttfamily \#include $<$Remote\-State\-Updater.\-h$>$}

Inheritance diagram for Picto\-:\-:Remote\-State\-Updater\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3.000000cm]{class_picto_1_1_remote_state_updater}
\end{center}
\end{figure}
\subsection*{Signals}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{class_picto_1_1_remote_state_updater_a42d155b768af1abb903eebd4bd84139a}{starting\-Run} (Q\-String task\-Name, Q\-String run\-Name)
\begin{DoxyCompactList}\small\item\em Never called. \end{DoxyCompactList}\item 
void \hyperlink{class_picto_1_1_remote_state_updater_a15af514c65234a1837012ec884561505}{ending\-Run} ()
\begin{DoxyCompactList}\small\item\em Never called. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_a130d471db538e01ec3a549b429772012}{void \hyperlink{class_picto_1_1_remote_state_updater_a130d471db538e01ec3a549b429772012}{property\-Value\-Changed} (int prop\-Id, Q\-String value)}\label{class_picto_1_1_remote_state_updater_a130d471db538e01ec3a549b429772012}

\begin{DoxyCompactList}\small\item\em Emitted when a \hyperlink{class_picto_1_1_property}{Property} value changes for a \hyperlink{class_picto_1_1_property}{Property} with an Asset\-Id of prop\-Id and a new value of value. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_a928e83724f5aed13e45817c581dd4d16}{void \hyperlink{class_picto_1_1_remote_state_updater_a928e83724f5aed13e45817c581dd4d16}{property\-Init\-Value\-Changed} (int prop\-Id, Q\-String value)}\label{class_picto_1_1_remote_state_updater_a928e83724f5aed13e45817c581dd4d16}

\begin{DoxyCompactList}\small\item\em Emitted when a \hyperlink{class_picto_1_1_property}{Property} init\-Value changes for a \hyperlink{class_picto_1_1_property}{Property} with an Asset\-Id of prop\-Id and a new init\-Value of value. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_a86702871a23abf704f4954f40531a20e}{void \hyperlink{class_picto_1_1_remote_state_updater_a86702871a23abf704f4954f40531a20e}{transition\-Activated} (int trans\-Id)}\label{class_picto_1_1_remote_state_updater_a86702871a23abf704f4954f40531a20e}

\begin{DoxyCompactList}\small\item\em Emitted when a \hyperlink{class_picto_1_1_transition}{Transition} with Asset\-Id of trans\-Id is traversed. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_a89ac8bb7890ae00972bfd16259dd33aa}{void \hyperlink{class_picto_1_1_remote_state_updater_a89ac8bb7890ae00972bfd16259dd33aa}{frame\-Presented} (double time)}\label{class_picto_1_1_remote_state_updater_a89ac8bb7890ae00972bfd16259dd33aa}

\begin{DoxyCompactList}\small\item\em Emitted when a new frame is presented. time is the time at which the first phosphor appeared on the display for this frame. \end{DoxyCompactList}\item 
void \hyperlink{class_picto_1_1_remote_state_updater_a903965eb87c3ddd006ea391c724df25f}{reward\-Supplied} (double time, int duration, int channel)
\begin{DoxyCompactList}\small\item\em Emitted when a reward is triggered. \end{DoxyCompactList}\item 
void \hyperlink{class_picto_1_1_remote_state_updater_a6034fb211d601078c6c9c59b78e10496}{signal\-Changed} (Q\-String name, Q\-String\-List sub\-Chan\-Names, Q\-Vector$<$ float $>$ vals)
\begin{DoxyCompactList}\small\item\em Emitted when new signal data comes in. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_picto_1_1_remote_state_updater_a349658dd465ee16e00d5d68ad245aae1}{Remote\-State\-Updater} (\hyperlink{class_picto_1_1_command_channel}{Command\-Channel} $\ast$server\-Chan)
\begin{DoxyCompactList}\small\item\em Constructs a new \hyperlink{class_picto_1_1_remote_state_updater}{Remote\-State\-Updater} object. \end{DoxyCompactList}\item 
void \hyperlink{class_picto_1_1_remote_state_updater_a425e1dd79379c413e0b3584e1a13ae7e}{init\-For\-New\-Session} ()
\begin{DoxyCompactList}\small\item\em Initializes this object for a new Session. \end{DoxyCompactList}\item 
virtual bool \hyperlink{class_picto_1_1_remote_state_updater_ac1b44f60204ce0ec535b226175deb8db}{update\-State} ()
\begin{DoxyCompactList}\small\item\em Requests all new Session data from the \hyperlink{namespace_picto}{Picto} \hyperlink{class_server}{Server} and emits the appropriate signals accordingly. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_ac3dbd773523c5775ddbeb6f49bee4a9b}{virtual Q\-Shared\-Pointer\\*
$<$ \hyperlink{class_picto_1_1_frame_reader}{Frame\-Reader} $>$ \hyperlink{class_picto_1_1_remote_state_updater_ac3dbd773523c5775ddbeb6f49bee4a9b}{get\-Frame\-Reader} ()}\label{class_picto_1_1_remote_state_updater_ac3dbd773523c5775ddbeb6f49bee4a9b}

\begin{DoxyCompactList}\small\item\em Returns an empty pointer since Analaysis Data Readers aren't yet supported in live Experiments. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_a34bdfb3310d0c3d6a814a4eaf140a774}{virtual Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_lfp_reader}{Lfp\-Reader} $>$ \hyperlink{class_picto_1_1_remote_state_updater_a34bdfb3310d0c3d6a814a4eaf140a774}{get\-Lfp\-Reader} ()}\label{class_picto_1_1_remote_state_updater_a34bdfb3310d0c3d6a814a4eaf140a774}

\begin{DoxyCompactList}\small\item\em Returns an empty pointer since Analaysis Data Readers aren't yet supported in live Experiments. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_a43608821938dc7d5409684b10e7bda27}{virtual Q\-Shared\-Pointer\\*
$<$ \hyperlink{class_picto_1_1_reward_reader}{Reward\-Reader} $>$ \hyperlink{class_picto_1_1_remote_state_updater_a43608821938dc7d5409684b10e7bda27}{get\-Reward\-Reader} ()}\label{class_picto_1_1_remote_state_updater_a43608821938dc7d5409684b10e7bda27}

\begin{DoxyCompactList}\small\item\em Returns an empty pointer since Analaysis Data Readers aren't yet supported in live Experiments. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_a27d75b541f18710b27f69f6086697f19}{virtual Q\-Shared\-Pointer\\*
$<$ \hyperlink{class_picto_1_1_run_notes_reader}{Run\-Notes\-Reader} $>$ \hyperlink{class_picto_1_1_remote_state_updater_a27d75b541f18710b27f69f6086697f19}{get\-Run\-Notes\-Reader} ()}\label{class_picto_1_1_remote_state_updater_a27d75b541f18710b27f69f6086697f19}

\begin{DoxyCompactList}\small\item\em Returns an empty pointer since Analaysis Data Readers aren't yet supported in live Experiments. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_aa2c379599ddb36c8b79c54c34a69407f}{virtual Q\-Shared\-Pointer\\*
$<$ \hyperlink{class_picto_1_1_spike_reader}{Spike\-Reader} $>$ \hyperlink{class_picto_1_1_remote_state_updater_aa2c379599ddb36c8b79c54c34a69407f}{get\-Spike\-Reader} ()}\label{class_picto_1_1_remote_state_updater_aa2c379599ddb36c8b79c54c34a69407f}

\begin{DoxyCompactList}\small\item\em Returns an empty pointer since Analaysis Data Readers aren't yet supported in live Experiments. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_a0305ae6454a3a8bf5862385d6086510e}{virtual Q\-String\-List \hyperlink{class_picto_1_1_remote_state_updater_a0305ae6454a3a8bf5862385d6086510e}{get\-Signal\-Reader\-Names} ()}\label{class_picto_1_1_remote_state_updater_a0305ae6454a3a8bf5862385d6086510e}

\begin{DoxyCompactList}\small\item\em Returns an empty list since Analaysis Data Readers aren't yet supported in live Experiments. \end{DoxyCompactList}\item 
\hypertarget{class_picto_1_1_remote_state_updater_ad7f79399c5f0fd293cace5018319b58f}{virtual Q\-Shared\-Pointer\\*
$<$ \hyperlink{class_picto_1_1_signal_reader}{Signal\-Reader} $>$ \hyperlink{class_picto_1_1_remote_state_updater_ad7f79399c5f0fd293cace5018319b58f}{get\-Signal\-Reader} (Q\-String name)}\label{class_picto_1_1_remote_state_updater_ad7f79399c5f0fd293cace5018319b58f}

\begin{DoxyCompactList}\small\item\em Returns an empty pointer since Analaysis Data Readers aren't yet supported in live Experiments. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
A \hyperlink{class_picto_1_1_state_updater}{State\-Updater} that gathers Session events from the \hyperlink{namespace_picto}{Picto} \hyperlink{class_server}{Server} in real time. 

This \hyperlink{class_picto_1_1_state_updater}{State\-Updater} is used in the Remote \hyperlink{class_viewer}{Viewer} to keep the local slave \hyperlink{class_picto_1_1_experiment}{Experiment} in sync with the master \hyperlink{class_picto_1_1_experiment}{Experiment} running on the \hyperlink{class_director}{Director}. It is used in the \hyperlink{class_remote_viewer}{Remote\-Viewer}'s \hyperlink{class_picto_1_1_slave_experiment_driver}{Slave\-Experiment\-Driver} which doesn't care about the \hyperlink{class_picto_1_1_state_updater}{State\-Updater} implementation. The result is that we can use the same system that we use for Experimental playaback for viewing live Experiments. The only difference is that we don't currently support \hyperlink{class_picto_1_1_analysis}{Analysis} of live Experiments. This is partially due to the fact that no future data is available at any given time. It is for this reason that we are returning empty pointers from all of the \hyperlink{class_picto_1_1_state_updater}{State\-Updater} get?Reader() functions. \begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}


Definition at line 24 of file Remote\-State\-Updater.\-h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_picto_1_1_remote_state_updater_a349658dd465ee16e00d5d68ad245aae1}{\index{Picto\-::\-Remote\-State\-Updater@{Picto\-::\-Remote\-State\-Updater}!Remote\-State\-Updater@{Remote\-State\-Updater}}
\index{Remote\-State\-Updater@{Remote\-State\-Updater}!Picto::RemoteStateUpdater@{Picto\-::\-Remote\-State\-Updater}}
\subsubsection[{Remote\-State\-Updater}]{\setlength{\rightskip}{0pt plus 5cm}Remote\-State\-Updater\-::\-Remote\-State\-Updater (
\begin{DoxyParamCaption}
\item[{{\bf Command\-Channel} $\ast$}]{server\-Chan}
\end{DoxyParamCaption}
)}}\label{class_picto_1_1_remote_state_updater_a349658dd465ee16e00d5d68ad245aae1}


Constructs a new \hyperlink{class_picto_1_1_remote_state_updater}{Remote\-State\-Updater} object. 


\begin{DoxyParams}{Parameters}
{\em server\-Chan} & The \hyperlink{class_picto_1_1_command_channel}{Command\-Channel} on which this object will request the latest data from the \hyperlink{class_server}{Server}. \\
\hline
\end{DoxyParams}


Definition at line 17 of file Remote\-State\-Updater.\-cpp.



\subsection{Member Function Documentation}
\hypertarget{class_picto_1_1_remote_state_updater_a15af514c65234a1837012ec884561505}{\index{Picto\-::\-Remote\-State\-Updater@{Picto\-::\-Remote\-State\-Updater}!ending\-Run@{ending\-Run}}
\index{ending\-Run@{ending\-Run}!Picto::RemoteStateUpdater@{Picto\-::\-Remote\-State\-Updater}}
\subsubsection[{ending\-Run}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-Remote\-State\-Updater\-::ending\-Run (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{class_picto_1_1_remote_state_updater_a15af514c65234a1837012ec884561505}


Never called. 

\begin{DoxyNote}{Note}
The starting\-Run and ending\-Run signals are not yet being called by the \hyperlink{class_picto_1_1_remote_state_updater}{Remote\-State\-Updater} this is because its current design doesn't allow it to differentiate between a run that is starting and a run that it is joining in the middle. Similarly for an ending run, the current design doesn't know if the run ended or if the connection was lost or some data was missed due to a slow connection. 
\end{DoxyNote}
\hypertarget{class_picto_1_1_remote_state_updater_a425e1dd79379c413e0b3584e1a13ae7e}{\index{Picto\-::\-Remote\-State\-Updater@{Picto\-::\-Remote\-State\-Updater}!init\-For\-New\-Session@{init\-For\-New\-Session}}
\index{init\-For\-New\-Session@{init\-For\-New\-Session}!Picto::RemoteStateUpdater@{Picto\-::\-Remote\-State\-Updater}}
\subsubsection[{init\-For\-New\-Session}]{\setlength{\rightskip}{0pt plus 5cm}void Remote\-State\-Updater\-::init\-For\-New\-Session (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_picto_1_1_remote_state_updater_a425e1dd79379c413e0b3584e1a13ae7e}


Initializes this object for a new Session. 

This means setting the last data requested time back to zero. 

Definition at line 27 of file Remote\-State\-Updater.\-cpp.

\hypertarget{class_picto_1_1_remote_state_updater_a903965eb87c3ddd006ea391c724df25f}{\index{Picto\-::\-Remote\-State\-Updater@{Picto\-::\-Remote\-State\-Updater}!reward\-Supplied@{reward\-Supplied}}
\index{reward\-Supplied@{reward\-Supplied}!Picto::RemoteStateUpdater@{Picto\-::\-Remote\-State\-Updater}}
\subsubsection[{reward\-Supplied}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-Remote\-State\-Updater\-::reward\-Supplied (
\begin{DoxyParamCaption}
\item[{double}]{time, }
\item[{int}]{duration, }
\item[{int}]{channel}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{class_picto_1_1_remote_state_updater_a903965eb87c3ddd006ea391c724df25f}


Emitted when a reward is triggered. 

time is the time when the reward starts, duration is its duration in ms, channel is the reward channel on which the reward was provided. \hypertarget{class_picto_1_1_remote_state_updater_a6034fb211d601078c6c9c59b78e10496}{\index{Picto\-::\-Remote\-State\-Updater@{Picto\-::\-Remote\-State\-Updater}!signal\-Changed@{signal\-Changed}}
\index{signal\-Changed@{signal\-Changed}!Picto::RemoteStateUpdater@{Picto\-::\-Remote\-State\-Updater}}
\subsubsection[{signal\-Changed}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-Remote\-State\-Updater\-::signal\-Changed (
\begin{DoxyParamCaption}
\item[{Q\-String}]{name, }
\item[{Q\-String\-List}]{sub\-Chan\-Names, }
\item[{Q\-Vector$<$ float $>$}]{vals}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{class_picto_1_1_remote_state_updater_a6034fb211d601078c6c9c59b78e10496}


Emitted when new signal data comes in. 

name is the name of the \hyperlink{class_picto_1_1_signal_channel}{Signal\-Channel} for which new data is available. sub\-Chan\-Names is a list of names of this S\-Ignal\-Channel's sub-\/channels. vals is a list of the new values. If sub\-Chan\-Names is x,y, vals will have data ordered like x1,y1,x2,y2,x3,y3,... \begin{DoxyNote}{Note}
Unlike in the master, signal data only comes in once per frame, not once per \hyperlink{class_picto_1_1_signal_channel}{Signal\-Channel} sample period. \hyperlink{class_picto_1_1_remote_state_updater_a6034fb211d601078c6c9c59b78e10496}{signal\-Changed()} should be emitted with all of the \hyperlink{class_picto_1_1_signal_channel}{Signal\-Channel} data since the previous frame after all \hyperlink{class_picto_1_1_property}{Property} value change and transition traversal signals have been emitted and before \hyperlink{class_picto_1_1_remote_state_updater_a89ac8bb7890ae00972bfd16259dd33aa}{frame\-Presented()} is emitted. 
\end{DoxyNote}
\hypertarget{class_picto_1_1_remote_state_updater_a42d155b768af1abb903eebd4bd84139a}{\index{Picto\-::\-Remote\-State\-Updater@{Picto\-::\-Remote\-State\-Updater}!starting\-Run@{starting\-Run}}
\index{starting\-Run@{starting\-Run}!Picto::RemoteStateUpdater@{Picto\-::\-Remote\-State\-Updater}}
\subsubsection[{starting\-Run}]{\setlength{\rightskip}{0pt plus 5cm}void Picto\-::\-Remote\-State\-Updater\-::starting\-Run (
\begin{DoxyParamCaption}
\item[{Q\-String}]{task\-Name, }
\item[{Q\-String}]{run\-Name}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [signal]}}}\label{class_picto_1_1_remote_state_updater_a42d155b768af1abb903eebd4bd84139a}


Never called. 

\begin{DoxyNote}{Note}
The starting\-Run and ending\-Run signals are not yet being called by the \hyperlink{class_picto_1_1_remote_state_updater}{Remote\-State\-Updater} this is because its current design doesn't allow it to differentiate between a run that is starting and a run that it is joining in the middle. Similarly for an ending run, the current design doesn't know if the run ended or if the connection was lost or some data was missed due to a slow connection. 
\end{DoxyNote}
\hypertarget{class_picto_1_1_remote_state_updater_ac1b44f60204ce0ec535b226175deb8db}{\index{Picto\-::\-Remote\-State\-Updater@{Picto\-::\-Remote\-State\-Updater}!update\-State@{update\-State}}
\index{update\-State@{update\-State}!Picto::RemoteStateUpdater@{Picto\-::\-Remote\-State\-Updater}}
\subsubsection[{update\-State}]{\setlength{\rightskip}{0pt plus 5cm}bool Remote\-State\-Updater\-::update\-State (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [virtual]}}}\label{class_picto_1_1_remote_state_updater_ac1b44f60204ce0ec535b226175deb8db}


Requests all new Session data from the \hyperlink{namespace_picto}{Picto} \hyperlink{class_server}{Server} and emits the appropriate signals accordingly. 

This function keeps track of the latest time for which data has arrived from the \hyperlink{class_server}{Server} then requests all data from the \hyperlink{class_server}{Server} that occured after that time. The function goes through the returned data and emits the appropriate \hyperlink{class_picto_1_1_state_updater}{State\-Updater} signals for each type of new data that arrives. This function should be called at least once per frame in order to be sure that the most up to date data is always coming into the Workstation. 

Implements \hyperlink{class_picto_1_1_state_updater_a7554cc46eafbee58fb566edd93d5410e}{Picto\-::\-State\-Updater}.



Definition at line 42 of file Remote\-State\-Updater.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/workstation/\-Remote\-Viewer/Remote\-State\-Updater.\-h\item 
source/workstation/\-Remote\-Viewer/Remote\-State\-Updater.\-cpp\end{DoxyCompactItemize}
