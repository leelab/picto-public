\hypertarget{class_session_info}{\section{Session\-Info Class Reference}
\label{class_session_info}\index{Session\-Info@{Session\-Info}}
}


Manages data for a single Session. Stores data needed for Session monitoring in R\-A\-M and Session data needed for future Analysis on Disk.  




{\ttfamily \#include $<$Session\-Info.\-h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_session_info_a61e0959a79e819267bf4814f519ef99a}{void \hyperlink{class_session_info_a61e0959a79e819267bf4814f519ef99a}{Add\-Component} (Q\-Shared\-Pointer$<$ \hyperlink{class_component_info}{Component\-Info} $>$ component)}\label{class_session_info_a61e0959a79e819267bf4814f519ef99a}

\begin{DoxyCompactList}\small\item\em Adds a Component represented by the input \hyperlink{class_component_info}{Component\-Info} object to the current session (ie. \hyperlink{class_director}{Director} or Proxy) \end{DoxyCompactList}\item 
void \hyperlink{class_session_info_acc27036c722407afba5bf30965084fbb}{Update\-Component\-Activity} ()
\begin{DoxyCompactList}\small\item\em Called periodically to update the stored information about the Session's Components in the Session database. \end{DoxyCompactList}\item 
bool \hyperlink{class_session_info_acbb6ba7d4746d4cfe80777acd5f97997}{has\-Active\-Components} ()
\begin{DoxyCompactList}\small\item\em Returns true if any of the Components associated with this Session are currently active (ie. Attached to the \hyperlink{class_server}{Server} and reporting that they are working on this Session. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a7a6a1c43babe1d1771e76123c24f0933}{void \hyperlink{class_session_info_a7a6a1c43babe1d1771e76123c24f0933}{ignore\-Components} ()}\label{class_session_info_a7a6a1c43babe1d1771e76123c24f0933}

\begin{DoxyCompactList}\small\item\em After this function is called, has\-Active\-Components will return false. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a099ea2f23c036f943cf6b6c424b6fa7d}{Q\-Shared\-Pointer$<$ \hyperlink{class_component_info}{Component\-Info} $>$ \hyperlink{class_session_info_a099ea2f23c036f943cf6b6c424b6fa7d}{get\-Component\-By\-Type} (Q\-String type)}\label{class_session_info_a099ea2f23c036f943cf6b6c424b6fa7d}

\begin{DoxyCompactList}\small\item\em Returns the \hyperlink{class_component_info}{Component\-Info} object representing the Component of the input type (ie. \char`\"{}\-D\-I\-R\-E\-C\-T\-O\-R\char`\"{}, \char`\"{}\-P\-R\-O\-X\-Y\char`\"{}) that is associated with this Session. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a559e8105862352d63f8cebe4479a751e}{bool \hyperlink{class_session_info_a559e8105862352d63f8cebe4479a751e}{has\-Component} (Q\-Uuid component\-I\-D)}\label{class_session_info_a559e8105862352d63f8cebe4479a751e}

\begin{DoxyCompactList}\small\item\em Returns true if the Component with the input component\-Id is one of the one's handling this Session. \end{DoxyCompactList}\item 
void \hyperlink{class_session_info_abdc6f3d0225de15740712135d57d8c5f}{align\-Timestamps\-To} (Q\-String component\-Type)
\begin{DoxyCompactList}\small\item\em Sets the type of component to which other component types' timestamps should be aligned. If this is not called, component timestamps will not be aligned. \end{DoxyCompactList}\item 
bool \hyperlink{class_session_info_ae647cb4d792607c866654e8c908014e1}{end\-Session} ()
\begin{DoxyCompactList}\small\item\em Ends the session. \end{DoxyCompactList}\item 
bool \hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache} (Q\-String source\-Type=\char`\"{}\char`\"{})
\begin{DoxyCompactList}\small\item\em Dumps the R\-A\-M cached data into the file based Session database. \end{DoxyCompactList}\item 
void \hyperlink{class_session_info_ab46c5d064afd93d1e4ad8d01284c673b}{insert\-Neural\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_neural_data_unit}{Picto\-::\-Neural\-Data\-Unit} $>$ data)
\begin{DoxyCompactList}\small\item\em Inserts a Neural\-Data\-Unit record into the \hyperlink{class_cached_session_data}{Cached\-Session\-Data} and the record of the current Session state. The \hyperlink{class_cached_session_data}{Cached\-Session\-Data} will later be flushed to disk in \hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache()}. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_acd4949a6188bbbef6af9fb20a9cd8bb7}{void \hyperlink{class_session_info_acd4949a6188bbbef6af9fb20a9cd8bb7}{insert\-Property\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_property_data_unit_package}{Picto\-::\-Property\-Data\-Unit\-Package} $>$ data)}\label{class_session_info_acd4949a6188bbbef6af9fb20a9cd8bb7}

\begin{DoxyCompactList}\small\item\em Inserts a Property\-Data\-Unit\-Package record into the \hyperlink{class_cached_session_data}{Cached\-Session\-Data} and the record of the current Session state. The \hyperlink{class_cached_session_data}{Cached\-Session\-Data} will later be flushed to disk in \hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache()}. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_aa0b15464f57bfed00ab75e211f115f71}{void \hyperlink{class_session_info_aa0b15464f57bfed00ab75e211f115f71}{insert\-Behavioral\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_behavioral_data_unit_package}{Picto\-::\-Behavioral\-Data\-Unit\-Package} $>$ data)}\label{class_session_info_aa0b15464f57bfed00ab75e211f115f71}

\begin{DoxyCompactList}\small\item\em Inserts a Behavioral\-Data\-Unit\-Package record into the \hyperlink{class_cached_session_data}{Cached\-Session\-Data} and the record of the current Session state. The \hyperlink{class_cached_session_data}{Cached\-Session\-Data} will later be flushed to disk in \hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache()}. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a5369a72ae100ac6452e324e10361311b}{void \hyperlink{class_session_info_a5369a72ae100ac6452e324e10361311b}{insert\-Alignment\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_alignment_data_unit}{Picto\-::\-Alignment\-Data\-Unit} $>$ data)}\label{class_session_info_a5369a72ae100ac6452e324e10361311b}

\begin{DoxyCompactList}\small\item\em Adds an Alignment\-Data\-Unit data point to the appropriate \hyperlink{class_session_data}{Session\-Data} object attempts alignment with the latest data using align\-Time\-Bases(). \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a7e8f84449a2afcb1723f8c60cae9d81f}{void \hyperlink{class_session_info_a7e8f84449a2afcb1723f8c60cae9d81f}{insert\-L\-F\-P\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_l_f_p_data_unit_package}{Picto\-::\-L\-F\-P\-Data\-Unit\-Package} $>$ data)}\label{class_session_info_a7e8f84449a2afcb1723f8c60cae9d81f}

\begin{DoxyCompactList}\small\item\em Inserts a L\-F\-P\-Data\-Unit\-Package record into the \hyperlink{class_cached_session_data}{Cached\-Session\-Data} and the record of the current Session state. The \hyperlink{class_cached_session_data}{Cached\-Session\-Data} will later be flushed to disk in \hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache()}. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_ae620bf3e111e9e659ff1988b78daea8c}{void \hyperlink{class_session_info_ae620bf3e111e9e659ff1988b78daea8c}{insert\-Frame\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_frame_data_unit_package}{Picto\-::\-Frame\-Data\-Unit\-Package} $>$ data)}\label{class_session_info_ae620bf3e111e9e659ff1988b78daea8c}

\begin{DoxyCompactList}\small\item\em Inserts a Frame\-Data\-Unit\-Package record into the \hyperlink{class_cached_session_data}{Cached\-Session\-Data} and the record of the current Session state. The \hyperlink{class_cached_session_data}{Cached\-Session\-Data} will later be flushed to disk in \hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache()}. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_ae0e9984f6cfa55ef52307bf3fb6eed77}{void \hyperlink{class_session_info_ae0e9984f6cfa55ef52307bf3fb6eed77}{insert\-Reward\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_reward_data_unit}{Picto\-::\-Reward\-Data\-Unit} $>$ data)}\label{class_session_info_ae0e9984f6cfa55ef52307bf3fb6eed77}

\begin{DoxyCompactList}\small\item\em Inserts a Reward\-Data\-Unit record into the \hyperlink{class_cached_session_data}{Cached\-Session\-Data} and the record of the current Session state. The \hyperlink{class_cached_session_data}{Cached\-Session\-Data} will later be flushed to disk in \hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache()}. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_ae18c0245152db810b0efb443c08b0f1d}{void \hyperlink{class_session_info_ae18c0245152db810b0efb443c08b0f1d}{insert\-State\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_state_data_unit_package}{Picto\-::\-State\-Data\-Unit\-Package} $>$ data)}\label{class_session_info_ae18c0245152db810b0efb443c08b0f1d}

\begin{DoxyCompactList}\small\item\em Inserts a State\-Data\-Unit\-Package (Transition traversal) record into the \hyperlink{class_cached_session_data}{Cached\-Session\-Data} and the record of the current Session state. The \hyperlink{class_cached_session_data}{Cached\-Session\-Data} will later be flushed to disk in \hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache()}. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a5a8b4530a8514000bf7d911a687e8416}{void \hyperlink{class_session_info_a5a8b4530a8514000bf7d911a687e8416}{insert\-Task\-Run\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_task_run_data_unit}{Picto\-::\-Task\-Run\-Data\-Unit} $>$ data)}\label{class_session_info_a5a8b4530a8514000bf7d911a687e8416}

\begin{DoxyCompactList}\small\item\em Inserts a Task\-Run\-Data\-Unit record into the appropriate \hyperlink{class_session_data}{Session\-Data} objects. Also takes care of adding an end time to an already existing Task\-Run\-Data\-Unit record if the Task Run has ended. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_adb462c89e0224fdf982d4f2502501bc5}{void \hyperlink{class_session_info_adb462c89e0224fdf982d4f2502501bc5}{modify\-Task\-Run\-Data} (Q\-Shared\-Pointer$<$ \hyperlink{class_picto_1_1_task_run_data_unit}{Picto\-::\-Task\-Run\-Data\-Unit} $>$ data)}\label{class_session_info_adb462c89e0224fdf982d4f2502501bc5}

\begin{DoxyCompactList}\small\item\em Modifies an existing Task\-Run\-Data\-Unit database entry. This is used by the Workstation to change the Run name, notes, or saved value. \end{DoxyCompactList}\item 
Q\-String \hyperlink{class_session_info_af61711671c1a39e7cc6b817f98cbe33a}{select\-State\-Variables} (Q\-String from\-Time)
\begin{DoxyCompactList}\small\item\em Returns a serialized version of all State Variables that have changed since the input time. \end{DoxyCompactList}\item 
Q\-String \hyperlink{class_session_info_a3c856e16c6c903ac163c7df5f511a52c}{select\-Latest\-Neural\-Data} (Q\-String from\-Data\-Id)
\begin{DoxyCompactList}\small\item\em Returns a serialized version of all Neural data since the input time. \end{DoxyCompactList}\item 
Q\-String \hyperlink{class_session_info_a750b31c4440a6d5cad7de2f8c4e9c863}{select\-Session\-Data\-Package} ()
\begin{DoxyCompactList}\small\item\em Returns the latest Session\-Data\-Package for this Session in X\-M\-L serial form. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a34f3e6836539e5562c030a2b73316200}{Q\-Uuid \hyperlink{class_session_info_a34f3e6836539e5562c030a2b73316200}{session\-Id} ()}\label{class_session_info_a34f3e6836539e5562c030a2b73316200}

\begin{DoxyCompactList}\small\item\em Returns the Uuid used to identify this Session. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_ac7ff27ee2c53a38f625d9f4c5054999f}{Q\-String \hyperlink{class_session_info_ac7ff27ee2c53a38f625d9f4c5054999f}{data\-Base\-File\-Path} ()}\label{class_session_info_ac7ff27ee2c53a38f625d9f4c5054999f}

\begin{DoxyCompactList}\small\item\em Returns the filepath of the Sqlite file storing all of this Session's data. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a95110d3f741173fbf776def3b91d4d82}{Q\-String \hyperlink{class_session_info_a95110d3f741173fbf776def3b91d4d82}{time\-Created} ()}\label{class_session_info_a95110d3f741173fbf776def3b91d4d82}

\begin{DoxyCompactList}\small\item\em Return the time that this Session was created. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a2e1de58e8d906893dcc032d7e64a56ec}{Q\-Shared\-Pointer$<$ \hyperlink{class_alignment_tool}{Alignment\-Tool} $>$ \hyperlink{class_session_info_a2e1de58e8d906893dcc032d7e64a56ec}{alignment\-Tool} ()}\label{class_session_info_a2e1de58e8d906893dcc032d7e64a56ec}

\begin{DoxyCompactList}\small\item\em Returns a pointer to the \hyperlink{class_alignment_tool}{Alignment\-Tool} that calculates the alignment parameters used to synchronize neural and behavioral data. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a593b3687ba0495289109aa1b314ff718}{Q\-Byte\-Array \hyperlink{class_session_info_a593b3687ba0495289109aa1b314ff718}{experiment\-Xml} ()}\label{class_session_info_a593b3687ba0495289109aa1b314ff718}

\begin{DoxyCompactList}\small\item\em Returns the X\-M\-L that defines the design used in this Session. \end{DoxyCompactList}\item 
Q\-String \hyperlink{class_session_info_ae276671aa1731856342b9ca9ab4b5304}{pending\-Directive} (Q\-Uuid component\-I\-D)
\item 
\hypertarget{class_session_info_a2bd4edad0e169c5cd4e64723ade7208e}{void \hyperlink{class_session_info_a2bd4edad0e169c5cd4e64723ade7208e}{add\-Pending\-Directive} (Q\-String directive, Q\-String component\-Type)}\label{class_session_info_a2bd4edad0e169c5cd4e64723ade7208e}

\begin{DoxyCompactList}\small\item\em Adds the input directive to the pending\-Directives list for the component with the input type. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_ae7431425acb759a827c3a9124b0a8d24}{bool \hyperlink{class_session_info_ae7431425acb759a827c3a9124b0a8d24}{clear\-Activity} ()}\label{class_session_info_ae7431425acb759a827c3a9124b0a8d24}

\begin{DoxyCompactList}\small\item\em Clears the state of activity and returns it. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a6dc97be03b8702d3c69731d22549c0bd}{void \hyperlink{class_session_info_a6dc97be03b8702d3c69731d22549c0bd}{set\-Activity} ()}\label{class_session_info_a6dc97be03b8702d3c69731d22549c0bd}

\begin{DoxyCompactList}\small\item\em Marks this Session as active. This indicates that the Components that are part of this Session are still communicating with the \hyperlink{class_server}{Server} and the Session has not been ended. \end{DoxyCompactList}\item 
bool \hyperlink{class_session_info_a0ff76e3e53c97f45bbc9c48ce6171fa7}{is\-Authorized\-Observer} (Q\-Uuid observer\-Id)
\begin{DoxyCompactList}\small\item\em Determines if the observer with the passed in I\-D is authorized to issue commands and change the State of the Session. \end{DoxyCompactList}\item 
bool \hyperlink{class_session_info_aca010ce44ab021ce6b6a36ef6679f41f}{add\-Authorized\-Observer} (Q\-Uuid observer\-Id, Q\-String password)
\begin{DoxyCompactList}\small\item\em Adds the input observer\-Id to the list of authorized ids if the correct password is input. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a978758277af3afdc72344f9ae191a5d6}{Q\-String \hyperlink{class_session_info_a978758277af3afdc72344f9ae191a5d6}{get\-Password} ()}\label{class_session_info_a978758277af3afdc72344f9ae191a5d6}

\begin{DoxyCompactList}\small\item\em Returns the password that will give a Workstation access to change things about the Session and be more than a simple viewer. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_afee5f4251163bcef2300cfafe99688c4}{void \hyperlink{class_session_info_afee5f4251163bcef2300cfafe99688c4}{mark\-Last\-Data\-Time} (Q\-String source)}\label{class_session_info_afee5f4251163bcef2300cfafe99688c4}

\begin{DoxyCompactList}\small\item\em Marks the time that the latest data was written to this Session by the input source type (ie. \char`\"{}\-D\-I\-R\-E\-C\-T\-O\-R\char`\"{} or \char`\"{}\-P\-R\-O\-X\-Y\char`\"{}). \end{DoxyCompactList}\item 
\hypertarget{class_session_info_a5ed2bbb223d5a377502bf6b41f383c07}{bool \hyperlink{class_session_info_a5ed2bbb223d5a377502bf6b41f383c07}{last\-Data\-Preceded\-Flush} (Q\-String source)}\label{class_session_info_a5ed2bbb223d5a377502bf6b41f383c07}

\begin{DoxyCompactList}\small\item\em Returns whether the last data written from the input source preceded the beginning of the latest flush of R\-A\-M data to Disk. \end{DoxyCompactList}\item 
\hypertarget{class_session_info_ad92d5a3911badfa2278b0082c31a826b}{bool \hyperlink{class_session_info_ad92d5a3911badfa2278b0082c31a826b}{last\-Data\-Followed\-Flush} (Q\-String source)}\label{class_session_info_ad92d5a3911badfa2278b0082c31a826b}

\begin{DoxyCompactList}\small\item\em Returns whether the last data written from the input source followed the end of the latest flush of R\-A\-M data to Disk. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static Q\-Shared\-Pointer\\*
$<$ \hyperlink{class_session_info}{Session\-Info} $>$ \hyperlink{class_session_info_ab22e776e9d2e6047d8759a8e2d884fa4}{Create\-Session} (Q\-String design\-Name, Q\-String director\-Name, Q\-Byte\-Array design\-Xml, Q\-Byte\-Array Design\-Config, Q\-Uuid initial\-Observer\-Id, Q\-String password)
\begin{DoxyCompactList}\small\item\em Creates a new \hyperlink{class_session_info}{Session\-Info} object. \end{DoxyCompactList}\item 
static Q\-Shared\-Pointer\\*
$<$ \hyperlink{class_session_info}{Session\-Info} $>$ \hyperlink{class_session_info_a1f3c535a8c90e32cc0ec38caf2d0f42c}{Load\-Session} (Q\-String session\-I\-D, Q\-String database\-File\-Path)
\begin{DoxyCompactList}\small\item\em Loads the Session with the input session\-Id and the Sqlite Session file at the input database\-File\-Path and returns it. \end{DoxyCompactList}\item 
static void \hyperlink{class_session_info_a1a5929c7dfbfb94a18d7789c8c8ee6f2}{delete\-Session} (\hyperlink{class_session_info}{Session\-Info} $\ast$session)
\begin{DoxyCompactList}\small\item\em Handles session deletion while maintaining a list of loaded sessions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Friends}
\begin{DoxyCompactItemize}
\item 
\hypertarget{class_session_info_aaeb08ae6da3a23c3562ab2c1fcfa6a0a}{class {\bfseries Connection\-Manager}}\label{class_session_info_aaeb08ae6da3a23c3562ab2c1fcfa6a0a}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
Manages data for a single Session. Stores data needed for Session monitoring in R\-A\-M and Session data needed for future Analysis on Disk. 

The \hyperlink{namespace_picto}{Picto} \hyperlink{class_server}{Server} is designed to handle multiple concurrent sessions and to allow Sessions to timeout and be reloaded later. \hyperlink{class_session_info}{Session\-Info} objects help with this task by keeping track of a single Session and its associated data. They take care of things like\-:
\begin{DoxyItemize}
\item Writing data coming in from the \hyperlink{class_director}{Director} and Proxy to disk.
\item Storing the current values of all Properties in a Session design so that the workstation can quickly display the most up to date Experimental state
\item Managing timestamp alignment to synchonize Neural and Behavioral timestreams
\item Generating a Session\-Id
\item Loading data from a previously timed out Session
\item etc. The \hyperlink{class_session_info}{Session\-Info} class works closely with the \hyperlink{class_session_data}{Session\-Data} class and its descendants since objects of these classes store the bulk of the data that comes into the \hyperlink{class_session_info}{Session\-Info} object. This is a very important class. It is fairly central to the function of the \hyperlink{namespace_picto}{Picto} \hyperlink{class_server}{Server}. \begin{DoxyAuthor}{Author}
Joey Schnurr, Mark Hammond, Matt Gay 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
2009-\/2013 
\end{DoxyDate}

\end{DoxyItemize}

Definition at line 51 of file Session\-Info.\-h.



\subsection{Member Function Documentation}
\hypertarget{class_session_info_aca010ce44ab021ce6b6a36ef6679f41f}{\index{Session\-Info@{Session\-Info}!add\-Authorized\-Observer@{add\-Authorized\-Observer}}
\index{add\-Authorized\-Observer@{add\-Authorized\-Observer}!SessionInfo@{Session\-Info}}
\subsubsection[{add\-Authorized\-Observer}]{\setlength{\rightskip}{0pt plus 5cm}bool Session\-Info\-::add\-Authorized\-Observer (
\begin{DoxyParamCaption}
\item[{Q\-Uuid}]{observer\-Id, }
\item[{Q\-String}]{password}
\end{DoxyParamCaption}
)}}\label{class_session_info_aca010ce44ab021ce6b6a36ef6679f41f}


Adds the input observer\-Id to the list of authorized ids if the correct password is input. 

Returns true if the password was correct and the observer is authorized now 

Definition at line 467 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_abdc6f3d0225de15740712135d57d8c5f}{\index{Session\-Info@{Session\-Info}!align\-Timestamps\-To@{align\-Timestamps\-To}}
\index{align\-Timestamps\-To@{align\-Timestamps\-To}!SessionInfo@{Session\-Info}}
\subsubsection[{align\-Timestamps\-To}]{\setlength{\rightskip}{0pt plus 5cm}void Session\-Info\-::align\-Timestamps\-To (
\begin{DoxyParamCaption}
\item[{Q\-String}]{component\-Type}
\end{DoxyParamCaption}
)}}\label{class_session_info_abdc6f3d0225de15740712135d57d8c5f}


Sets the type of component to which other component types' timestamps should be aligned. If this is not called, component timestamps will not be aligned. 

Currently, the input should always be \char`\"{}\-D\-I\-R\-E\-C\-T\-O\-R\char`\"{}. 

Definition at line 376 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_ab22e776e9d2e6047d8759a8e2d884fa4}{\index{Session\-Info@{Session\-Info}!Create\-Session@{Create\-Session}}
\index{Create\-Session@{Create\-Session}!SessionInfo@{Session\-Info}}
\subsubsection[{Create\-Session}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Shared\-Pointer$<$ {\bf Session\-Info} $>$ Session\-Info\-::\-Create\-Session (
\begin{DoxyParamCaption}
\item[{Q\-String}]{design\-Name, }
\item[{Q\-String}]{director\-Name, }
\item[{Q\-Byte\-Array}]{design\-Xml, }
\item[{Q\-Byte\-Array}]{Design\-Config, }
\item[{Q\-Uuid}]{initial\-Observer\-Id, }
\item[{Q\-String}]{password}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_session_info_ab22e776e9d2e6047d8759a8e2d884fa4}


Creates a new \hyperlink{class_session_info}{Session\-Info} object. 


\begin{DoxyParams}{Parameters}
{\em design\-Name} & The name of the design that will be used in the Session. \\
\hline
{\em director\-Name} & The name of the \hyperlink{class_director}{Director} that will be used in the Session. \\
\hline
{\em design\-Xml} & The contents of the Design file that will be used in the Session. \\
\hline
{\em Design\-Config} & The serialized Design\-Config object that manages the Design used in this session. This contains information for identifying Assets from the Asset\-Ids and is useful for building Element/\-Transition/etc lookup tables in the session file. \\
\hline
{\em initial\-Observer\-Id} & The Uuid of the workstation that is starting this Session. It will be considered an Authorized observer (ie. It is authorized to make state changes to the Session). \\
\hline
{\em password} & The password that gives workstations authorization to change the Session state. \\
\hline
\end{DoxyParams}


Definition at line 46 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_a1a5929c7dfbfb94a18d7789c8c8ee6f2}{\index{Session\-Info@{Session\-Info}!delete\-Session@{delete\-Session}}
\index{delete\-Session@{delete\-Session}!SessionInfo@{Session\-Info}}
\subsubsection[{delete\-Session}]{\setlength{\rightskip}{0pt plus 5cm}void Session\-Info\-::delete\-Session (
\begin{DoxyParamCaption}
\item[{{\bf Session\-Info} $\ast$}]{session}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_session_info_a1a5929c7dfbfb94a18d7789c8c8ee6f2}


Handles session deletion while maintaining a list of loaded sessions. 

If a session is removed from the open\-Sessions list by the \hyperlink{class_connection_manager}{Connection\-Manager} but still hasn't been deleted since something with a shared pointer is stuck in a long operation, we want to make sure that nothing else reopens the session from file before the loaded session actually gets deleted. To do this, we maintain a loaded\-Sessions\-\_\- list that contains Q\-Weak\-Pointers to all currently loaded sessions. When Load\-Session is called, this list is checked first and if a session is found with the input session\-I\-D, the weak reference is converted to a regular shared pointer and returned. Viola! No duplicate copies of sessions.

This function takes care of actually removing the \hyperlink{class_session_info}{Session\-Info} weak pointer from the list when the last \hyperlink{class_session_info}{Session\-Info} strong smart pointer is cleared. \begin{DoxySeeAlso}{See Also}
\hyperlink{class_session_info_a1f3c535a8c90e32cc0ec38caf2d0f42c}{Load\-Session()} 
\end{DoxySeeAlso}


Definition at line 90 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_ae647cb4d792607c866654e8c908014e1}{\index{Session\-Info@{Session\-Info}!end\-Session@{end\-Session}}
\index{end\-Session@{end\-Session}!SessionInfo@{Session\-Info}}
\subsubsection[{end\-Session}]{\setlength{\rightskip}{0pt plus 5cm}bool Session\-Info\-::end\-Session (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_session_info_ae647cb4d792607c866654e8c908014e1}


Ends the session. 

Ending a session requires the following actions to be taken
\begin{DoxyItemize}
\item Add an end time in the sessioninfo
\item Realign timebases now that the entire Session's worth of data is available.
\item Create the various indeces in the Sqlite Session file that will speed up queries now that there is no danger of them slowing down data entry.
\item Flush all final cached data to the Sqlite file (\hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache()}). 
\end{DoxyItemize}

Definition at line 418 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{\index{Session\-Info@{Session\-Info}!flush\-Cache@{flush\-Cache}}
\index{flush\-Cache@{flush\-Cache}!SessionInfo@{Session\-Info}}
\subsubsection[{flush\-Cache}]{\setlength{\rightskip}{0pt plus 5cm}bool Session\-Info\-::flush\-Cache (
\begin{DoxyParamCaption}
\item[{Q\-String}]{source\-Type = {\ttfamily \char`\"{}\char`\"{}}}
\end{DoxyParamCaption}
)}}\label{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}


Dumps the R\-A\-M cached data into the file based Session database. 


\begin{DoxyParams}{Parameters}
{\em source\-Type} & The type of data source whose data will be written to the disk backed data base. Options are currently \char`\"{}\-D\-I\-R\-E\-C\-T\-O\-R\char`\"{}, \char`\"{}\-P\-R\-O\-X\-Y\char`\"{} or \char`\"{}\char`\"{}. In the case of the empty \char`\"{}\char`\"{} string, data from both the \hyperlink{class_director}{Director} and the Proxy will be written to disk.\\
\hline
\end{DoxyParams}
We buffer several seconds of data at a time in R\-A\-M for the purpose of avoiding the large S\-Q\-L overhead every time a S\-Q\-L write query is performed. We then save it to disk to that we won't lose data if \hyperlink{namespace_picto}{Picto} crashes. This function moves the contents of the R\-A\-M data to the file based session database.

This works closely with the Protocol\-Response system. That system tells \hyperlink{namespace_picto}{Picto} Components which of their commmands' data has been saved to disk (See Protocol\-Response\-::\-Registered\-Response\-Type). When a long time goes by without a Component hearing that its data has been written to disk, it sends it again. This way, we are sure that a \hyperlink{class_server}{Server} can crash and restart without any data being lost in the Session.

\begin{DoxyNote}{Note}
The table of current Property, etc Values is also written to disk so that we can correctly pick up where we left off if the \hyperlink{class_server}{Server} crashes and restarts.

The time at which the flush starts and ends are also carefully marked for use with \hyperlink{class_session_info_a5ed2bbb223d5a377502bf6b41f383c07}{last\-Data\-Preceded\-Flush()} and \hyperlink{class_session_info_ad92d5a3911badfa2278b0082c31a826b}{last\-Data\-Followed\-Flush()} which are necessary to be sure we tell the \hyperlink{namespace_picto}{Picto} components exactly which data has been written to disk in this multi-\/threaded environment.
\end{DoxyNote}
Returns true on success or false if nothing happened. 

Definition at line 538 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_acbb6ba7d4746d4cfe80777acd5f97997}{\index{Session\-Info@{Session\-Info}!has\-Active\-Components@{has\-Active\-Components}}
\index{has\-Active\-Components@{has\-Active\-Components}!SessionInfo@{Session\-Info}}
\subsubsection[{has\-Active\-Components}]{\setlength{\rightskip}{0pt plus 5cm}bool Session\-Info\-::has\-Active\-Components (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_session_info_acbb6ba7d4746d4cfe80777acd5f97997}


Returns true if any of the Components associated with this Session are currently active (ie. Attached to the \hyperlink{class_server}{Server} and reporting that they are working on this Session. 

\begin{DoxyNote}{Note}
If \hyperlink{class_session_info_a7a6a1c43babe1d1771e76123c24f0933}{ignore\-Components()} has been called, this will always return false. 
\end{DoxyNote}
\begin{DoxySeeAlso}{See Also}
\hyperlink{class_session_info_acc27036c722407afba5bf30965084fbb}{Update\-Component\-Activity()} 
\end{DoxySeeAlso}


Definition at line 339 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_ab46c5d064afd93d1e4ad8d01284c673b}{\index{Session\-Info@{Session\-Info}!insert\-Neural\-Data@{insert\-Neural\-Data}}
\index{insert\-Neural\-Data@{insert\-Neural\-Data}!SessionInfo@{Session\-Info}}
\subsubsection[{insert\-Neural\-Data}]{\setlength{\rightskip}{0pt plus 5cm}void Session\-Info\-::insert\-Neural\-Data (
\begin{DoxyParamCaption}
\item[{Q\-Shared\-Pointer$<$ {\bf Picto\-::\-Neural\-Data\-Unit} $>$}]{data}
\end{DoxyParamCaption}
)}}\label{class_session_info_ab46c5d064afd93d1e4ad8d01284c673b}


Inserts a Neural\-Data\-Unit record into the \hyperlink{class_cached_session_data}{Cached\-Session\-Data} and the record of the current Session state. The \hyperlink{class_cached_session_data}{Cached\-Session\-Data} will later be flushed to disk in \hyperlink{class_session_info_af4106254bbe6282aae6e79e3b92ece2b}{flush\-Cache()}. 

Use the alignment tool to fit the time 

Definition at line 598 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_a0ff76e3e53c97f45bbc9c48ce6171fa7}{\index{Session\-Info@{Session\-Info}!is\-Authorized\-Observer@{is\-Authorized\-Observer}}
\index{is\-Authorized\-Observer@{is\-Authorized\-Observer}!SessionInfo@{Session\-Info}}
\subsubsection[{is\-Authorized\-Observer}]{\setlength{\rightskip}{0pt plus 5cm}bool Session\-Info\-::is\-Authorized\-Observer (
\begin{DoxyParamCaption}
\item[{Q\-Uuid}]{observer\-Id}
\end{DoxyParamCaption}
)}}\label{class_session_info_a0ff76e3e53c97f45bbc9c48ce6171fa7}


Determines if the observer with the passed in I\-D is authorized to issue commands and change the State of the Session. 

This is a really simple means of setting permissions on the session. Effectively there are two levels of user\-: authorized, and unauthorized. This allows us to limit who is allowed to do things like issuing T\-A\-S\-K and E\-N\-D\-S\-E\-S\-S\-I\-O\-N commands and changing Experimental runtime Properties.

The authorized observers list contains all observers who are authorized at the higher permission level. However, there is a special case. If the list contains a null Uuid, then all observers (including those using null I\-Ds) are considered to be at the authorized level.

\begin{DoxyWarning}{Warning}
This is by no means a secure method of assigning permissions. Since all network communication is unencrypted, it would be trivial to intercept a valid observer I\-D, and then append it to spoofed commands. The password is also not encrypted on the \hyperlink{class_server}{Server} or Workstation. If you want real security, you'll need to rewrite this. 
\end{DoxyWarning}


Definition at line 453 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_a1f3c535a8c90e32cc0ec38caf2d0f42c}{\index{Session\-Info@{Session\-Info}!Load\-Session@{Load\-Session}}
\index{Load\-Session@{Load\-Session}!SessionInfo@{Session\-Info}}
\subsubsection[{Load\-Session}]{\setlength{\rightskip}{0pt plus 5cm}Q\-Shared\-Pointer$<$ {\bf Session\-Info} $>$ Session\-Info\-::\-Load\-Session (
\begin{DoxyParamCaption}
\item[{Q\-String}]{session\-I\-D, }
\item[{Q\-String}]{database\-File\-Path}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [static]}}}\label{class_session_info_a1f3c535a8c90e32cc0ec38caf2d0f42c}


Loads the Session with the input session\-Id and the Sqlite Session file at the input database\-File\-Path and returns it. 

Internally, if the \hyperlink{class_session_info}{Session\-Info} object for this session is already loaded, the function just returns it. If it isn't loaded, a new \hyperlink{class_session_info}{Session\-Info} object is created and all of the data from the Sqlite Session file is loaded into that object. 

Definition at line 59 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_ae276671aa1731856342b9ca9ab4b5304}{\index{Session\-Info@{Session\-Info}!pending\-Directive@{pending\-Directive}}
\index{pending\-Directive@{pending\-Directive}!SessionInfo@{Session\-Info}}
\subsubsection[{pending\-Directive}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Session\-Info\-::pending\-Directive (
\begin{DoxyParamCaption}
\item[{Q\-Uuid}]{component\-I\-D}
\end{DoxyParamCaption}
)}}\label{class_session_info_ae276671aa1731856342b9ca9ab4b5304}
Returns the Directive that should be sent to the Component with the input component\-Id.

Internally, there is a queue of pending directives. This function removes the first one from the queue and returns it. 

Definition at line 389 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_a3c856e16c6c903ac163c7df5f511a52c}{\index{Session\-Info@{Session\-Info}!select\-Latest\-Neural\-Data@{select\-Latest\-Neural\-Data}}
\index{select\-Latest\-Neural\-Data@{select\-Latest\-Neural\-Data}!SessionInfo@{Session\-Info}}
\subsubsection[{select\-Latest\-Neural\-Data}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Session\-Info\-::select\-Latest\-Neural\-Data (
\begin{DoxyParamCaption}
\item[{Q\-String}]{from\-Data\-Id}
\end{DoxyParamCaption}
)}}\label{class_session_info_a3c856e16c6c903ac163c7df5f511a52c}


Returns a serialized version of all Neural data since the input time. 

\begin{DoxySeeAlso}{See Also}
\hyperlink{class_session_info_af61711671c1a39e7cc6b817f98cbe33a}{select\-State\-Variables()} 
\end{DoxySeeAlso}


Definition at line 923 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_a750b31c4440a6d5cad7de2f8c4e9c863}{\index{Session\-Info@{Session\-Info}!select\-Session\-Data\-Package@{select\-Session\-Data\-Package}}
\index{select\-Session\-Data\-Package@{select\-Session\-Data\-Package}!SessionInfo@{Session\-Info}}
\subsubsection[{select\-Session\-Data\-Package}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Session\-Info\-::select\-Session\-Data\-Package (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_session_info_a750b31c4440a6d5cad7de2f8c4e9c863}


Returns the latest Session\-Data\-Package for this Session in X\-M\-L serial form. 

The Session\-Data\-Package includes data about all Task Runs that have occured in this Session. 

Definition at line 954 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_af61711671c1a39e7cc6b817f98cbe33a}{\index{Session\-Info@{Session\-Info}!select\-State\-Variables@{select\-State\-Variables}}
\index{select\-State\-Variables@{select\-State\-Variables}!SessionInfo@{Session\-Info}}
\subsubsection[{select\-State\-Variables}]{\setlength{\rightskip}{0pt plus 5cm}Q\-String Session\-Info\-::select\-State\-Variables (
\begin{DoxyParamCaption}
\item[{Q\-String}]{from\-Time}
\end{DoxyParamCaption}
)}}\label{class_session_info_af61711671c1a39e7cc6b817f98cbe33a}


Returns a serialized version of all State Variables that have changed since the input time. 

We use a single table to track the latest state of all variables pertinant to running a picto workstation. Using this table, we can assure requests for the latest picto state will have constant runtime independant of the previous runtime of the current experiment. New variable values always update existing values with the same id if their timestamp is greater than that of their predecessor. Calling select\-State\-Variables will return a string that can be sent to a workstation. This string contains all of the state\-Variables that have changed after (not including) the input time. The format of the returned variables is just the serialization that the director used when sending them to the server. 

Definition at line 911 of file Session\-Info.\-cpp.

\hypertarget{class_session_info_acc27036c722407afba5bf30965084fbb}{\index{Session\-Info@{Session\-Info}!Update\-Component\-Activity@{Update\-Component\-Activity}}
\index{Update\-Component\-Activity@{Update\-Component\-Activity}!SessionInfo@{Session\-Info}}
\subsubsection[{Update\-Component\-Activity}]{\setlength{\rightskip}{0pt plus 5cm}void Session\-Info\-::\-Update\-Component\-Activity (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{class_session_info_acc27036c722407afba5bf30965084fbb}


Called periodically to update the stored information about the Session's Components in the Session database. 

If the component is still attached to the \hyperlink{class_server}{Server}, it is set as either Active or Inactive in this Session depending on whether it reports that it is attached to the current Session or to some other Session. 

Definition at line 309 of file Session\-Info.\-cpp.



The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
source/server/connections/Session\-Info.\-h\item 
source/server/connections/Session\-Info.\-cpp\end{DoxyCompactItemize}
