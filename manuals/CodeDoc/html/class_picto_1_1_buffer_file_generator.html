<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Picto: Picto::BufferFileGenerator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="pictodoc.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Picto
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Picto</b></li><li class="navelem"><a class="el" href="class_picto_1_1_buffer_file_generator.html">BufferFileGenerator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_picto_1_1_buffer_file_generator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Picto::BufferFileGenerator Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Creates temporary files in a temporary directory that is cleared everytime a new Pictoworkstation is opened so long as no other workstations were already open at the time.  
 <a href="class_picto_1_1_buffer_file_generator.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_buffer_file_generator_8h_source.html">BufferFileGenerator.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:afa04c82713737e28dc38e0d6d28445d1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afa04c82713737e28dc38e0d6d28445d1"></a>
static QSharedPointer&lt; QFile &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_buffer_file_generator.html#afa04c82713737e28dc38e0d6d28445d1">createTempFile</a> (QString subDirName, QString fileType)</td></tr>
<tr class="memdesc:afa04c82713737e28dc38e0d6d28445d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a temporary file in the subDirName sub-directory of the "TemporaryFiles" directory in the Picto run path and returns a shared pointer to the file. <br /></td></tr>
<tr class="separator:afa04c82713737e28dc38e0d6d28445d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:a84f475e6e23c897d83773b488b0379b3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a84f475e6e23c897d83773b488b0379b3"></a>
static QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_buffer_file_generator.html#a84f475e6e23c897d83773b488b0379b3">createSubDirectory</a> (QString subDirName)</td></tr>
<tr class="memdesc:a84f475e6e23c897d83773b488b0379b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a subdirectory called subDirName within the statically generated temporary directory ("TemporaryFiles") and returns its absolute path. <br /></td></tr>
<tr class="separator:a84f475e6e23c897d83773b488b0379b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7ad093ade390437ef99d8aada3ccd7a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_buffer_file_generator.html#aa7ad093ade390437ef99d8aada3ccd7a">initTempOutputDir</a> ()</td></tr>
<tr class="memdesc:aa7ad093ade390437ef99d8aada3ccd7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an empty temporary directory ("TemporaryFiles") in the runpath once per executable run, clearing out any previous contents if there were any.  <a href="#aa7ad093ade390437ef99d8aada3ccd7a">More...</a><br /></td></tr>
<tr class="separator:aa7ad093ade390437ef99d8aada3ccd7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af54ca05b0febd4013ed7a089c2662057"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_buffer_file_generator.html#af54ca05b0febd4013ed7a089c2662057">removeFilesThenDirectories</a> (QDir container)</td></tr>
<tr class="memdesc:af54ca05b0febd4013ed7a089c2662057"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes everything in the input directory and all of its sub directories.  <a href="#af54ca05b0febd4013ed7a089c2662057">More...</a><br /></td></tr>
<tr class="separator:af54ca05b0febd4013ed7a089c2662057"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a4ed30a522b24f7bed310884d76768d6e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ed30a522b24f7bed310884d76768d6e"></a>
static QString&#160;</td><td class="memItemRight" valign="bottom"><b>outputDir_</b></td></tr>
<tr class="separator:a4ed30a522b24f7bed310884d76768d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae19c1f39e136d56b8c40948de605ef6f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae19c1f39e136d56b8c40948de605ef6f"></a>
static QSharedPointer&lt; QFile &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>lockFile_</b></td></tr>
<tr class="separator:ae19c1f39e136d56b8c40948de605ef6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Creates temporary files in a temporary directory that is cleared everytime a new Pictoworkstation is opened so long as no other workstations were already open at the time. </p>
<p>A "TemporaryFiles" directory is created in the Picto run directory and a "lock file" is created and placed inside that isn't closed until the application closes. Each time a PictoWorkstation is opened, the temporary director is checked, if the lock files can be deleted, the files in the directory are deleted as well. Otherwise temporary files are simply added to the existing temporary directory. </p><dl class="section note"><dt>Note</dt><dd>We need to use this type of set up in a few different places in Picto. For playback video files, for <a class="el" href="class_picto_1_1_analysis_file_output.html" title="A simple AnalysisOutput object used for writing text or binary data to files. ">AnalysisFileOutput</a> files, and for design AutoSaved files. So far we have only used this <a class="el" href="class_picto_1_1_buffer_file_generator.html" title="Creates temporary files in a temporary directory that is cleared everytime a new Pictoworkstation is ...">BufferFileGenerator</a> for the playback video files (<a class="el" href="class_picto_1_1_recording_visual_target_host.html" title="This adds video file recording functionality onto the regular VisualTargetHost functionality. ">RecordingVisualTargetHost</a>). We should probably reuse it in all those places though. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Trevor Stavropoulos, Joey Schnurr, Mark Hammond, Matt Gay </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2009-2015 </dd></dl>

<p>Definition at line <a class="el" href="_buffer_file_generator_8h_source.html#l00029">29</a> of file <a class="el" href="_buffer_file_generator_8h_source.html">BufferFileGenerator.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa7ad093ade390437ef99d8aada3ccd7a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BufferFileGenerator::initTempOutputDir </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates an empty temporary directory ("TemporaryFiles") in the runpath once per executable run, clearing out any previous contents if there were any. </p>
<p>We want to make sure that even if multiple Picto applications are open at the same time, no one will remove the data that we are currently using. We also want to erase the data if we are just opening for the first time and no one else is using the data in the temporary folder. For this reason, we attempt to remove all files at the top level of the temporary directory, then if successful, remove all other contained directories as well. We then create a top level file in the temporary directory and leave it open until the application closes. If another workstation is open, we won't succeed in removing its open file so we wont delete the temporary directory contents, otherwise, we will. </p>

<p>Definition at line <a class="el" href="_buffer_file_generator_8cpp_source.html#l00053">53</a> of file <a class="el" href="_buffer_file_generator_8cpp_source.html">BufferFileGenerator.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="af54ca05b0febd4013ed7a089c2662057"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BufferFileGenerator::removeFilesThenDirectories </td>
          <td>(</td>
          <td class="paramtype">QDir&#160;</td>
          <td class="paramname"><em>container</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Removes everything in the input directory and all of its sub directories. </p>
<p>Stops at any level where a file cannot be removed. </p>

<p>Definition at line <a class="el" href="_buffer_file_generator_8cpp_source.html#l00085">85</a> of file <a class="el" href="_buffer_file_generator_8cpp_source.html">BufferFileGenerator.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>source/common/iodevices/<a class="el" href="_buffer_file_generator_8h_source.html">BufferFileGenerator.h</a></li>
<li>source/common/iodevices/<a class="el" href="_buffer_file_generator_8cpp_source.html">BufferFileGenerator.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
