<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Picto: source/director/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="pictodoc.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Picto
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_f2af0cb429114bb85e0ee4a3394224b8.html">director</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>PictoDirector is the application that presents stimuli and collects the behavioral data. It runs the <a class="el" href="namespace_picto.html" title="A compositing surface for Direct3D Mobile (used on PictoBox) ">Picto</a> "game.".  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;QApplication&gt;</code><br/>
<code>#include &lt;QTranslator&gt;</code><br/>
<code>#include &lt;QMessageBox&gt;</code><br/>
<code>#include &lt;QSharedPointer&gt;</code><br/>
<code>#include &quot;<a class="el" href="globals_8h_source.html">../common/globals.h</a>&quot;</code><br/>
<code>#include &quot;../common/update/updatedownloader.h&quot;</code><br/>
<code>#include &quot;HardwareSetup.h&quot;</code><br/>
<code>#include &quot;Director.h&quot;</code><br/>
<code>#include &quot;../common/mainmemleakdetect.h&quot;</code><br/>
</div>
<p><a href="director_2main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6ef90ae12bd754b68b0de66e4f089f16"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ef90ae12bd754b68b0de66e4f089f16"></a>
QSharedPointer<br class="typebreak"/>
&lt; <a class="el" href="class_picto_1_1_command_channel.html">Picto::CommandChannel</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>connectToServer</b> (QUuid directorID)</td></tr>
<tr class="separator:a6ef90ae12bd754b68b0de66e4f089f16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac26a2d1a381e73682141825df226958b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac26a2d1a381e73682141825df226958b"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setUserInfo</b> (QSharedPointer&lt; <a class="el" href="class_picto_1_1_engine_1_1_picto_engine.html">Picto::Engine::PictoEngine</a> &gt; engine, QString status)</td></tr>
<tr class="separator:ac26a2d1a381e73682141825df226958b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="director_2main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="memdesc:a0ddf1224851353fc92bfbff6f499fa97"><td class="mdescLeft">&#160;</td><td class="mdescRight">The main method of the <a class="el" href="namespace_picto.html" title="A compositing surface for Direct3D Mobile (used on PictoBox) ">Picto</a> <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> application.  <a href="#a0ddf1224851353fc92bfbff6f499fa97">More...</a><br/></td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>PictoDirector is the application that presents stimuli and collects the behavioral data. It runs the <a class="el" href="namespace_picto.html" title="A compositing surface for Direct3D Mobile (used on PictoBox) ">Picto</a> "game.". </p>
<p><a class="el" href="namespace_picto.html" title="A compositing surface for Direct3D Mobile (used on PictoBox) ">Picto</a> <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> is one of the major components of the <a class="el" href="namespace_picto.html" title="A compositing surface for Direct3D Mobile (used on PictoBox) ">Picto</a> system. This software is responsible for presenting Experimental stimuli, collecting behavioral data from the test subject, and controlling the flow of the experiment by running the StateMachine. The <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> communicates with PictoServer during the experiment, receives commands and sends over all Experimental data in real time.</p>
<p>Upon booting, the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> first sets up the hardware interface to match the system on which it is running (currently this is limited to a PictoBox or a legacy Orion computer). Next, it attempts to connect to a PictoServer instance. Once connected, it sits in a loop sending COMPONENTUPDATE "keep alive" commands periodically. The responses to these commands may include "directives" which tell the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> to do something (start an experiment, deliver a reward, etc).</p>
<p>In its current state, PictoDirector is really only capable of running on Windows. However, this was not how the application was intended to work. In theory, PictoDirector should be able to run on other Operating systems as well. If QT supported everything that we wanted to do, this would be trivial. In practice though, we need to communicate with the NiDaq card, the <a class="el" href="class_phidgets.html" title="Provides an interface to the Phidgets devices used by the FrontPanel Application. ...">Phidgets</a> devices, and render at high speed with precise timing to the display. None of these operations are supporte in Qt, so supporting other OSes will necessitate writing the classes that handle those operations for the other OS.</p>
<p>Command line arguments:</p>
<ul>
<li>-name: Set the name of this <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> instance to the string argument immediately following "-name "</li>
<li>-systemNumber: Sets the system number to the number immediately following "-systemNumber ". A <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> can communicate only with a PictoServer running with the same system number</li>
<li>-pixmap: If this is included, Pixmap rendering will be used instead of DirectX rendering. This makes timing less precise, but is good for testing since it is a little kinder about things like taking over as the main window and generally allowing for other things to happen on the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> computer. It is also usable over remote desktop.</li>
<li>-xChan: The number argument following this one defines the analog input channel on which the x coordinate of eye position data will come in. If xChan and yChan are not used, the mouse will be used for position input.</li>
<li>-yChan: The number argument following this one defines the analog input channel on which the y coordinate of eye position data will come in. If xChan and yChan are not used, the mouse will be used for position input.</li>
<li>-xDiamChan: The number argument following this one defines the analog input channel on which the x coordinate of eye diameter data will come in. Don't use this if eye diameter is not tracked.</li>
<li>-yDiamChan: The number argument following this one defines the analog input channel on which the y coordinate of eye diameter data will come in. Don't use this if eye diameter is not tracked.</li>
<li>-positionPeriod: The number argument following this one defines the sample period per eye position sample. For example, "-positionPeriod 2" sets up the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> to sample eye position data once every 2 ms.</li>
<li>-diamPeriod: The number argument following this one defines the sample period per eye diameter sample. For example, "-diamPeriod 4" sets up the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> to sample eye diameter data once every 4 ms.</li>
<li>-legacy: Sets the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> to interface with Orion computer hardware for its RewardController, EventCodeGenerator and AnalogInputPort (no OutputSignalController is supported). Note that the hardware line that controlles the reward box still needs to be moved to a different pin that was used in Orion. See LegacySystemXPRewardController for more details. Use only one of legacy, pictobox, or test.</li>
<li>-pictobox: Sets the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> to interface with Pictobox computer hardware for its RewardController, EventCodeGenerator, AnalogInputPort, and OutputSignalController. Use only one of legacy, pictobox, or test.</li>
<li>-test: Sets the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> to use an AudioRewardController, MouseSignalChannel and no event or output controllers. Use only one of legacy, pictobox, or test.</li>
<li>-onesided: When this is used there will be no alignment or gathering of neural data. This means that the parallel port usually used to send alignment events to the neural system will be available as a secondary OutputSignal port to the experiment developer referred to as PAR0. <dl class="section author"><dt>Author</dt><dd>Joey Schnurr, Mark Hammond, Matt Gay </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2009-2013 </dd></dl>
</li>
</ul>

<p>Definition in file <a class="el" href="director_2main_8cpp_source.html">main.cpp</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The main method of the <a class="el" href="namespace_picto.html" title="A compositing surface for Direct3D Mobile (used on PictoBox) ">Picto</a> <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> application. </p>
<p>Goes through standard <a class="el" href="namespace_picto.html" title="A compositing surface for Direct3D Mobile (used on PictoBox) ">Picto</a> application setup procedure, setting up the QApplication, the QTranslator, and calling <a class="el" href="namespace_picto.html#ab626f6cf7953f6f0c2947f0f03b8e62e" title="Initializes the Picto library. ">Picto::InitializeLib()</a> and Picto::IniitializePorts(), then parses the command line for Hardware setup data which will be used in the construction of the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> object. After parsing command line options, the AutoUpdater system is setup with the commands that will be needed to restart this application, then the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> object is created and its <a class="el" href="class_component_interface.html#aa5114fa432d4102e697b808c986a59bd" title="Called to activate this component and run this component. ">Director::activate()</a> function is called.</p>
<p><a class="el" href="class_component_interface.html#aa5114fa432d4102e697b808c986a59bd" title="Called to activate this component and run this component. ">Director::activate()</a> doesn't return until the application closes. </p>

<p>Definition at line <a class="el" href="director_2main_8cpp_source.html#l00085">85</a> of file <a class="el" href="director_2main_8cpp_source.html">main.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jan 26 2014 17:03:39 for Picto by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
