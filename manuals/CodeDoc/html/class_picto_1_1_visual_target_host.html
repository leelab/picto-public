<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Picto: Picto::VisualTargetHost Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="pictodoc.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Picto
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>Picto</b></li><li class="navelem"><a class="el" href="class_picto_1_1_visual_target_host.html">VisualTargetHost</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#signals">Signals</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-slots">Private Slots</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_picto_1_1_visual_target_host-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Picto::VisualTargetHost Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A Widget that contains a Visual Target.  
 <a href="class_picto_1_1_visual_target_host.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_visual_target_host_8h_source.html">VisualTargetHost.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Picto::VisualTargetHost:</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_picto_1_1_visual_target_host.png" usemap="#Picto::VisualTargetHost_map" alt=""/>
  <map id="Picto::VisualTargetHost_map" name="Picto::VisualTargetHost_map">
<area href="class_picto_1_1_recording_visual_target_host.html" title="This adds video file recording functionality onto the regular VisualTargetHost functionality. " alt="Picto::RecordingVisualTargetHost" shape="rect" coords="0,112,200,136"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="signals"></a>
Signals</h2></td></tr>
<tr class="memitem:a3bfbf7373ba441163867709b42f84b69"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3bfbf7373ba441163867709b42f84b69"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_visual_target_host.html#a3bfbf7373ba441163867709b42f84b69">clickDetected</a> (QPoint pos)</td></tr>
<tr class="memdesc:a3bfbf7373ba441163867709b42f84b69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emitted with a click position whenever someone clicks within the <a class="el" href="class_picto_1_1_visual_target_host.html" title="A Widget that contains a Visual Target. ">VisualTargetHost</a> widget. <br /></td></tr>
<tr class="separator:a3bfbf7373ba441163867709b42f84b69"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ae2978c6aa41648aadff1b5357df8e43a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae2978c6aa41648aadff1b5357df8e43a"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>resizeEvent</b> (QResizeEvent *event)</td></tr>
<tr class="separator:ae2978c6aa41648aadff1b5357df8e43a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41d34ca0cff45eddfb8b164407bff116"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a41d34ca0cff45eddfb8b164407bff116"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_visual_target_host.html#a41d34ca0cff45eddfb8b164407bff116">setVisualTarget</a> (QSharedPointer&lt; <a class="el" href="class_picto_1_1_visual_target.html">VisualTarget</a> &gt; target)</td></tr>
<tr class="memdesc:a41d34ca0cff45eddfb8b164407bff116"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> object that will be hosted by this <a class="el" href="class_picto_1_1_visual_target_host.html" title="A Widget that contains a Visual Target. ">VisualTargetHost</a>. <br /></td></tr>
<tr class="separator:a41d34ca0cff45eddfb8b164407bff116"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a375c688433f74774ea9664fbe62b147d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a375c688433f74774ea9664fbe62b147d"></a>
QSharedPointer&lt; <a class="el" href="class_picto_1_1_visual_target.html">VisualTarget</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_visual_target_host.html#a375c688433f74774ea9664fbe62b147d">getVisualTarget</a> ()</td></tr>
<tr class="memdesc:a375c688433f74774ea9664fbe62b147d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> hosted by this <a class="el" href="class_picto_1_1_visual_target_host.html" title="A Widget that contains a Visual Target. ">VisualTargetHost</a>. <br /></td></tr>
<tr class="separator:a375c688433f74774ea9664fbe62b147d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:adee5a34fd8bd737e71f17d47ff97d3fd"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_visual_target_host.html#adee5a34fd8bd737e71f17d47ff97d3fd">paintEvent</a> (QPaintEvent *)</td></tr>
<tr class="memdesc:adee5a34fd8bd737e71f17d47ff97d3fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Paints the underlying <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> objects frame onto this object.  <a href="#adee5a34fd8bd737e71f17d47ff97d3fd">More...</a><br /></td></tr>
<tr class="separator:adee5a34fd8bd737e71f17d47ff97d3fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7259d491789462b787cfad331b4bcef"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac7259d491789462b787cfad331b4bcef"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_visual_target_host.html#ac7259d491789462b787cfad331b4bcef">mousePressEvent</a> (QMouseEvent *event)</td></tr>
<tr class="memdesc:ac7259d491789462b787cfad331b4bcef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Emits a clickDetected signal whenever someone clicks on this window. <br /></td></tr>
<tr class="separator:ac7259d491789462b787cfad331b4bcef"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-slots"></a>
Private Slots</h2></td></tr>
<tr class="memitem:a5139912cf7a6b6c47fc6b3421fb3c35f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_picto_1_1_visual_target_host.html#a5139912cf7a6b6c47fc6b3421fb3c35f">presented</a> (double frameTime)</td></tr>
<tr class="memdesc:a5139912cf7a6b6c47fc6b3421fb3c35f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Causes this <a class="el" href="class_picto_1_1_visual_target_host.html" title="A Widget that contains a Visual Target. ">VisualTargetHost</a> to be repainted.  <a href="#a5139912cf7a6b6c47fc6b3421fb3c35f">More...</a><br /></td></tr>
<tr class="separator:a5139912cf7a6b6c47fc6b3421fb3c35f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a3c6c61774058f25b6b365025296ac49a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3c6c61774058f25b6b365025296ac49a"></a>
QSharedPointer&lt; <a class="el" href="class_picto_1_1_visual_target.html">VisualTarget</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>target_</b></td></tr>
<tr class="separator:a3c6c61774058f25b6b365025296ac49a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A Widget that contains a Visual Target. </p>
<dl class="section note"><dt>Note</dt><dd>Joey: This object seems to have been created due to an incomplete understanding of the QWidget system. Whenever a QWidget is deleted, all of its descendant QWidgets are automatically deleted as well. For some reason, the <a class="el" href="struct_picto_1_1_rendering_target.html" title="This is a top level container acting as a single location to access all of the various objects that a...">RenderingTarget</a> object is holding a shared pointer to its <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> object which also automatically deletes the <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> when it is deleted. Apparently, the idea behind this object is to never actually set a parent to the <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> in the QWidget system so that we can just use the QSharedPointer system to delete it. Probably, in practice we just should never be using QSharedPointer's on VisualTargets and we should parent it within the QWidget system the way we are supposed to. In practice though, since the current system works, and we don't have time to fix it, we are going to leave it alone for now. If you want to fix it though, go for it. The original notes on this class appear below for your reference.</dd></dl>
<p>This object needs some explanation. If we want to run an engine and place a <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> within another widget, the obvious approach would be: QSharedPointer&lt;VisualTarget&gt; visualTarget(new VisualTarget()); .... QSharedPointer&lt;RenderingTarget&gt; renderingTarget(new RenderingTarget(visualTarget, auralTarget)); ... mainLayout-&gt;addWidget(visualTarget.data()); However, this approach will blow up during destruction. The visual target will be deleted twice. Once when the rendering target is deleted (because it holds the only strong reference), and once when the main window is deleted (because the visual target was reparented when it was added to the layout). Needless to say, the second call to delete results in a memory exception.</p>
<p>This object works around this problem by holding a strong reference to the pointer, and drawing the Visual Target directly (without reparenting it).</p>
<p>NOTE: As a result of this situation, I have come to the conclusion that it is generally a bad idea to create QSharedPointer&lt;QWidget&gt;, because both QWidgets and QSharedPointers have lots of automatic calls to delete that occur behind the scenes. </p><dl class="section note"><dt>Note</dt><dd>That was the end of the original notes </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Trevor Stavropoulos, Joey Schnurr, Mark Hammond, Matt Gay </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2009-2015 </dd></dl>

<p>Definition at line <a class="el" href="_visual_target_host_8h_source.html#l00056">56</a> of file <a class="el" href="_visual_target_host_8h_source.html">VisualTargetHost.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="adee5a34fd8bd737e71f17d47ff97d3fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Picto::VisualTargetHost::paintEvent </td>
          <td>(</td>
          <td class="paramtype">QPaintEvent *&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Paints the underlying <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> objects frame onto this object. </p>
<p>This is called by the QWidget hierearchy whenever this widget needs to be repainted. Since this objects whole Raison d'etre is to work around the QWidget system, we need to fake the QWidget parent relationship by manually drawing the <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> "child" object's frame onto this object </p>

<p>Reimplemented in <a class="el" href="class_picto_1_1_recording_visual_target_host.html#ac636397e7740a51ad0ef9ffc3a899333">Picto::RecordingVisualTargetHost</a>.</p>

<p>Definition at line <a class="el" href="_visual_target_host_8cpp_source.html#l00038">38</a> of file <a class="el" href="_visual_target_host_8cpp_source.html">VisualTargetHost.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5139912cf7a6b6c47fc6b3421fb3c35f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Picto::VisualTargetHost::presented </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>frameTime</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">slot</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Causes this <a class="el" href="class_picto_1_1_visual_target_host.html" title="A Widget that contains a Visual Target. ">VisualTargetHost</a> to be repainted. </p>
<p>Whenever the underlying <a class="el" href="class_picto_1_1_visual_target.html" title="The surface on which all graphics are rendered. ">VisualTarget</a> is repainted, this object needs to be repainted too. With the regular QWidget hierarchy, this would happen automatically, but here we are faking that hierarchy so we do it manually. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_picto_1_1_visual_target_host.html#adee5a34fd8bd737e71f17d47ff97d3fd" title="Paints the underlying VisualTarget objects frame onto this object. ">paintEvent</a> </dd></dl>

<p>Definition at line <a class="el" href="_visual_target_host_8cpp_source.html#l00070">70</a> of file <a class="el" href="_visual_target_host_8cpp_source.html">VisualTargetHost.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>source/common/compositor/<a class="el" href="_visual_target_host_8h_source.html">VisualTargetHost.h</a></li>
<li>source/common/compositor/<a class="el" href="_visual_target_host_8cpp_source.html">VisualTargetHost.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
