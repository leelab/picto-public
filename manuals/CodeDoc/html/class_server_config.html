<!-- HTML header for doxygen 1.8.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Picto: ServerConfig Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="pictodoc.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Picto
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="class_server_config-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">ServerConfig Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_server_config.html" title="ServerConfig handles the configuration of a PictoServer. ">ServerConfig</a> handles the configuration of a PictoServer.  
 <a href="class_server_config.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_server_config_8h_source.html">ServerConfig.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af61bcd662c3be06dd4219770350e65e6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server_config.html#af61bcd662c3be06dd4219770350e65e6">ServerConfig</a> ()</td></tr>
<tr class="memdesc:af61bcd662c3be06dd4219770350e65e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructs a <a class="el" href="class_server_config.html" title="ServerConfig handles the configuration of a PictoServer. ">ServerConfig</a> object.  <a href="#af61bcd662c3be06dd4219770350e65e6">More...</a><br /></td></tr>
<tr class="separator:af61bcd662c3be06dd4219770350e65e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb3cc44cbd2fca32dd9914bb481ba708"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb3cc44cbd2fca32dd9914bb481ba708"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server_config.html#abb3cc44cbd2fca32dd9914bb481ba708">addSession</a> (QString sessionID, QString filepath, QString directorID, QString proxyID)</td></tr>
<tr class="memdesc:abb3cc44cbd2fca32dd9914bb481ba708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a session into the open sessions list. Stored data includes the Session's ID, filepath and the IDs of the <a class="el" href="class_director.html" title="Defines an object that runs a Picto Experiment for a test subject, transmits experimental data to the...">Director</a> and Proxy that are used in the Session. <br /></td></tr>
<tr class="separator:abb3cc44cbd2fca32dd9914bb481ba708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab61785553877dc52c09a72df32178963"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab61785553877dc52c09a72df32178963"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server_config.html#ab61785553877dc52c09a72df32178963">removeSession</a> (QString sessionID)</td></tr>
<tr class="memdesc:ab61785553877dc52c09a72df32178963"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the session with the input ID from the config database. <br /></td></tr>
<tr class="separator:ab61785553877dc52c09a72df32178963"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b374738ea1e49524707831e9a3e9eb5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b374738ea1e49524707831e9a3e9eb5"></a>
QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server_config.html#a2b374738ea1e49524707831e9a3e9eb5">getSessionPathByID</a> (QString sessionID)</td></tr>
<tr class="memdesc:a2b374738ea1e49524707831e9a3e9eb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the filepath of the database for the session with input ID. <br /></td></tr>
<tr class="separator:a2b374738ea1e49524707831e9a3e9eb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a868a40ae84ee613f8cc464a74216163a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a868a40ae84ee613f8cc464a74216163a"></a>
QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server_config.html#a868a40ae84ee613f8cc464a74216163a">getSessionPathByComponent</a> (QString componentID)</td></tr>
<tr class="memdesc:a868a40ae84ee613f8cc464a74216163a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the filepath of the database for the Session associated with the input component. <br /></td></tr>
<tr class="separator:a868a40ae84ee613f8cc464a74216163a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cbe4938f0593b69debed87c2e744699"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4cbe4938f0593b69debed87c2e744699"></a>
QString&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server_config.html#a4cbe4938f0593b69debed87c2e744699">getSessionIDByComponent</a> (QString componentID)</td></tr>
<tr class="memdesc:a4cbe4938f0593b69debed87c2e744699"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the sessionID of the Session associated with the input component. <br /></td></tr>
<tr class="separator:a4cbe4938f0593b69debed87c2e744699"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5169a1d3ba39ad1f64998d6d1a9eb3a1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server_config.html#a5169a1d3ba39ad1f64998d6d1a9eb3a1">setActivity</a> (QString sessionID, bool running)</td></tr>
<tr class="memdesc:a5169a1d3ba39ad1f64998d6d1a9eb3a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the lastactivity field for the input session to the current time and changes the running field to the input value.  <a href="#a5169a1d3ba39ad1f64998d6d1a9eb3a1">More...</a><br /></td></tr>
<tr class="separator:a5169a1d3ba39ad1f64998d6d1a9eb3a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35c54a2cbfd98f53105ee36d4176663e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a35c54a2cbfd98f53105ee36d4176663e"></a>
QStringList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server_config.html#a35c54a2cbfd98f53105ee36d4176663e">getRunningSessions</a> ()</td></tr>
<tr class="memdesc:a35c54a2cbfd98f53105ee36d4176663e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of all sessions with "running" field of true (ie. They have not timed out). <br /></td></tr>
<tr class="separator:a35c54a2cbfd98f53105ee36d4176663e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99f5a212ba07712ad3e7f109c4c0325b"><td class="memItemLeft" align="right" valign="top">QStringList&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_server_config.html#a99f5a212ba07712ad3e7f109c4c0325b">getSessionsIdledBefore</a> (QDateTime time)</td></tr>
<tr class="memdesc:a99f5a212ba07712ad3e7f109c4c0325b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of all sessions with "running" field of false and lastactivity time before the input time.  <a href="#a99f5a212ba07712ad3e7f109c4c0325b">More...</a><br /></td></tr>
<tr class="separator:a99f5a212ba07712ad3e7f109c4c0325b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7b979bbfc9b75ebdd631ab07d4bb50f5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b979bbfc9b75ebdd631ab07d4bb50f5"></a>
QSqlDatabase&#160;</td><td class="memItemRight" valign="bottom"><b>configDb_</b></td></tr>
<tr class="separator:a7b979bbfc9b75ebdd631ab07d4bb50f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed383efe0bba5a6680da4e949aa07a01"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aed383efe0bba5a6680da4e949aa07a01"></a>
QString&#160;</td><td class="memItemRight" valign="bottom"><b>connectionName_</b></td></tr>
<tr class="separator:aed383efe0bba5a6680da4e949aa07a01"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a658451fb6bc709ceb2fcd94b0d9baf0d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a658451fb6bc709ceb2fcd94b0d9baf0d"></a>
static QMutex&#160;</td><td class="memItemRight" valign="bottom"><b>fileAccessMutex_</b></td></tr>
<tr class="separator:a658451fb6bc709ceb2fcd94b0d9baf0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_server_config.html" title="ServerConfig handles the configuration of a PictoServer. ">ServerConfig</a> handles the configuration of a PictoServer. </p>
<p>The configuration of the server is stored in a config database. This object provides an interface for accessing the database, since we don't want to have access by random code.</p>
<p>Currently, the <a class="el" href="class_server.html" title="The Server object managing the actual incoming connections and ServerThread generation for the PictoS...">Server</a> configuration consists exclusively of information about the currently open and recently timed out sessions, the components attached to them and their associated Sqlite files. Functions are provided to access and change these values. In the future, other <a class="el" href="class_server.html" title="The Server object managing the actual incoming connections and ServerThread generation for the PictoS...">Server</a> configurations may be needed and can be added here.</p>
<dl class="section note"><dt>Note</dt><dd>A new (and unique) database connection is created everytime a <a class="el" href="class_server_config.html" title="ServerConfig handles the configuration of a PictoServer. ">ServerConfig</a> object is constructed. This is done because database connections can only be used from within the thread that created them, so we can't just create a single connection. </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Trevor Stavropoulos, Joey Schnurr, Mark Hammond, Matt Gay </dd></dl>
<dl class="section date"><dt>Date</dt><dd>2009-2015 </dd></dl>

<p>Definition at line <a class="el" href="_server_config_8h_source.html#l00026">26</a> of file <a class="el" href="_server_config_8h_source.html">ServerConfig.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="af61bcd662c3be06dd4219770350e65e6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ServerConfig::ServerConfig </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructs a <a class="el" href="class_server_config.html" title="ServerConfig handles the configuration of a PictoServer. ">ServerConfig</a> object. </p>
<p>Opens a connection to the .config Sqlite database that stores information about current and timed out Sessions. If the database file doesn't exist, it is created here. </p>

<p>Definition at line <a class="el" href="_server_config_8cpp_source.html#l00020">20</a> of file <a class="el" href="_server_config_8cpp_source.html">ServerConfig.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a99f5a212ba07712ad3e7f109c4c0325b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">QStringList ServerConfig::getSessionsIdledBefore </td>
          <td>(</td>
          <td class="paramtype">QDateTime&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list of all sessions with "running" field of false and lastactivity time before the input time. </p>
<p>This is useful for figuring out if a Session timed out a long time ago or recently. </p>

<p>Definition at line <a class="el" href="_server_config_8cpp_source.html#l00196">196</a> of file <a class="el" href="_server_config_8cpp_source.html">ServerConfig.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5169a1d3ba39ad1f64998d6d1a9eb3a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ServerConfig::setActivity </td>
          <td>(</td>
          <td class="paramtype">QString&#160;</td>
          <td class="paramname"><em>sessionID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>running</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the lastactivity field for the input session to the current time and changes the running field to the input value. </p>
<p>lastactivity is the approximate time at which the last communication came in regarding this session. It is set as the current time. running indicates if the Session is currently open (ie. Not timedout) on the <a class="el" href="class_server.html" title="The Server object managing the actual incoming connections and ServerThread generation for the PictoS...">Server</a>. </p>

<p>Definition at line <a class="el" href="_server_config_8cpp_source.html#l00161">161</a> of file <a class="el" href="_server_config_8cpp_source.html">ServerConfig.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>source/server/connections/<a class="el" href="_server_config_8h_source.html">ServerConfig.h</a></li>
<li>source/server/connections/<a class="el" href="_server_config_8cpp_source.html">ServerConfig.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.9.1-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
